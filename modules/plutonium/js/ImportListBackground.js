const _0x59f3=['DataSourceUrl','text-center','ImportEntryOpts','StartingEquipment','Source','source','pWaitForUserInput','Name','get','replace','sourceJsonToAbv','render','sourceClassName','_pImportEntry_pFillItems','\x22\x20(from\x20\x22','getData','init','MODULE_NAME','_pImportEntry_pFillProficiencies','pFillActorToolData','_content','sourceJsonToFull','filter','log','entries','items','data','languageProficiencies','page','feat','_skillDisplay','forEach','DATA_URL_BACKGROUNDS','background','Import\x20Backgrounds','absorbFnGetData','Custom\x20URL','player','_activateListeners_absorbListItems','isFeature','sourceJsonToColor','modules/','TASK_EXIT_COMPLETE','Skills','SOURCE_TYP_CUSTOM','getItemActorPassive','_pageFilter','toolProf','Importing\x20background\x20\x22','pImportEntry','URL_TO_HASH_BUILDER','name','_pImportEntry_pImportToDirectoryGeneric','absorbFnBindListeners','_titleButtonRun','pImportEquipmentItemEntries','traits','pGetSources','isStreamerMode','DataSourceFile','backgrounds','doAbsorbItems','TASK_EXIT_CANCELLED','isToken','skillProficiencies','pGetHomebrewSources','SOURCE_TYP_OFFICIAL_ALL','sheet','sourceLong','map','length','_isPreviewable','pFillActorLanguageData','_actor','_titleSearch','sourceShort','push','Background','isCancelled','SOURCE_TYP_BREW','getBackgroundItem','/media/icon/mighty-force.svg','startingEquipment','absorbFnBindListenersRadio','languages','_normalisedTime','update','_list','_pImportEntry_pImportToActor','skills','copy'];(function(_0x1b4530,_0x59f3ec){const _0x2afed9=function(_0xca3fb5){while(--_0xca3fb5){_0x1b4530['push'](_0x1b4530['shift']());}};_0x2afed9(++_0x59f3ec);}(_0x59f3,0xa4));const _0x2afe=function(_0x1b4530,_0x59f3ec){_0x1b4530=_0x1b4530-0x0;let _0x2afed9=_0x59f3[_0x1b4530];return _0x2afed9;};const _0x179c23=_0x2afe;'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{ImportListCharacter}from'./ImportListCharacter.js';import{DataConverterBackground}from'./DataConverterBackground.js';class ImportListBackground extends ImportListCharacter{static[_0x179c23('0x22')](){const _0x1b7a34=_0x179c23;this['_initCreateSheetItemHook']({'prop':_0x1b7a34('0x33'),'importerName':_0x1b7a34('0x4')});}constructor(_0xca3fb5){const _0x36654d=_0x179c23;_0xca3fb5=_0xca3fb5||{},super({'title':_0x36654d('0x34')},_0xca3fb5,{'props':[_0x36654d('0x33')],'titleSearch':_0x36654d('0x4e'),'sidebarTab':_0x36654d('0x2b'),'gameProp':_0x36654d('0x2b'),'defaultFolderPath':['Backgrounds'],'folderType':'Item','pageFilter':new PageFilterBackgrounds(),'isActorRadio':!![],'page':UrlUtil['PG_BACKGROUNDS'],'isPreviewable':!![],'isDedupable':!![]});}async[_0x179c23('0x4b')](){const _0x2dc2cb=_0x179c23;return[new ImportList[(_0x2dc2cb('0x12'))](Config[_0x2dc2cb('0x1a')]('ui',_0x2dc2cb('0x4c'))?'SRD':'5etools',Vetools[_0x2dc2cb('0x32')],{'filterTypes':[ImportList[_0x2dc2cb('0x54')]],'isDefault':!![]}),new ImportList['DataSourceUrl'](_0x2dc2cb('0x36'),'',{'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),new ImportList[(_0x2dc2cb('0x4d'))]('Upload\x20File',{'filterTypes':[ImportList[_0x2dc2cb('0x3e')]]}),...(await Vetools[_0x2dc2cb('0x53')]('background'))[_0x2dc2cb('0x57')](({name:_0x5cf482,url:_0x9bafe2})=>new ImportList['DataSourceUrl'](_0x5cf482,_0x9bafe2,{'filterTypes':[ImportList[_0x2dc2cb('0x6')]]}))];}[_0x179c23('0x21')](){const _0x1cf3c8=_0x179c23,_0x4d06dd={'isPreviewable':this[_0x1cf3c8('0x59')],'titleButtonRun':this[_0x1cf3c8('0x48')],'titleSearch':this[_0x1cf3c8('0x1')],'cols':[{'name':_0x1cf3c8('0x19'),'width':0x4,'field':_0x1cf3c8('0x45')},{'name':_0x1cf3c8('0x3d'),'width':0x6,'field':_0x1cf3c8('0x10')},{'name':_0x1cf3c8('0x16'),'width':0x1,'field':_0x1cf3c8('0x17'),'titleProp':_0x1cf3c8('0x56'),'displayProp':_0x1cf3c8('0x2'),'classNameProp':_0x1cf3c8('0x1e'),'rowClassName':_0x1cf3c8('0x13')}],'rows':this['_content'][_0x1cf3c8('0x57')]((_0xf6b1,_0xee3300)=>{const _0x46c7ae=_0x1cf3c8;return this[_0x46c7ae('0x40')]['mutateForFilters'](_0xf6b1),{'name':_0xf6b1[_0x46c7ae('0x45')],'skills':_0xf6b1[_0x46c7ae('0x30')],'source':_0xf6b1['source'],'sourceShort':Parser[_0x46c7ae('0x1c')](_0xf6b1[_0x46c7ae('0x17')]),'sourceLong':Parser[_0x46c7ae('0x27')](_0xf6b1[_0x46c7ae('0x17')]),'sourceClassName':Parser[_0x46c7ae('0x3a')](_0xf6b1[_0x46c7ae('0x17')]),'ix':_0xee3300};})};return this['_actor']&&(_0x4d06dd['isRadio']=!![]),_0x4d06dd;}[_0x179c23('0x38')](){const _0x5e7002=_0x179c23;this['_list'][_0x5e7002('0x4f')](this[_0x5e7002('0x26')],{'fnGetName':_0x529258=>_0x529258[_0x5e7002('0x45')],'fnGetValues':_0x1bb0cb=>({'source':_0x1bb0cb[_0x5e7002('0x17')],'skills':_0x1bb0cb[_0x5e7002('0x30')],'normalisedTime':_0x1bb0cb[_0x5e7002('0xc')],'normalisedRange':_0x1bb0cb['_normalisedRange'],'hash':UrlUtil[_0x5e7002('0x44')][this['_page']](_0x1bb0cb)}),'fnGetData':UtilList2[_0x5e7002('0x35')],'fnBindListeners':_0x4e556c=>this[_0x5e7002('0x0')]?UtilList2[_0x5e7002('0xa')](this[_0x5e7002('0xe')],_0x4e556c):UtilList2[_0x5e7002('0x47')](this[_0x5e7002('0xe')],_0x4e556c)});}async[_0x179c23('0x43')](_0x10e0ad,_0x4b2dab){const _0xf85512=_0x179c23;_0x4b2dab=_0x4b2dab||{},console[_0xf85512('0x29')](...LGT,_0xf85512('0x42')+_0x10e0ad['name']+_0xf85512('0x20')+Parser['sourceJsonToAbv'](_0x10e0ad[_0xf85512('0x17')])+'\x22)');if(_0x4b2dab['isTemp'])return this[_0xf85512('0x46')](_0x10e0ad,_0x4b2dab);else{if(this[_0xf85512('0x0')])return this[_0xf85512('0xf')](_0x10e0ad,_0x4b2dab);else return this['_pImportEntry_pImportToDirectoryGeneric'](_0x10e0ad,_0x4b2dab);}}async[_0x179c23('0xf')](_0x56f4e8,_0x7d363f){const _0xf5052=_0x179c23,_0x371212={'data':{'details':{'background':_0x56f4e8['name']}}},_0x70bc69=new ImportListCharacter[(_0xf5052('0x14'))]();await this['_pImportEntry_pFillProficiencies'](_0x56f4e8,_0x371212[_0xf5052('0x2c')],_0x70bc69);if(_0x70bc69[_0xf5052('0x5')])return{'status':UtilApplications[_0xf5052('0x50')]};await this[_0xf5052('0x1f')](_0x56f4e8,_0x371212,_0x70bc69);if(_0x56f4e8[_0xf5052('0x9')]){const _0x1f49a5={'defaultData':_0x56f4e8[_0xf5052('0x9')]},_0x308bbc=new ImportListCharacter[(_0xf5052('0x15'))]({'actor':this['_actor'],'startingEquipment':_0x1f49a5,'appSubTitle':_0x56f4e8[_0xf5052('0x45')],'importOpts':_0x70bc69,'equiSpecialSource':_0x56f4e8[_0xf5052('0x17')],'equiSpecialPage':_0x56f4e8[_0xf5052('0x2e')]});_0x308bbc[_0xf5052('0x1d')](!![]),await _0x308bbc[_0xf5052('0x18')]();if(_0x70bc69[_0xf5052('0x5')])return{'status':UtilApplications[_0xf5052('0x50')]};}this[_0xf5052('0x0')][_0xf5052('0xd')](_0x371212),await ImportListCharacter[_0xf5052('0x49')](this['_actor'],_0x70bc69);if(this[_0xf5052('0x0')][_0xf5052('0x51')])this[_0xf5052('0x0')][_0xf5052('0x55')][_0xf5052('0x1d')]();return{'imported':{'name':_0x56f4e8[_0xf5052('0x45')],'actor':this['_actor']},'status':UtilApplications[_0xf5052('0x3c')]};}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x22b4ee,_0x3a862d){const _0x35e897=_0x179c23;return DataConverterBackground[_0x35e897('0x7')](_0x22b4ee,_0x3a862d);}async[_0x179c23('0x24')](_0x57afc2,_0x4c5cd9,_0x81c561){const _0x3c079d=_0x179c23;await DataConverter['pFillActorSkillData'](MiscUtil[_0x3c079d('0x1a')](this['_actor'],_0x3c079d('0x2c'),_0x3c079d('0x2c'),_0x3c079d('0x10')),_0x57afc2[_0x3c079d('0x52')],_0x4c5cd9,_0x81c561);if(_0x81c561[_0x3c079d('0x5')])return;await DataConverter[_0x3c079d('0x5a')](MiscUtil['get'](this[_0x3c079d('0x0')],_0x3c079d('0x2c'),_0x3c079d('0x2c'),_0x3c079d('0x4a'),_0x3c079d('0xb')),_0x57afc2[_0x3c079d('0x2d')],_0x4c5cd9,_0x81c561);if(_0x81c561[_0x3c079d('0x5')])return;_0x81c561[_0x3c079d('0x5')]=await DataConverter[_0x3c079d('0x25')](MiscUtil[_0x3c079d('0x1a')](this['_actor'],_0x3c079d('0x2c'),'data',_0x3c079d('0x4a'),_0x3c079d('0x41')),_0x57afc2['toolProficiencies'],_0x4c5cd9);}async[_0x179c23('0x1f')](_0x362c16,_0x544a8b,_0x18fdd5){const _0x2dbcc3=_0x179c23;_0x18fdd5['items']=[];const _0x196d79=(_0x362c16[_0x2dbcc3('0x2a')]||[])[_0x2dbcc3('0x28')](_0x58a28e=>_0x58a28e[_0x2dbcc3('0x2c')]&&_0x58a28e[_0x2dbcc3('0x2c')][_0x2dbcc3('0x39')]);_0x196d79[_0x2dbcc3('0x58')]&&_0x196d79[_0x2dbcc3('0x31')](_0x1c1862=>{const _0x72eb90=_0x2dbcc3,_0x2df7da=MiscUtil[_0x72eb90('0x11')](_0x1c1862);if(_0x2df7da['name'])_0x2df7da[_0x72eb90('0x45')][_0x72eb90('0x1b')](/^.*?:\s*/,'');_0x18fdd5['items'][_0x72eb90('0x3')](DataConverter[_0x72eb90('0x3f')](_0x1c1862,{'mode':_0x72eb90('0x37'),'img':_0x72eb90('0x3b')+SharedConsts[_0x72eb90('0x23')]+_0x72eb90('0x8'),'fvttType':_0x72eb90('0x2f'),'source':_0x362c16[_0x72eb90('0x17')],'actor':this['_actor']}));});if(_0x18fdd5[_0x2dbcc3('0x2b')]['length'])await UtilActors['pAddActorItems'](this[_0x2dbcc3('0x0')],_0x18fdd5['items']);}}export{ImportListBackground};