const _0x2d4a=['showVe','activate','fromObject','displayBars','addClass','warn','nameMode','empty','visionAngle','sidebar','Regex','toku__cb-head','vision','_$stageNameQuotes','visionBright','data','barPermissions','You\x20have\x20not\x20yet\x20configured\x20the\x20updater.\x20Are\x20you\x20sure\x20you\x20wish\x20to\x20proceed?','length','Bulk\x20Prototype\x20Token\x20Editor','toku__form','_activateListeners_initBtnRun','update','isNameActive','_pUpdateToken_populateDispositionUpdate','_$btnReset','lightAlpha','lightDim','trim','bar2','isImageActive','Failed\x20to\x20update\x20','bar1','MODULE_LOCATION','entities','collection_token_updater','lightAngle','_collectionName','last','Saved!','_pUpdateToken_populateImageUpdate','_getAllAvailableActorBarAttributes','First\x20Name','Quoted\x20Part\x20or\x20Last\x20Name','brightSight','state','_activateListeners_pDoLoadAndRender','push','Neutral','[name=\x22btn-set-template\x22]','$getIptInt','disposition','_STORAGE_KEY','Task','isNameParseDoubleQuotes','collection','add','\x27([^\x27]*?)\x27','<input\x20class=\x22code\x22\x20type=\x22text\x22>','NameUpdateMode','isHasVision','_rows','(None)','isNameRegexIgnoreCase','_activateListeners_pInitListAndFilters','<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>','_pUpdateToken_populateVisionUpdate','find','model','_getSelectedIds','isResourcesActive','replace','Template','debounce','Quoted\x20Part\x20or\x20First\x20Name','nameRegexFormula','lightBright','/template/CollectionTokenUpdaterTemplate.handlebars','dimSight','click','_sidebarTab','[name=\x22btn-run\x22]','_list','split','pGetState','actor','visionDim','...','Failed\x20to\x20save!\x20','TOKEN.BarAttributes','isVisionActive','dimLight','system','_DEFAULTS','pGetUserBoolean','Last\x20Name','Cancel','_activateListeners_initBtnEditTemplate','/template/CollectionTokenUpdater.handlebars','type','getData','i18n','Friendly','IS_DEFAULT','activateTab','_gameProp','Quoted\x20Part\x20or\x20Full\x20Name','values','Updated\x20','Continue','Actor','render','Updating...','(No\x20update)','pSet','teardown','isNameParseSingleQuotes','exec','barAttributeNpc1','\x22([^\x22]*?)\x22','lightOpacity','name','_pageFilter','$getCbBool','map','barAttributeNpc2','barAttributeCharacter2','pGet','_pUpdateToken_populateResourcesUpdate','isUseSheetImage','_addHookAll','STR_SEE_CONSOLE','barAttributeCharacter1','toObject','Update\x20Complete','localize','img','activateListeners','Full\x20Name','hideVe','entries','getPod','isDispositionActive','forEach','getMaxWindowHeight','$getSelEnum','npc','namePermissions','sort','character','brightLight','pRunTasks','_addHookBase','close','get','Hostile','_$stageNameRegex','sightAngle','flat','toTitleCase','keys','_pUpdateToken','token','error','_pUpdateToken_populateNameUpdate'];(function(_0x54e3c9,_0x2d4a1d){const _0x31724b=function(_0x44f6f8){while(--_0x44f6f8){_0x54e3c9['push'](_0x54e3c9['shift']());}};_0x31724b(++_0x2d4a1d);}(_0x2d4a,0x1d1));const _0x3172=function(_0x54e3c9,_0x2d4a1d){_0x54e3c9=_0x54e3c9-0x0;let _0x31724b=_0x2d4a[_0x54e3c9];return _0x31724b;};const _0x2d7aac=_0x3172;import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilterBasic}from'./FilterApplications.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';class CollectionTokenUpdater extends BaseCollectionTool{constructor(){const _0x4243b3=_0x3172;super({'title':_0x4243b3('0x31'),'template':SharedConsts[_0x4243b3('0x3f')]+_0x4243b3('0x80'),'width':0x3c0,'height':Util[_0x4243b3('0x9')](),'resizable':!![]},_0x4243b3('0x73')),this['_pageFilter']=new AppFilterBasic(),this[_0x4243b3('0x70')]=null,this[_0x4243b3('0x37')]=null;}['activateListeners'](_0x44f6f8){const _0x1a0334=_0x3172;super['activateListeners'](_0x44f6f8),this[_0x1a0334('0x33')](_0x44f6f8),this[_0x1a0334('0x7f')](_0x44f6f8),this['_activateListeners_initBtnReset'](_0x44f6f8),this[_0x1a0334('0x5e')](_0x44f6f8);}[_0x2d7aac('0x33')](_0x4cbb09){const _0x8d2de2=_0x2d7aac;_0x4cbb09[_0x8d2de2('0x61')](_0x8d2de2('0x6f'))[_0x8d2de2('0x6d')](async()=>{const _0x8b3301=_0x8d2de2;if(!this[_0x8b3301('0x70')])return;const _0x32b610=this[_0x8b3301('0x63')]();if(!_0x32b610[_0x8b3301('0x30')])return ui['notifications'][_0x8b3301('0x23')]('Please\x20select\x20something\x20to\x20update!');const _0x50665d=await CollectionTokenUpdater[_0x8b3301('0x66')]['pGetState']();if(_0x50665d[_0x8b3301('0x85')]){const _0x13e0a8=await InputUiUtil[_0x8b3301('0x7c')]({'title':'Updated\x20Not\x20Configured','htmlDescription':_0x8b3301('0x2f'),'textNo':_0x8b3301('0x7e'),'textYes':_0x8b3301('0x8b')});if(!_0x13e0a8)return;}this['close'](),ui[_0x8b3301('0x27')][_0x8b3301('0x86')](this[_0x8b3301('0x6e')]);const _0x2d340f=_0x32b610['map'](({id:_0x3948b9,name:_0xde539e})=>new Util[(_0x8b3301('0x53'))](_0xde539e,()=>this[_0x8b3301('0x1a')](_0x3948b9,_0x50665d)));await UtilApplications[_0x8b3301('0x10')](_0x2d340f,{'titleInitial':_0x8b3301('0x8e'),'titleComplete':_0x8b3301('0xa4'),'fnGetRowRunningText':_0xc1357=>'Updating\x20'+_0xc1357+_0x8b3301('0x75'),'fnGetRowSuccessText':_0x37b6d3=>_0x8b3301('0x8a')+_0x37b6d3+'.','fnGetRowErrorText':_0x419c08=>_0x8b3301('0x3d')+_0x419c08+'!\x20'+VeCt[_0x8b3301('0xa1')]}),game[this[_0x8b3301('0x87')]][_0x8b3301('0x8d')]();});}['_activateListeners_initBtnEditTemplate'](_0x471198){const _0x3c2c61=_0x2d7aac;_0x471198['find'](_0x3c2c61('0x4f'))[_0x3c2c61('0x6d')](()=>{const _0x8efdb3=_0x3c2c61,_0xa374b8=new CollectionTokenUpdater[(_0x8efdb3('0x66'))]();_0xa374b8[_0x8efdb3('0x8d')](!![]);});}[_0x2d7aac('0x82')](){const _0x3de9bb=_0x2d7aac;return this[_0x3de9bb('0x5b')]=this['_rows']=this['_mapEntitiesToRows'](),{...super[_0x3de9bb('0x82')](),'titleSearch':this[_0x3de9bb('0x43')]+'s','rows':this['_rows']};}async[_0x2d7aac('0x1a')](_0x2a91fe,_0x89961c){const _0x525752=_0x2d7aac,_0x1d80fb=Actor[_0x525752('0x55')]['get'](_0x2a91fe);if(!_0x1d80fb)return;const _0x2fc409={};let _0x13e955=![];_0x13e955=this['_pUpdateToken_populateNameUpdate'](_0x1d80fb,_0x89961c,_0x2fc409)||_0x13e955,_0x13e955=this[_0x525752('0x36')](_0x1d80fb,_0x89961c,_0x2fc409)||_0x13e955,_0x13e955=this[_0x525752('0x46')](_0x1d80fb,_0x89961c,_0x2fc409)||_0x13e955,_0x13e955=this[_0x525752('0x9e')](_0x1d80fb,_0x89961c,_0x2fc409)||_0x13e955,_0x13e955=this[_0x525752('0x60')](_0x1d80fb,_0x89961c,_0x2fc409)||_0x13e955;if(!_0x13e955)return;_0x1d80fb[_0x525752('0x34')]({'token':_0x2fc409});}[_0x2d7aac('0x1d')](_0x3b8748,_0x512c78,_0x276fce){const _0x44b60e=_0x2d7aac;if(!_0x512c78[_0x44b60e('0x35')])return![];let _0x4ec7c6=![];const _0x20c7d1=()=>_0x3b8748[_0x44b60e('0x97')][_0x44b60e('0x71')]('\x20')[0x0][_0x44b60e('0x3a')]()[_0x44b60e('0x65')](/,;$/,'')[_0x44b60e('0x3a')](),_0x8551b7=()=>_0x3b8748['name'][_0x44b60e('0x71')]('\x20')[_0x44b60e('0x44')]()[_0x44b60e('0x3a')](),_0x570394=()=>{const _0x21ed1b=_0x44b60e,_0x1d32c1=_0x512c78[_0x21ed1b('0x54')]&&_0x512c78[_0x21ed1b('0x92')]?'[\x22\x27]([^\x22\x27]*?)[\x22\x27]':_0x512c78[_0x21ed1b('0x54')]?_0x21ed1b('0x95'):_0x512c78[_0x21ed1b('0x92')]?_0x21ed1b('0x57'):'^$',_0x12c323=new RegExp(_0x1d32c1)[_0x21ed1b('0x93')](_0x3b8748[_0x21ed1b('0x97')]);if(!_0x12c323)return null;return _0x12c323[0x1][_0x21ed1b('0x3a')]();};if(_0x512c78['nameMode']!=null){_0x4ec7c6=!![];switch(_0x512c78[_0x44b60e('0x24')]){case _0x44b60e('0x3'):_0x276fce[_0x44b60e('0x97')]=_0x3b8748[_0x44b60e('0x97')];break;case _0x44b60e('0x48'):_0x276fce['name']=_0x20c7d1();break;case _0x44b60e('0x7d'):_0x276fce['name']=_0x8551b7();break;case _0x44b60e('0x88'):{const _0x25cbbf=_0x570394();_0x276fce['name']=_0x25cbbf||_0x3b8748['name'];break;}case _0x44b60e('0x68'):{const _0x21f4d1=_0x570394();_0x276fce[_0x44b60e('0x97')]=_0x21f4d1||_0x20c7d1();break;}case'Quoted\x20Part\x20or\x20Last\x20Name':{const _0x1dbdcc=_0x570394();_0x276fce[_0x44b60e('0x97')]=_0x1dbdcc||_0x8551b7();break;}case _0x44b60e('0x28'):{const _0x254f10=new RegExp(_0x512c78[_0x44b60e('0x69')],_0x512c78[_0x44b60e('0x5d')]?'i':'')[_0x44b60e('0x93')](_0x3b8748[_0x44b60e('0x97')]);if(_0x254f10)_0x276fce['name']=_0x254f10[0x1];break;}}}return _0x512c78['namePermissions']!=null&&(_0x4ec7c6=!![],_0x276fce['displayName']=_0x512c78[_0x44b60e('0xc')]),_0x4ec7c6;}[_0x2d7aac('0x36')](_0x57cd9d,_0x2f989e,_0x235d79){const _0x303f79=_0x2d7aac;if(!_0x2f989e[_0x303f79('0x7')])return![];if(_0x2f989e[_0x303f79('0x51')]!=null)return _0x235d79[_0x303f79('0x51')]=_0x2f989e[_0x303f79('0x51')],!![];return![];}[_0x2d7aac('0x46')](_0x1fd995,_0x59504e,_0xb68cba){const _0xe5926c=_0x2d7aac;if(!_0x59504e[_0xe5926c('0x3c')])return![];if(_0x59504e[_0xe5926c('0x9f')])return _0xb68cba[_0xe5926c('0x1')]=_0x1fd995[_0xe5926c('0x1')],!![];return![];}['_pUpdateToken_populateResourcesUpdate'](_0x5cb512,_0x1f305f,_0x44d799){const _0x3a7826=_0x2d7aac;if(!_0x1f305f[_0x3a7826('0x64')])return![];let _0xfcbf85=![];return _0x1f305f[_0x3a7826('0x2e')]!=null&&(_0xfcbf85=!![],_0x44d799[_0x3a7826('0x21')]=_0x1f305f[_0x3a7826('0x2e')]),_0x5cb512[_0x3a7826('0x2d')][_0x3a7826('0x81')]===_0x3a7826('0xe')&&(_0x1f305f[_0x3a7826('0xa2')]!=null&&(_0xfcbf85=!![],_0x44d799[_0x3a7826('0x3e')]={'attribute':_0x1f305f['barAttributeCharacter1']==='(None)'?null:_0x1f305f[_0x3a7826('0xa2')]}),_0x1f305f[_0x3a7826('0x9c')]!=null&&(_0xfcbf85=!![],_0x44d799[_0x3a7826('0x3b')]={'attribute':_0x1f305f[_0x3a7826('0x9c')]==='(None)'?null:_0x1f305f[_0x3a7826('0x9c')]})),_0x5cb512[_0x3a7826('0x2d')][_0x3a7826('0x81')]===_0x3a7826('0xb')&&(_0x1f305f[_0x3a7826('0x94')]!=null&&(_0xfcbf85=!![],_0x44d799['bar1']={'attribute':_0x1f305f[_0x3a7826('0x94')]===_0x3a7826('0x5c')?null:_0x1f305f[_0x3a7826('0x94')]}),_0x1f305f[_0x3a7826('0x9b')]!=null&&(_0xfcbf85=!![],_0x44d799[_0x3a7826('0x3b')]={'attribute':_0x1f305f['barAttributeNpc2']==='(None)'?null:_0x1f305f[_0x3a7826('0x9b')]})),_0xfcbf85;}['_pUpdateToken_populateVisionUpdate'](_0x4cc1fc,_0x581f4e,_0x1b0ee){const _0x5e5cbe=_0x2d7aac;if(!_0x581f4e[_0x5e5cbe('0x78')])return![];let _0x463551=![];return _0x581f4e[_0x5e5cbe('0x5a')]!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')][_0x5e5cbe('0x1b')][_0x5e5cbe('0x2a')]!==_0x581f4e['isHasVision']&&(_0x1b0ee[_0x5e5cbe('0x2a')]=_0x581f4e[_0x5e5cbe('0x5a')],_0x463551=!![])),_0x581f4e[_0x5e5cbe('0x74')]!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')]['token'][_0x5e5cbe('0x6c')]!==_0x581f4e[_0x5e5cbe('0x74')]&&(_0x1b0ee[_0x5e5cbe('0x6c')]=_0x581f4e[_0x5e5cbe('0x74')],_0x463551=!![])),_0x581f4e[_0x5e5cbe('0x2c')]!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')]['token'][_0x5e5cbe('0x4a')]!==_0x581f4e[_0x5e5cbe('0x2c')]&&(_0x1b0ee[_0x5e5cbe('0x4a')]=_0x581f4e[_0x5e5cbe('0x2c')],_0x463551=!![])),_0x581f4e[_0x5e5cbe('0x26')]!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')][_0x5e5cbe('0x1b')][_0x5e5cbe('0x16')]!==_0x581f4e[_0x5e5cbe('0x26')]&&(_0x1b0ee[_0x5e5cbe('0x16')]=_0x581f4e[_0x5e5cbe('0x26')],_0x463551=!![])),_0x581f4e[_0x5e5cbe('0x39')]!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')][_0x5e5cbe('0x1b')][_0x5e5cbe('0x79')]!==_0x581f4e['lightDim']&&(_0x1b0ee['dimLight']=_0x581f4e[_0x5e5cbe('0x39')],_0x463551=!![])),_0x581f4e['lightBright']!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')]['token'][_0x5e5cbe('0xf')]!==_0x581f4e[_0x5e5cbe('0x6a')]&&(_0x1b0ee['brightLight']=_0x581f4e['lightBright'],_0x463551=!![])),_0x581f4e['lightAngle']!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')]['token'][_0x5e5cbe('0x42')]!==_0x581f4e['lightAngle']&&(_0x1b0ee[_0x5e5cbe('0x42')]=_0x581f4e[_0x5e5cbe('0x42')],_0x463551=!![])),_0x581f4e['lightOpacity']!=null&&(_0x4cc1fc[_0x5e5cbe('0x2d')]['token'][_0x5e5cbe('0x38')]!==_0x581f4e[_0x5e5cbe('0x96')]&&(_0x1b0ee['lightAlpha']=_0x581f4e[_0x5e5cbe('0x96')],_0x463551=!![])),_0x463551;}[_0x2d7aac('0x12')](..._0x57eb38){const _0x4fa209=_0x2d7aac;return this[_0x4fa209('0x98')][_0x4fa209('0x91')](),super['close'](..._0x57eb38);}}CollectionTokenUpdater[_0x2d7aac('0x66')]=class extends Application{constructor(){const _0x3e9ab9=_0x2d7aac;super({'title':'Prototype\x20Token\x20Updater\x20Configuration','template':SharedConsts[_0x3e9ab9('0x3f')]+_0x3e9ab9('0x6b'),'width':0x258,'height':0x320,'resizable':!![]});}[_0x2d7aac('0x2')](_0x4da5cc){const _0x345e77=_0x2d7aac;_0x4da5cc[_0x345e77('0x25')](),this[_0x345e77('0x4c')](_0x4da5cc);}static async[_0x2d7aac('0x72')](){const _0x51552e=_0x2d7aac,_0x36bb36=await StorageUtil[_0x51552e('0x9d')](CollectionTokenUpdater[_0x51552e('0x66')][_0x51552e('0x52')]);return _0x36bb36||CollectionTokenUpdater[_0x51552e('0x66')]['_DEFAULTS'];}async['_activateListeners_pDoLoadAndRender'](_0x1049b5){const _0x3c3acf=_0x2d7aac,_0x37975a=await StorageUtil[_0x3c3acf('0x9d')](CollectionTokenUpdater['Template']['_STORAGE_KEY']),_0x311c53=BaseComponent[_0x3c3acf('0x20')](_0x37975a||CollectionTokenUpdater['Template'][_0x3c3acf('0x7b')]),_0x1d2616=_0x311c53[_0x3c3acf('0x6')](),_0x10c7bb=()=>{const _0x2bdd5d=_0x3c3acf,_0x146188=_0x311c53[_0x2bdd5d('0xa3')]();delete _0x146188[_0x2bdd5d('0x85')],StorageUtil[_0x2bdd5d('0x90')](CollectionTokenUpdater[_0x2bdd5d('0x66')][_0x2bdd5d('0x52')],_0x146188);},_0xd3fcf6=MiscUtil[_0x3c3acf('0x67')](_0x10c7bb,0x64);_0x311c53[_0x3c3acf('0xa0')](_0x3c3acf('0x4b'),_0xd3fcf6);const _0x196abb=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,'isNameActive'),_0x455f49=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,'isNameParseDoubleQuotes'),_0x7677e3=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,_0x3c3acf('0x92')),_0x3657d9=$$`<div class="flex-v-center toku__row">
			<label class="flex-v-center mr-2 ml-auto"><div class="mr-1">Accept Double Quotes</div>${_0x455f49}</label>
			<label class="flex-v-center"><div class="mr-1">Accept Single Quotes</div>${_0x7677e3}</label>
		</div>`,_0x5628bd=ComponentUiUtil['$getIptStr'](_0x311c53,_0x3c3acf('0x69'),{'html':_0x3c3acf('0x58')}),_0x3397c4=ComponentUiUtil['$getCbBool'](_0x311c53,_0x3c3acf('0x5d')),_0x30ff8c=$$`<div class="flex-col w=100">
			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-2 help" title="The first capture group will be used, if the expression matches">Expression</div>${_0x5628bd}
			</label>

			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-1">Ignore Case</div>${_0x3397c4}
			</label>
		</div>`,_0x4d58b9=[new CollectionTokenUpdater['Template'][(_0x3c3acf('0x59'))]('Full\x20Name',_0x3657d9,_0x30ff8c),new CollectionTokenUpdater[(_0x3c3acf('0x66'))][(_0x3c3acf('0x59'))]('First\x20Name',_0x3657d9,_0x30ff8c),new CollectionTokenUpdater[(_0x3c3acf('0x66'))][(_0x3c3acf('0x59'))](_0x3c3acf('0x7d'),_0x3657d9,_0x30ff8c),new CollectionTokenUpdater[(_0x3c3acf('0x66'))]['NameUpdateMode']('Quoted\x20Part\x20or\x20Full\x20Name',_0x3657d9,_0x30ff8c),new CollectionTokenUpdater[(_0x3c3acf('0x66'))][(_0x3c3acf('0x59'))](_0x3c3acf('0x68'),_0x3657d9,_0x30ff8c),new CollectionTokenUpdater['Template'][(_0x3c3acf('0x59'))](_0x3c3acf('0x49'),_0x3657d9,_0x30ff8c),new CollectionTokenUpdater['Template'][(_0x3c3acf('0x59'))](_0x3c3acf('0x28'),_0x3657d9,_0x30ff8c)],_0x1a1e55=ComponentUiUtil[_0x3c3acf('0xa')](_0x311c53,_0x3c3acf('0x24'),{'values':_0x4d58b9[_0x3c3acf('0x9a')](_0x590275=>_0x590275[_0x3c3acf('0x97')]),'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x1c16da=()=>{const _0x4bad04=_0x3c3acf,_0xc1a25c=_0x4d58b9[_0x4bad04('0x61')](_0x1f2ece=>_0x1d2616[_0x4bad04('0x13')]('nameMode')===_0x1f2ece['name']);if(_0xc1a25c)_0xc1a25c[_0x4bad04('0x1f')]();else _0x3657d9['hideVe'](),_0x30ff8c[_0x4bad04('0x4')]();};_0x311c53[_0x3c3acf('0x11')](_0x3c3acf('0x24'),_0x1c16da),_0x1c16da();const _0x5d4993={};Object[_0x3c3acf('0x5')](TOKEN_DISPLAY_MODES)[_0x3c3acf('0xd')](([_0x5d8bb5,_0x39636f],[_0xe9d26f,_0x5ded32])=>SortUtil['ascSort'](_0x39636f,_0x5ded32))[_0x3c3acf('0x8')](([_0x3c8614,_0x5084f5])=>_0x5d4993[_0x5084f5]=_0x3c8614[_0x3c3acf('0x71')]('_')[_0x3c3acf('0x9a')](_0x2f400a=>_0x2f400a[_0x3c3acf('0x18')]())['join']('\x20'));const _0xaa1d9b=ComponentUiUtil[_0x3c3acf('0xa')](_0x311c53,_0x3c3acf('0xc'),{'values':Object[_0x3c3acf('0x19')](_0x5d4993),'fnDisplay':_0x35ca90=>_0x5d4993[_0x35ca90],'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0xfd03a3=ComponentUiUtil['$getCbBool'](_0x311c53,'isDispositionActive'),_0x5c74b3=[_0x3c3acf('0x14'),_0x3c3acf('0x4e'),_0x3c3acf('0x84')],_0x32b2a0=ComponentUiUtil['$getSelEnum'](_0x311c53,_0x3c3acf('0x51'),{'values':[-0x1,0x0,0x1],'fnDisplay':_0x54c013=>_0x5c74b3[_0x54c013+0x1],'isAllowNull':!![],'displayNullAs':_0x3c3acf('0x8f')}),_0x1b914c=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,_0x3c3acf('0x3c')),_0x574651=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,_0x3c3acf('0x9f')),_0x28d071=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,_0x3c3acf('0x64')),_0x5427df=ComponentUiUtil[_0x3c3acf('0xa')](_0x311c53,_0x3c3acf('0x2e'),{'values':Object[_0x3c3acf('0x19')](_0x5d4993),'fnDisplay':_0x541049=>_0x5d4993[_0x541049],'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x1c69d3=CollectionTokenUpdater[_0x3c3acf('0x66')][_0x3c3acf('0x47')]('character'),_0x3fe1af=['(None)',...Object[_0x3c3acf('0x89')](_0x1c69d3)[_0x3c3acf('0x17')]()],_0x4f29b2=CollectionTokenUpdater['Template'][_0x3c3acf('0x47')](_0x3c3acf('0xb')),_0x353722=[_0x3c3acf('0x5c'),...Object[_0x3c3acf('0x89')](_0x4f29b2)[_0x3c3acf('0x17')]()],_0x353f1d=ComponentUiUtil['$getSelEnum'](_0x311c53,'barAttributeCharacter1',{'values':_0x3fe1af,'isAllowNull':!![],'displayNullAs':_0x3c3acf('0x8f')}),_0x4ea2ab=ComponentUiUtil[_0x3c3acf('0xa')](_0x311c53,_0x3c3acf('0x9c'),{'values':_0x3fe1af,'isAllowNull':!![],'displayNullAs':_0x3c3acf('0x8f')}),_0xf3143=ComponentUiUtil[_0x3c3acf('0xa')](_0x311c53,'barAttributeNpc1',{'values':_0x353722,'isAllowNull':!![],'displayNullAs':_0x3c3acf('0x8f')}),_0xbdf1b6=ComponentUiUtil[_0x3c3acf('0xa')](_0x311c53,'barAttributeNpc2',{'values':_0x353722,'isAllowNull':!![],'displayNullAs':_0x3c3acf('0x8f')}),_0x52ead8=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,_0x3c3acf('0x78')),_0x32f3ff=ComponentUiUtil[_0x3c3acf('0x99')](_0x311c53,_0x3c3acf('0x5a')),_0x235aef=ComponentUiUtil[_0x3c3acf('0x50')](_0x311c53,_0x3c3acf('0x74'),null,{'min':0x0,'isAllowNull':!![],'html':'<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>'}),_0x553c4f=ComponentUiUtil[_0x3c3acf('0x50')](_0x311c53,_0x3c3acf('0x2c'),null,{'min':0x0,'isAllowNull':!![],'html':_0x3c3acf('0x5f')}),_0x245190=ComponentUiUtil[_0x3c3acf('0x50')](_0x311c53,_0x3c3acf('0x26'),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x3c3acf('0x5f')}),_0x194492=ComponentUiUtil[_0x3c3acf('0x50')](_0x311c53,_0x3c3acf('0x39'),null,{'min':0x0,'isAllowNull':!![],'html':_0x3c3acf('0x5f')}),_0x28e77d=ComponentUiUtil[_0x3c3acf('0x50')](_0x311c53,_0x3c3acf('0x6a'),null,{'min':0x0,'isAllowNull':!![],'html':_0x3c3acf('0x5f')}),_0xfa7080=ComponentUiUtil[_0x3c3acf('0x50')](_0x311c53,_0x3c3acf('0x42'),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x3c3acf('0x5f')}),_0x562ccc=ComponentUiUtil['$getIptNumber'](_0x311c53,'lightOpacity',null,{'min':0x0,'max':0x1,'isAllowNull':!![],'html':_0x3c3acf('0x5f')}),_0x1eea92=$('<button\x20class=\x22btn-5et\x20w-100\x22>Save</button>')[_0x3c3acf('0x6d')](async()=>{const _0x2a85de=_0x3c3acf;try{await _0x10c7bb(),ui['notifications']['info'](_0x2a85de('0x45'));}catch(_0x19658e){ui['notifications'][_0x2a85de('0x1c')](_0x2a85de('0x76')+VeCt[_0x2a85de('0xa1')]);throw _0x19658e;}this[_0x2a85de('0x12')]();});_0x1049b5[_0x3c3acf('0x22')](_0x3c3acf('0x32')),$$(_0x1049b5)`
		<label class="split-v-center mb-1" title="Update Token Name">
			<div class="toku__sect-head">Name</div>
			${_0x196abb[_0x3c3acf('0x22')]('toku__cb-head')}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Update Mode</div>${_0x1a1e55}</label>
			${_0x3657d9}
			${_0x30ff8c}
			<label class="my-1 split-v-center toku__row"><div>Display Name</div>${_0xaa1d9b}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Disposition">
			<div class="toku__sect-head">Disposition</div>
			${_0xfd03a3[_0x3c3acf('0x22')](_0x3c3acf('0x29'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Token Disposition</div>${_0x32b2a0}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Image">
			<div class="toku__sect-head">Image</div>
			${_0x1b914c[_0x3c3acf('0x22')]('toku__cb-head')}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Use Sheet Image</div>${_0x574651}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Resources">
			<div class="toku__sect-head">Resources</div>
			${_0x28d071[_0x3c3acf('0x22')](_0x3c3acf('0x29'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Display Bars</div>${_0x5427df}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (Characters)</div>${_0x353f1d}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (Characters)</div>${_0x4ea2ab}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (NPCs)</div>${_0xf3143}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (NPCs)</div>${_0xbdf1b6}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Vision">
			<div class="toku__sect-head">Vision</div>
			${_0x52ead8[_0x3c3acf('0x22')]('toku__cb-head')}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Has Vision</div>${_0x32f3ff}</label>
			<label class="my-1 split-v-center toku__row"><div>Dim Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x235aef}</label>
			<label class="my-1 split-v-center toku__row"><div>Bright Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x553c4f}</label>
			<label class="my-1 split-v-center toku__row"><div>Sight Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x245190}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Dim <span class="ve-muted ve-small">(Distance)</span></div>${_0x194492}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Bright <span class="ve-muted ve-small">(Distance)</span></div>${_0x28e77d}</label>
			<label class="my-1 split-v-center toku__row"><div>Emission Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0xfa7080}</label>
			<label class="my-1 split-v-center toku__row"><div>Light Opacity <span class="ve-muted ve-small">(0-1)</span></div>${_0x562ccc}</label>
		</div>

		<div class="mt-auto">
			${_0x1eea92}
		</div>
		`;}static[_0x2d7aac('0x47')](_0x8b4af){const _0x5de370=_0x2d7aac,_0x814af2=Actor[_0x5de370('0x55')][_0x5de370('0x40')]['filter'](_0x224eaa=>_0x224eaa['data'][_0x5de370('0x81')]===_0x8b4af);_0x814af2[_0x5de370('0x4d')]({'data':{'data':game[_0x5de370('0x7a')][_0x5de370('0x62')][_0x5de370('0x8c')][_0x8b4af]}});const _0x278f7e={},_0x440694={},_0x1d8ee2=[game[_0x5de370('0x83')][_0x5de370('0x0')](_0x5de370('0x77')),game['i18n'][_0x5de370('0x0')]('TOKEN.BarValues')];return _0x814af2[_0x5de370('0x8')](_0x3bac4a=>{const _0x2203ac=UtilActors['getActorBarAttributes'](_0x3bac4a);_0x1d8ee2['forEach'](_0x566ff4=>{(_0x2203ac[_0x566ff4]||[])['forEach'](_0x1f0ded=>{const _0x26d31d=_0x3172,_0x20ed1e=_0x440694[_0x566ff4]=_0x440694[_0x566ff4]||new Set();if(_0x20ed1e['has'](_0x1f0ded))return;_0x20ed1e[_0x26d31d('0x56')](_0x1f0ded),(_0x278f7e[_0x566ff4]=_0x278f7e[_0x566ff4]||[])[_0x26d31d('0x4d')](_0x1f0ded);});});}),_0x1d8ee2['forEach'](_0x26fe2e=>{(_0x278f7e[_0x26fe2e]||[])['sort']((_0x478085,_0xb775ed)=>_0x478085['localeCompare'](_0xb775ed));}),_0x278f7e;}},CollectionTokenUpdater[_0x2d7aac('0x66')][_0x2d7aac('0x52')]=_0x2d7aac('0x41'),CollectionTokenUpdater['Template'][_0x2d7aac('0x7b')]={'IS_DEFAULT':!![],'isNameActive':!![],'isDispositionActive':!![],'isImageActive':!![],'isResourcesActive':!![],'isVisionActive':!![],'isNameParseDoubleQuotes':!![],'isNameParseSingleQuotes':!![]},CollectionTokenUpdater[_0x2d7aac('0x66')][_0x2d7aac('0x59')]=class{constructor(_0x3271b2,_0x46a209,_0xf919c8){const _0x21024b=_0x2d7aac;this[_0x21024b('0x97')]=_0x3271b2,this['_$stageNameQuotes']=_0x46a209,this[_0x21024b('0x15')]=_0xf919c8;}[_0x2d7aac('0x1f')](){const _0x32759f=_0x2d7aac;switch(this[_0x32759f('0x97')]){case _0x32759f('0x3'):case _0x32759f('0x48'):case'Last\x20Name':this[_0x32759f('0x2b')][_0x32759f('0x4')](),this[_0x32759f('0x15')][_0x32759f('0x4')]();break;case'Quoted\x20Part\x20or\x20Full\x20Name':case _0x32759f('0x68'):case _0x32759f('0x49'):this[_0x32759f('0x2b')][_0x32759f('0x1e')](),this['_$stageNameRegex'][_0x32759f('0x4')]();break;case'Regex':this[_0x32759f('0x2b')][_0x32759f('0x4')](),this[_0x32759f('0x15')]['showVe']();break;}}};export{CollectionTokenUpdater};