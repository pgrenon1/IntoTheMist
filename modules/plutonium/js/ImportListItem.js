const _0x40b2=['Import\x20Items','replace','sheetItemsAmmo','render','typeText','rarity','ammo','pImportEntry','data','init','fluff','0-5','wondrous','\x22\x20(from\x20\x22','Custom\x20URL','mutateForFilters','_pImportEntry_pImportToActor','_titleButtonRun','getData','pInit','weight','_isPreviewable','createEmbeddedEntity','filterValues','consumableType','_pImportEntry_pImportToDirectoryGeneric','_fluffLookup','5etools','Cost','text-center','quantity','populatePropertyAndTypeReference','Unknown','URL_TO_HASH_BUILDER','_list','sourceJsonToAbv','isTemp','Wondrous\x20Item','DataSourceSpecial','Item','hover','page','valueMult','STR_SEE_CONSOLE','split','pCacheAndGet','itemValueToFull','type','filter','sourceLong','notifications','sourceClassName','doAbsorbItems','itemWeightToFull','SOURCE_TYP_BREW','DataSourceFile','_pImportEntry_getSheetItemsAmmo','forEach','pGetSources','name','getItemsFromHomebrew','source','ammoType','pGetItemItem','ascSortLower','items','get','3-2','isSplitPacksActor','sortItems','Error(s)\x20when\x20breaking\x20','all','Rarity','map','sheet','Unknown\x20Type','SRD','uppercaseFirst','string','isStreamerMode','Item\x20\x22','join','sourceJsonToColor','stringify','Unhandled\x20pack\x20contents\x20type\x20\x22','Items','Weight','DataSourceUrl','item','TASK_EXIT_COMPLETE','error','sourceJsonToFull','_vType','SOURCE_TYP_OFFICIAL_ALL','weightValueToNumber','Type','5etools-items','packContents',')\x20into\x20constituent\x20items:\x20','OwnedItem','Unknown\x20Rarity','_initCreateSheetItemHook','Name','enhanceItem','PG_ITEMS','special','SOURCE_TYP_CUSTOM','absorbFnGetData','_actor','value','\x22)\x20imported\x20with\x20errors!\x20','_content','sortEntries','toTitleCase','srd','pGetItems','1-4'];(function(_0x251f80,_0x40b205){const _0x441725=function(_0x2950fc){while(--_0x2950fc){_0x251f80['push'](_0x251f80['shift']());}};_0x441725(++_0x40b205);}(_0x40b2,0xca));const _0x4417=function(_0x251f80,_0x40b205){_0x251f80=_0x251f80-0x0;let _0x441725=_0x40b2[_0x251f80];return _0x441725;};const _0x41ffb7=_0x4417;'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';class ImportListItem extends ImportList{static[_0x41ffb7('0x29')](){const _0x520afa=_0x41ffb7;this[_0x520afa('0x10')]({'prop':_0x520afa('0x3'),'importerName':'Item'});}constructor(_0x2950fc){const _0x161fa9=_0x41ffb7;_0x2950fc=_0x2950fc||{},super({'title':_0x161fa9('0x20')},_0x2950fc,{'namespace':_0x161fa9('0x3'),'titleSearch':_0x161fa9('0x61'),'sidebarTab':_0x161fa9('0x61'),'gameProp':_0x161fa9('0x61'),'defaultFolderPath':[_0x161fa9('0x0')],'folderType':_0x161fa9('0x47'),'fnListSort':PageFilterItems[_0x161fa9('0x65')],'pageFilter':new PageFilterItems(),'page':UrlUtil[_0x161fa9('0x13')],'isPreviewable':!![],'isDedupable':!![]}),this[_0x161fa9('0x3a')]=null;}async[_0x41ffb7('0x5a')](){const _0x3f023c=_0x41ffb7;return this['constructor'][_0x3f023c('0x5a')]();}static async['pGetSources'](){const _0x25bc69=_0x41ffb7,_0x4fec26={'pPostLoad':async _0x23e367=>{const _0x26b465=_0x4417;return Renderer[_0x26b465('0x3')][_0x26b465('0x5c')](_0x23e367);}};return[new ImportList[(_0x25bc69('0x46'))](Config[_0x25bc69('0x62')]('ui',_0x25bc69('0x6f'))?_0x25bc69('0x6c'):_0x25bc69('0x3b'),async()=>(await Vetools[_0x25bc69('0x1e')]())[_0x25bc69('0x3')],{'cacheKey':_0x25bc69('0xb'),'filterTypes':[ImportList[_0x25bc69('0x8')]],'isDefault':!![]}),new ImportList['DataSourceUrl'](_0x25bc69('0x2e'),'',{..._0x4fec26,'filterTypes':[ImportList[_0x25bc69('0x15')]]}),new ImportList[(_0x25bc69('0x57'))]('Upload\x20File',{..._0x4fec26,'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),...(await Vetools['pGetHomebrewSources'](_0x25bc69('0x3')))[_0x25bc69('0x69')](({name:_0x26b9b0,url:_0x5908cf})=>new ImportList[(_0x25bc69('0x2'))](_0x26b9b0,_0x5908cf,{..._0x4fec26,'filterTypes':[ImportList[_0x25bc69('0x56')]]}))];}[_0x41ffb7('0x32')](){const _0x4ae0b9=_0x41ffb7;return{'isPreviewable':this[_0x4ae0b9('0x35')],'titleButtonRun':this[_0x4ae0b9('0x31')],'titleSearch':this['_titleSearch'],'cols':[{'name':_0x4ae0b9('0x11'),'width':0x3,'field':_0x4ae0b9('0x5b')},{'name':'Type','width':_0x4ae0b9('0x63'),'field':_0x4ae0b9('0x4f')},{'name':_0x4ae0b9('0x3c'),'width':_0x4ae0b9('0x1f'),'field':'cost','rowClassName':'text-center'},{'name':_0x4ae0b9('0x1'),'width':_0x4ae0b9('0x1f'),'field':_0x4ae0b9('0x34'),'rowClassName':_0x4ae0b9('0x3d')},{'name':'A.','width':_0x4ae0b9('0x2b'),'field':'attunement','rowClassName':_0x4ae0b9('0x3d')},{'name':_0x4ae0b9('0x68'),'width':'1-5','field':_0x4ae0b9('0x25')},{'name':'Source','width':0x1,'field':'source','titleProp':_0x4ae0b9('0x51'),'displayProp':'sourceShort','classNameProp':_0x4ae0b9('0x53'),'rowClassName':'text-center'}],'rows':this['_content']['map']((_0x2c4e40,_0x42dd1d)=>{const _0x246723=_0x4ae0b9;return this['_pageFilter'][_0x246723('0x2f')](_0x2c4e40),_0x2c4e40[_0x246723('0x7')]=_0x2c4e40['_typeListText']['join'](',\x20')[_0x246723('0x6d')](),{'name':_0x2c4e40[_0x246723('0x5b')],'type':_0x2c4e40[_0x246723('0x7')],'cost':_0x2c4e40['value']||_0x2c4e40[_0x246723('0x4a')]?Parser[_0x246723('0x4e')](_0x2c4e40,{'isShortForm':!![]})[_0x246723('0x21')](/ +/g,'\u00a0'):'—','weight':Parser[_0x246723('0x55')](_0x2c4e40,!![])||'—','rarity':(_0x2c4e40['rarity']||_0x246723('0x40'))[_0x246723('0x1c')](),'attunement':_0x2c4e40['_attunementCategory']==='No'?'':'×','source':_0x2c4e40[_0x246723('0x5d')],'sourceShort':Parser[_0x246723('0x43')](_0x2c4e40[_0x246723('0x5d')]),'sourceLong':Parser[_0x246723('0x6')](_0x2c4e40['source']),'sourceClassName':Parser[_0x246723('0x72')](_0x2c4e40['source']),'ix':_0x42dd1d};})};}['_activateListeners_absorbListItems'](){const _0x350c38=_0x41ffb7;this[_0x350c38('0x42')][_0x350c38('0x54')](this[_0x350c38('0x1a')],{'fnGetName':_0x50f2f9=>_0x50f2f9[_0x350c38('0x5b')],'fnGetValues':_0x55fd04=>({'source':_0x55fd04[_0x350c38('0x5d')],'type':_0x55fd04['_vType'],'cost':_0x55fd04[_0x350c38('0x18')]||0x0,'rarity':_0x55fd04[_0x350c38('0x25')],'attunement':_0x55fd04['_attunementCategory']!=='No','weight':Parser[_0x350c38('0x9')](_0x55fd04['weight']),'hash':UrlUtil[_0x350c38('0x41')][this['_page']](_0x55fd04)}),'fnGetData':UtilList2[_0x350c38('0x16')],'fnBindListeners':_0x1de544=>UtilList2['absorbFnBindListeners'](this[_0x350c38('0x42')],_0x1de544)});}async[_0x41ffb7('0x33')](){const _0x17212a=_0x41ffb7;await super[_0x17212a('0x33')](),this['_fluffLookup']={};const _0x4af0e4=await Vetools['pGetItemFluff']();_0x4af0e4['itemFluff'][_0x17212a('0x59')](_0x2d2c25=>(this[_0x17212a('0x3a')][_0x2d2c25[_0x17212a('0x5d')]]=this[_0x17212a('0x3a')][_0x2d2c25[_0x17212a('0x5d')]]||{})[_0x2d2c25['name']]=_0x2d2c25),await Renderer[_0x17212a('0x3')][_0x17212a('0x3f')]();}['getFolderPathMeta'](){const _0x2d54bf=_0x41ffb7;return{...super['getFolderPathMeta'](),'rarity':{'label':'Rarity','getter':_0x60cc07=>(!_0x60cc07[_0x2d54bf('0x25')]||_0x60cc07[_0x2d54bf('0x25')]==='Unknown'?_0x2d54bf('0xf'):_0x60cc07[_0x2d54bf('0x25')])['toTitleCase']()},'type':{'label':_0x2d54bf('0xa'),'getter':_0x366fb0=>{const _0x23c99a=_0x2d54bf;if(_0x366fb0[_0x23c99a('0x4f')])return Renderer[_0x23c99a('0x3')]['getItemTypeName'](_0x366fb0[_0x23c99a('0x4f')])[_0x23c99a('0x1c')]();else{if(_0x366fb0['typeText'])return _0x366fb0[_0x23c99a('0x24')];else{if(_0x366fb0[_0x23c99a('0x2c')])return _0x23c99a('0x45');else{if(_0x366fb0['poison'])return'Poison';else return _0x23c99a('0x6b');}}}}}};}async[_0x41ffb7('0x27')](_0x3fd6aa,_0x3b4ebc){const _0x1e5db7=_0x41ffb7;_0x3b4ebc=_0x3b4ebc||{},console['log'](...LGT,'Importing\x20item\x20\x22'+_0x3fd6aa[_0x1e5db7('0x5b')]+'\x22\x20(from\x20\x22'+Parser['sourceJsonToAbv'](_0x3fd6aa[_0x1e5db7('0x5d')])+'\x22)');const _0x287302=_0x3fd6aa[_0x1e5db7('0x2a')]||MiscUtil[_0x1e5db7('0x62')](this[_0x1e5db7('0x3a')],_0x3fd6aa[_0x1e5db7('0x5d')],_0x3fd6aa[_0x1e5db7('0x5b')]),_0x29a7e9={'fluff':_0x287302};if(_0x3b4ebc[_0x1e5db7('0x3e')]!=null)_0x29a7e9[_0x1e5db7('0x3e')]=_0x3b4ebc[_0x1e5db7('0x3e')];if(_0x3b4ebc[_0x1e5db7('0x44')])return this[_0x1e5db7('0x39')](_0x3fd6aa,_0x3b4ebc,_0x29a7e9);else{if(this[_0x1e5db7('0x17')])return this[_0x1e5db7('0x30')](_0x3fd6aa,_0x3b4ebc,_0x29a7e9);else return this[_0x1e5db7('0x39')](_0x3fd6aa,_0x3b4ebc,_0x29a7e9);}}async[_0x41ffb7('0x30')](_0x220702,_0x28b1e9,_0xd8522a){const _0x2a6e0f=_0x41ffb7;_0xd8522a={..._0xd8522a||{}},_0xd8522a[_0x2a6e0f('0x37')]=_0x28b1e9[_0x2a6e0f('0x37')],_0xd8522a[_0x2a6e0f('0x22')]=this[_0x2a6e0f('0x58')](_0x220702);if(_0x220702['packContents']&&Config[_0x2a6e0f('0x62')]('importItem',_0x2a6e0f('0x64'))){const _0x2bcbff=[],_0x4351f7=await Promise[_0x2a6e0f('0x67')](_0x220702[_0x2a6e0f('0xc')][_0x2a6e0f('0x69')](async _0x301dc9=>{const _0x513cb9=_0x2a6e0f,_0x36eabc=_0x301dc9[_0x513cb9('0x3e')]||0x1;if(_0x301dc9[_0x513cb9('0x3')]||typeof _0x301dc9===_0x513cb9('0x6e')){let [_0x459a4c,_0x3653b0]=(_0x301dc9[_0x513cb9('0x3')]||_0x301dc9)[_0x513cb9('0x4c')]('|');if(!_0x3653b0)_0x3653b0=SRC_DMG;const _0x524ce4=UrlUtil[_0x513cb9('0x41')][UrlUtil[_0x513cb9('0x13')]]({'name':_0x459a4c,'source':_0x3653b0}),_0x577828=await Renderer[_0x513cb9('0x48')][_0x513cb9('0x4d')](UrlUtil['PG_ITEMS'],_0x3653b0,_0x524ce4);return DataConverterItem[_0x513cb9('0x5f')](_0x577828,{'filterValues':_0x28b1e9[_0x513cb9('0x37')],..._0xd8522a,'quantity':_0x36eabc});}else{if(_0x301dc9[_0x513cb9('0x14')]){const _0x48e16c={'name':_0x301dc9[_0x513cb9('0x14')][_0x513cb9('0x1c')](),'type':'G','source':_0x220702['source'],'page':_0x220702[_0x513cb9('0x49')],'srd':_0x220702[_0x513cb9('0x1d')]};return Renderer[_0x513cb9('0x3')][_0x513cb9('0x12')](_0x48e16c),DataConverterItem[_0x513cb9('0x5f')](_0x48e16c,{'filterValues':_0x28b1e9['filterValues'],..._0xd8522a,'quantity':_0x36eabc});}else _0x2bcbff['push'](_0x513cb9('0x74')+JSON[_0x513cb9('0x73')](_0x301dc9)+'\x22');}}));await this[_0x2a6e0f('0x17')][_0x2a6e0f('0x36')](_0x2a6e0f('0xe'),_0x4351f7[_0x2a6e0f('0x50')](Boolean),{}),_0x2bcbff['length']&&(ui[_0x2a6e0f('0x52')][_0x2a6e0f('0x5')](_0x2a6e0f('0x70')+_0x220702['name']+_0x2a6e0f('0x2d')+Parser[_0x2a6e0f('0x43')](_0x220702[_0x2a6e0f('0x5d')])+_0x2a6e0f('0x19')+VeCt[_0x2a6e0f('0x4b')]),console[_0x2a6e0f('0x5')](...LGT,_0x2a6e0f('0x66')+_0x220702[_0x2a6e0f('0x5b')]+'\x20('+_0x220702[_0x2a6e0f('0x5d')]+_0x2a6e0f('0xd')+_0x2bcbff[_0x2a6e0f('0x71')](';\x20')));}else await this[_0x2a6e0f('0x17')][_0x2a6e0f('0x36')](_0x2a6e0f('0xe'),await DataConverterItem[_0x2a6e0f('0x5f')](_0x220702,_0xd8522a),{});if(this['_actor']['isToken'])this[_0x2a6e0f('0x17')][_0x2a6e0f('0x6a')][_0x2a6e0f('0x23')]();return{'imported':{'name':_0x220702[_0x2a6e0f('0x5b')],'actor':this['_actor']},'status':UtilApplications[_0x2a6e0f('0x4')]};}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x4b1850,_0x544964){const _0x56b151=_0x41ffb7;return DataConverterItem[_0x56b151('0x5f')](_0x4b1850,_0x544964);}['_pImportEntry_getSheetItemsAmmo'](_0x13132e){const _0xfb2442=_0x41ffb7;if(!_0x13132e[_0xfb2442('0x5e')])return null;if(!this['_actor'])return null;return(this[_0xfb2442('0x17')][_0xfb2442('0x28')][_0xfb2442('0x61')]||[])['filter'](_0x3e7d8b=>_0x3e7d8b[_0xfb2442('0x4f')]==='consumable'&&_0x3e7d8b[_0xfb2442('0x28')][_0xfb2442('0x38')]===_0xfb2442('0x26'));}static[_0x41ffb7('0x1b')](_0x337450,_0x164dc5){const _0x39520d=_0x41ffb7;if(_0x337450['ammoType']&&!_0x164dc5[_0x39520d('0x5e')])return 0x1;if(!_0x337450[_0x39520d('0x5e')]&&_0x164dc5['ammoType'])return-0x1;return SortUtil[_0x39520d('0x60')](_0x337450[_0x39520d('0x5b')],_0x164dc5[_0x39520d('0x5b')])||SortUtil[_0x39520d('0x60')](Parser[_0x39520d('0x6')](_0x337450[_0x39520d('0x5d')]),Parser[_0x39520d('0x6')](_0x164dc5[_0x39520d('0x5d')]));}}export{ImportListItem};