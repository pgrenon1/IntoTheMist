const _0x4360=['\x20to\x20actor!','log','copy','\x22\x20=\x20\x22','get','ACTOR_TEMP_NAME','_PROPS_DAMAGE_IMM_VULN_RES','isSkip','custom','update','Cannot\x20import\x20','has','warn','VALID_DAMAGE_TYPES','pImportEntry','Unimplemented!','_data','tokenIsAddVision','create','_props','assign','existing','actor','physical','importEntity','getTokenUrl','getImageUrlFromFluff','includes','senses','piercing','_pImportEntry_fillConditionsDamage','max','_displayName','push',')\x20save\x20\x22','_pImportEntry_hasTokenImage','ABIL_ABVS','actorType','sourceJsonToAbv','exec','TASK_EXIT_COMPLETE','darkvision','tokenBarDisplay','setFirstSection','_pImportEntry_pFillItems','TASK_EXIT_SKIPPED_DUPLICATE','_getBiographyValue','some','_actorType','add','getAbilityModNumber','abs','find','isOverwrite','name','intToBonus','\x22\x20did\x20not\x20match\x20an\x20expected\x20modifier/proficiency\x20amount!\x20A\x20fallback\x20value\x20(\x22','map','entries','type','monCondImmToFull','slashing','bludgeoning','postItemItemUpdates','pGetCompendiumImage','note','immune','blindsight','icons/svg/mystery-man.svg','getCleanEntityName','data','_pack','_pImportEntry_pHandlePostItemItemUpdates','OwnedItem','\x22\x20bonus\x20\x22','tokenBar1Attribute','VALID_CONDITIONS','isDataOnly','updateEntity','monImmResToFull','proficient','getNameWithSourcePart','tokenNameDisplay','deleteEmbeddedEntity','_pImportEntry_fillData_Abilities','source','forEach','resist','join','_pImportEntry_pFillBase_pGetCompendiumImage','_SET_PHYSICAL_DAMAGE','conditionImmune','section','_pImportEntry_getTokenImage','TASK_EXIT_COMPLETE_DATA_ONLY','token','hasTokenUrl','vulnerable','toLowerCase','_pImportEntry_pFillBase','_actor','_pImportEntry_pGetImportMetadata','isTemp','save','abilities','size','isUseTokenImageAsPortrait'];(function(_0x320088,_0x436081){const _0x9be88a=function(_0x734c0d){while(--_0x734c0d){_0x320088['push'](_0x320088['shift']());}};_0x9be88a(++_0x436081);}(_0x4360,0xa2));const _0x9be8=function(_0x320088,_0x436081){_0x320088=_0x320088-0x0;let _0x9be88a=_0x4360[_0x320088];return _0x9be88a;};const _0x203e4d=_0x9be8;import{ImportList}from'./ImportList.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Consts}from'./Consts.js';class ImportListActor extends ImportList{constructor(_0x734c0d,_0x3336e6,_0x364072,_0x317255){const _0x51b244=_0x9be8;super(_0x734c0d,_0x3336e6,_0x364072),this[_0x51b244('0x64')]=_0x317255[_0x51b244('0x59')];}async[_0x203e4d('0x42')](_0x52b943,_0x162711){const _0x45b135=_0x203e4d;_0x162711=_0x162711||{},console[_0x45b135('0x35')](...LGT,'Importing\x20'+this['_actorType']+'\x20\x22'+_0x52b943[_0x45b135('0x6a')]+'\x22\x20(from\x20\x22'+Parser[_0x45b135('0x5a')](_0x52b943['source'])+'\x22)');if(this[_0x45b135('0x2d')])throw new Error(_0x45b135('0x3e')+this['_actorType']+_0x45b135('0x34'));let _0x557b42;const _0x5cd7ce=this['_getDuplicateMeta']({'entity':_0x52b943});if(_0x5cd7ce[_0x45b135('0x3b')])return{'status':UtilApplications[_0x45b135('0x61')]};else{if(_0x5cd7ce[_0x45b135('0x69')])_0x557b42=_0x5cd7ce[_0x45b135('0x49')];else _0x557b42=this[_0x45b135('0x10')]?null:await Actor[_0x45b135('0x46')]({'name':Consts[_0x45b135('0x39')],'type':this[_0x45b135('0x64')]},{'renderSheet':!!_0x162711[_0x45b135('0x2f')],'temporary':!!_0x162711[_0x45b135('0x2f')]});}const {dataBuilderOpts:_0x169d7b,actorData:_0x4d72dc}=await this['_pImportEntry_pGetImportMetadata'](_0x557b42,_0x52b943,_0x162711);if(_0x162711['isTemp'])return _0x557b42=await Actor[_0x45b135('0x46')]({..._0x4d72dc,'type':this[_0x45b135('0x64')]},{'renderSheet':!_0x162711[_0x45b135('0x16')],'temporary':!![]}),_0x169d7b[_0x45b135('0x4a')]=_0x557b42,await this[_0x45b135('0x60')](_0x52b943,_0x4d72dc,_0x169d7b,_0x162711),await this[_0x45b135('0x11')](_0x557b42,_0x162711,_0x169d7b),_0x162711[_0x45b135('0x16')]?{'imported':_0x557b42,'status':UtilApplications[_0x45b135('0x27')]}:{'imported':_0x557b42,'status':UtilApplications[_0x45b135('0x5c')]};else{if(this['_pack']){if(_0x5cd7ce[_0x45b135('0x69')]){_0x169d7b['actor']=_0x557b42,Object[_0x45b135('0x48')](_0x557b42[_0x45b135('0xf')],_0x4d72dc),_0x557b42[_0x45b135('0xf')]['items']=[],await this[_0x45b135('0x60')](_0x52b943,_0x4d72dc,_0x169d7b,_0x162711);const _0x185a3c=await this[_0x45b135('0x10')][_0x45b135('0x17')](MiscUtil[_0x45b135('0x36')](_0x557b42[_0x45b135('0xf')]));return await this[_0x45b135('0x11')](_0x185a3c,_0x162711,_0x169d7b),{'imported':_0x557b42,'status':UtilApplications['TASK_EXIT_COMPLETE']};}else{_0x557b42=await Actor[_0x45b135('0x46')]({..._0x4d72dc,'type':this[_0x45b135('0x64')]},{'temporary':!![]}),_0x169d7b[_0x45b135('0x4a')]=_0x557b42,await this[_0x45b135('0x60')](_0x52b943,_0x4d72dc,_0x169d7b,_0x162711);if(_0x557b42[_0x45b135('0x44')])_0x557b42[_0x45b135('0x44')]=MiscUtil[_0x45b135('0x36')](_0x557b42[_0x45b135('0xf')]);const _0x59e264=await this[_0x45b135('0x10')][_0x45b135('0x4c')](_0x557b42);await this[_0x45b135('0x11')](_0x59e264,_0x162711,_0x169d7b);}return{'imported':_0x557b42,'status':UtilApplications['TASK_EXIT_COMPLETE']};}else{if(_0x5cd7ce[_0x45b135('0x69')])await _0x557b42[_0x45b135('0x1c')](_0x45b135('0x12'),_0x557b42[_0x45b135('0xf')]['items'][_0x45b135('0x2')](_0x30602f=>_0x30602f['id']||_0x30602f['_id']));return await this[_0x45b135('0x60')](_0x52b943,_0x4d72dc,_0x169d7b,_0x162711),await _0x557b42[_0x45b135('0x3d')](_0x4d72dc),await game['actors']['insert'](_0x557b42),await this[_0x45b135('0x11')](_0x557b42,_0x162711,_0x169d7b),{'imported':_0x557b42,'status':UtilApplications[_0x45b135('0x5c')]};}}}async[_0x203e4d('0x11')](_0xae577b,_0x1af462,_0x1b0452){const _0x477174=_0x203e4d;if(_0x1b0452[_0x477174('0x8')])for(const _0x5b72b2 of _0x1b0452[_0x477174('0x8')]){await _0x5b72b2({'actor':_0xae577b,'isTemp':_0x1af462[_0x477174('0x2f')],'isPack':this[_0x477174('0x10')]!=null,'pack':this[_0x477174('0x10')]});}}[_0x203e4d('0x2e')](){const _0xf6c5bd=_0x203e4d;throw new Error(_0xf6c5bd('0x43'));}[_0x203e4d('0x60')](){throw new Error('Unimplemented!');}[_0x203e4d('0x57')](_0x1416dc){const _0x24223d=_0x203e4d;return this['_props'][_0x24223d('0x63')](_0x443730=>Vetools[_0x24223d('0x29')](_0x443730,_0x1416dc));}[_0x203e4d('0x26')](_0x86f041){const _0x45732e=_0x203e4d,_0x1f73b2=this[_0x45732e('0x47')][_0x45732e('0x68')](_0x12739b=>Vetools['hasTokenUrl'](_0x12739b,_0x86f041));if(_0x1f73b2)return Vetools[_0x45732e('0x4d')](_0x1f73b2,_0x86f041);return _0x45732e('0xd');}async[_0x203e4d('0x2c')](_0x57fb91,_0xbbbc9c,_0x2f1112,_0x4956a1){const _0x1ba60f=_0x203e4d;_0x4956a1=_0x4956a1||{},_0xbbbc9c['name']=DataConverter[_0x1ba60f('0x1a')](_0x57fb91);let _0x2c567f=_0x4956a1[_0x1ba60f('0x33')]?null:Vetools[_0x1ba60f('0x4e')](_0x2f1112);if(!_0x2c567f){if(this[_0x1ba60f('0x57')](_0x57fb91))_0x2c567f=this[_0x1ba60f('0x26')](_0x57fb91);else{const _0x5d17f2=await this[_0x1ba60f('0x22')](_0x57fb91);if(_0x5d17f2)_0x2c567f=_0x5d17f2;else _0x2c567f=this[_0x1ba60f('0x26')](_0x57fb91);}}_0xbbbc9c['img']=_0x2c567f,_0xbbbc9c[_0x1ba60f('0x4')]=this['_actorType'];}async[_0x203e4d('0x22')](_0x5c3149){const _0x19e48e=_0x203e4d;for(const _0x447250 of this[_0x19e48e('0x47')]){const _0xb88eb8=await DataConverter[_0x19e48e('0x9')](_0x447250,_0x5c3149);if(_0xb88eb8&&!_0xb88eb8[_0x19e48e('0x2b')]()[_0x19e48e('0x4f')]('mystery-man.svg'))return _0xb88eb8;}return null;}async['_pImportEntry_pFillToken'](_0x45e7c6,_0x340d07,_0x42dc7d){const _0x501905=_0x203e4d;let _0x297c63=0x1;switch(_0x45e7c6[_0x501905('0x32')]||'M'){case'T':_0x297c63=0.5;break;case'L':_0x297c63=0x2;break;case'H':_0x297c63=0x3;break;case'G':_0x297c63=0x4;break;}let _0x35b72c=0x0,_0xa4f097=0x0;(_0x45e7c6[_0x501905('0x50')]||[])[_0x501905('0x1f')](_0x1f0281=>{const _0x379386=_0x501905,_0x3fce44=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i[_0x379386('0x5b')](_0x1f0281);if(_0x3fce44){const _0x4e6eb0=Number(_0x3fce44[0x2]);switch(_0x3fce44[0x1]){case _0x379386('0x5d'):_0x35b72c=Math[_0x379386('0x53')](_0x35b72c,_0x4e6eb0);break;case _0x379386('0xc'):case'tremorsense':case'truesight':_0xa4f097=Math[_0x379386('0x53')](_0xa4f097,_0x4e6eb0);break;}}}),_0x340d07[_0x501905('0x28')]={'displayName':Config[_0x501905('0x38')](_0x42dc7d,_0x501905('0x1b')),'name':UtilApplications[_0x501905('0xe')](_0x45e7c6[_0x501905('0x54')]||_0x45e7c6[_0x501905('0x6a')]),'img':this[_0x501905('0x26')](_0x45e7c6),'width':_0x297c63,'height':_0x297c63,'scale':0x1,'elevation':0x0,'lockRotation':![],'rotation':0x0,'vision':Config[_0x501905('0x38')](_0x42dc7d,_0x501905('0x45')),'dimSight':_0x35b72c,'brightSight':_0xa4f097,'dimLight':0x0,'brightLight':0x0,'sightAngle':0x168,'lightAngle':0x168,'actorLink':![],'actorData':{},'disposition':Config[_0x501905('0x38')](_0x42dc7d,'tokenDisposition'),'displayBars':Config[_0x501905('0x38')](_0x42dc7d,_0x501905('0x5e')),'bar1':{'attribute':Config[_0x501905('0x38')](_0x42dc7d,_0x501905('0x14'))},'bar2':{'attribute':Config['get'](_0x42dc7d,'tokenBar2Attribute')},'flags':{},'effects':[],'randomImg':![]};}[_0x203e4d('0x1d')](_0x2bc66a,_0x116891,_0x2cba80){const _0x5c008c=_0x203e4d,_0x9a045={};Parser[_0x5c008c('0x58')][_0x5c008c('0x1f')](_0x2f4f58=>{const _0x3fcdb8=_0x5c008c;let _0x37ccb6=0x0;const _0x49b527=Parser[_0x3fcdb8('0x66')](_0x2bc66a[_0x2f4f58]);if(_0x2bc66a[_0x3fcdb8('0x30')]&&_0x2bc66a[_0x3fcdb8('0x30')][_0x2f4f58]){const _0x54f9e3=Number(_0x2bc66a[_0x3fcdb8('0x30')][_0x2f4f58]);if(!isNaN(_0x54f9e3)){const _0x56a4c2=Parser['getAbilityModNumber'](_0x2bc66a[_0x2f4f58]),_0xde379=_0x56a4c2+(_0x2cba80['assumedPb']||_0x2cba80['pb']),_0x4f126f=_0x56a4c2+0x2*(_0x2cba80['assumedPb']||_0x2cba80['pb']);if(_0xde379===_0x54f9e3)_0x37ccb6=0x1;else{if(_0x4f126f===_0x54f9e3)_0x37ccb6=0x2;else{const _0x37d4fc=Math[_0x3fcdb8('0x67')](_0x54f9e3-_0xde379),_0x166cc3=Math[_0x3fcdb8('0x67')](_0x54f9e3-_0x4f126f);if(_0x37d4fc<_0x166cc3)_0x37ccb6=0x1;else _0x37ccb6=0x2;const _0x1400c1=_0x37ccb6===0x2?_0x4f126f:_0xde379;console[_0x3fcdb8('0x40')](...LGT,'Creature\x20\x22'+_0x2bc66a[_0x3fcdb8('0x6a')]+'\x22\x20('+_0x2bc66a[_0x3fcdb8('0x1e')]+_0x3fcdb8('0x56')+_0x2f4f58+_0x3fcdb8('0x13')+_0x2bc66a[_0x3fcdb8('0x30')][_0x2f4f58]+_0x3fcdb8('0x1')+(_0x37ccb6===0x2?'expert':_0x3fcdb8('0x19'))+_0x3fcdb8('0x37')+UiUtil[_0x3fcdb8('0x0')](_0x1400c1)+'\x22)\x20will\x20be\x20used.');}}}}_0x9a045[_0x2f4f58]={'value':_0x2bc66a[_0x2f4f58],'proficient':_0x37ccb6,'mod':_0x49b527};}),_0x116891[_0x5c008c('0x31')]=_0x9a045;}[_0x203e4d('0x62')](_0x2f442c){const _0x1e8e8d=_0x203e4d;if(!_0x2f442c||!_0x2f442c['entries'])return'';const _0xf6f10a=_0x2f442c['type']==='section'?-0x1:0x2;if(_0x2f442c[_0x1e8e8d('0x4')]!==_0x1e8e8d('0x25'))Renderer[_0x1e8e8d('0x38')]()[_0x1e8e8d('0x5f')](![]);return Renderer[_0x1e8e8d('0x38')]()[_0x1e8e8d('0x5f')](!![])['render']({'type':_0x2f442c['type'],'entries':_0x2f442c[_0x1e8e8d('0x3')]},_0xf6f10a);}[_0x203e4d('0x52')](_0x104a03,_0x34fcfb){const _0x454d86=_0x203e4d,_0x1ad31e=(_0x2b1af8,_0x1d7d90,_0x124f86,_0x5d439c,_0x4b7d95)=>{const _0x3cb89e=_0x9be8;if(!_0x104a03[_0x124f86])return;_0x104a03[_0x124f86][_0x3cb89e('0x1f')](_0x57f60b=>{const _0x1a40cf=_0x3cb89e;if(_0x2b1af8[_0x1a40cf('0x4f')](_0x57f60b))_0x5d439c[_0x1a40cf('0x65')](_0x57f60b);else{if(ImportListActor[_0x1a40cf('0x3a')][_0x1a40cf('0x3f')](_0x124f86)&&_0x57f60b[_0x124f86]&&_0x57f60b[_0x124f86]instanceof Array&&CollectionUtil['setEq'](new Set(_0x57f60b[_0x124f86]),ImportListActor['_SET_PHYSICAL_DAMAGE'])&&_0x57f60b[_0x1a40cf('0xa')]&&_0x57f60b['cond'])_0x5d439c[_0x1a40cf('0x65')](_0x1a40cf('0x4b'));else{const _0x5260a7=_0x1d7d90([_0x57f60b]);_0x5d439c['add'](_0x1a40cf('0x3c')),_0x4b7d95[_0x1a40cf('0x55')](_0x5260a7);}}});},_0x21a93e=new Set();let _0x24e49e=[];_0x1ad31e(UtilActors['VALID_DAMAGE_TYPES'],Parser[_0x454d86('0x18')],_0x454d86('0xb'),_0x21a93e,_0x24e49e),_0x34fcfb['di']={'value':[..._0x21a93e],'custom':_0x24e49e[_0x454d86('0x21')](',\x20')};const _0x40b093=new Set();let _0xd4075c=[];_0x1ad31e(UtilActors[_0x454d86('0x41')],Parser['monImmResToFull'],'resist',_0x40b093,_0xd4075c),_0x34fcfb['dr']={'value':[..._0x40b093],'custom':_0xd4075c[_0x454d86('0x21')](',\x20')};const _0x409672=new Set();let _0x1e43ce=[];_0x1ad31e(UtilActors[_0x454d86('0x41')],Parser[_0x454d86('0x18')],_0x454d86('0x2a'),_0x409672,_0x1e43ce),_0x34fcfb['dv']={'value':[..._0x409672],'custom':_0x1e43ce[_0x454d86('0x21')](',\x20')};const _0x8584bc=new Set();let _0x24d4e2=[];_0x1ad31e(UtilActors[_0x454d86('0x15')],_0x34b136=>Parser[_0x454d86('0x5')](_0x34b136,!![]),_0x454d86('0x24'),_0x8584bc,_0x24d4e2),_0x34fcfb['ci']={'value':[..._0x8584bc],'custom':_0x24d4e2[_0x454d86('0x21')](',\x20')};}}ImportListActor[_0x203e4d('0x3a')]=new Set(['immune',_0x203e4d('0x20'),'vulnerable']),ImportListActor[_0x203e4d('0x23')]=new Set([_0x203e4d('0x7'),_0x203e4d('0x51'),_0x203e4d('0x6')]);export{ImportListActor};