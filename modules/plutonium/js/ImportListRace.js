const _0x1a0d=['doHookSpellLinkRender','some','burrow','5etools','length','SOURCE_TYP_OFFICIAL_ALL','pGetRaceItem','Halfling','_pImportEntry_pFillTraits','languages','mutateForFilters','link','log','asTextShort','pFillActorVulnerabilityData','pFillItemArrayAdditionalSpells','_activateListeners_absorbListItems','sourceLong','isTemp','Powerful\x20Build','5etools-races','dimSight','push','speed','init','text-center','mergeSubraces','skillProficiencies','DataSourceFile','level','SOURCE_TYP_CUSTOM','_pImportEntry_pImportToDirectoryGeneric','sourceClassName','race','_vSize','isToken','pGetRaces','DataSourceUrl','source','pGetRaceFeatureItem','TASK_EXIT_COMPLETE','name','Size','isStreamerMode','_pPostLoad','_isRadio','Custom\x20URL','absorbFnBindListeners','Ability','sourceJsonToAbv','sizeAbvToFull','pGetHomebrewSources','update','\x22\x20(from\x20\x22','Upload\x20File','sourceJsonToFull','token','conditionImmune','removeHook','_actor','_pImportEntry_pImportToActor','data','copy','size','isSpeedHover','keys','_pImportEntry_pFillSkills','getSpeedValue','floor','\x20ft.','getData','_vAbility','dnd5e','Source','value','Darkvision\x20','ele','subrace','get','SRD','_titleSearch','darkvision','traits','_pImportEntry_fillAttributes','SOURCE_TYP_BREW','savageAttacks','senses','adoptSubraces','getSpeedString','_isPreviewable','_pImportEntry_pFillAbilities','URL_TO_HASH_BUILDER','details','climb','toolProf','Import\x20Races','_pageFilter','join','pFillActorConditionImmunityData','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','toolProficiencies','_content','TASK_EXIT_CANCELLED','items','swim','walk','_pImportEntry_fillToken','pGetSources','traitTags','_list','pAddActorItems','attributes','Lucky','DataSourceSpecial','_pImportEntry_pFillItems','sourceJsonToColor','vulnerable','_baseName','Item','PG_RACES','ability','powerfulBuild','srd','doAbsorbItems','races','vision','Savage\x20Attacks','_pImportEntry_fillFlags','entries','flags','None','movement','isCancelled','string'];(function(_0x5d0c51,_0x1a0da4){const _0x4a5fbb=function(_0x175edc){while(--_0x175edc){_0x5d0c51['push'](_0x5d0c51['shift']());}};_0x4a5fbb(++_0x1a0da4);}(_0x1a0d,0x1bc));const _0x4a5f=function(_0x5d0c51,_0x1a0da4){_0x5d0c51=_0x5d0c51-0x0;let _0x4a5fbb=_0x1a0d[_0x5d0c51];return _0x4a5fbb;};const _0x198245=_0x4a5f;import{ImportList}from'./ImportList.js';import{LGT}from'./Util.js';import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{DataConverterRace}from'./DataConverterRace.js';import{UtilApplications}from'./UtilApplications.js';class ImportListRace extends ImportList{static[_0x198245('0x74')](){const _0x4b01a3=_0x198245;this['_initCreateSheetItemHook']({'prop':_0x4b01a3('0x7d'),'importerName':'Race'});}constructor(_0x175edc){const _0x39065e=_0x198245;_0x175edc=_0x175edc||{},super({'title':_0x39065e('0x35')},_0x175edc,{'props':['race'],'titleSearch':_0x39065e('0x52'),'sidebarTab':'items','gameProp':_0x39065e('0x3d'),'defaultFolderPath':['Races'],'folderType':_0x39065e('0x4c'),'pageFilter':new PageFilterRaces(),'isActorRadio':!![],'page':UrlUtil[_0x39065e('0x4d')],'isPreviewable':!![],'isDedupable':!![]});}async[_0x198245('0x2')](_0x639e9a,_0x8ea52){const _0x4287ca=_0x198245,_0xe32961=[];if(_0x8ea52['race'])_0xe32961[_0x4287ca('0x72')](...Renderer['race'][_0x4287ca('0x76')](_0x8ea52[_0x4287ca('0x7d')],{'isAddBaseRaces':!![]}));if(_0x8ea52['subrace']){const _0x2ad748=(await Vetools[_0x4287ca('0x80')]({'isAddBaseRaces':!![]}))['race'];_0x2ad748['forEach'](_0x4d6227=>this[_0x4287ca('0x36')][_0x4287ca('0x66')](_0x4d6227));const _0x3a4edb=Renderer[_0x4287ca('0x7d')][_0x4287ca('0x2d')](_0x2ad748,_0x8ea52[_0x4287ca('0x23')]),_0x9cad1=Renderer[_0x4287ca('0x7d')][_0x4287ca('0x76')](_0x3a4edb);_0xe32961[_0x4287ca('0x72')](..._0x9cad1);}return _0xe32961;}async[_0x198245('0x41')](){const _0x393993=_0x198245,_0x51a348={'pPostLoad':this[_0x393993('0x2')]['bind'](this)};return[new ImportList[(_0x393993('0x47'))](Config['get']('ui',_0x393993('0x1'))?_0x393993('0x25'):_0x393993('0x5f'),async()=>(await Vetools['pGetRaces']())[_0x393993('0x7d')],{'cacheKey':_0x393993('0x70'),'filterTypes':[ImportList[_0x393993('0x61')]],'isDefault':!![]}),new ImportList[(_0x393993('0x81'))](_0x393993('0x4'),'',{..._0x51a348,'filterTypes':[ImportList[_0x393993('0x7a')]]}),new ImportList[(_0x393993('0x78'))](_0x393993('0xc'),{..._0x51a348,'filterTypes':[ImportList[_0x393993('0x7a')]]}),...(await Vetools[_0x393993('0x9')]('race',_0x393993('0x23')))['map'](({name:_0x5d353b,url:_0x5dffc3})=>new ImportList[(_0x393993('0x81'))](_0x5d353b,_0x5dffc3,{..._0x51a348,'filterTypes':[ImportList[_0x393993('0x2a')]]}))];}[_0x198245('0x1c')](){const _0x43aecc=_0x198245;return{'isRadio':this[_0x43aecc('0x3')],'isPreviewable':this[_0x43aecc('0x2f')],'titleButtonRun':this['_titleButtonRun'],'titleSearch':this[_0x43aecc('0x26')],'cols':[{'name':'Name','width':0x4,'field':_0x43aecc('0x85')},{'name':_0x43aecc('0x6'),'width':0x5,'field':_0x43aecc('0x4e')},{'name':_0x43aecc('0x0'),'width':0x1,'field':_0x43aecc('0x15')},{'name':_0x43aecc('0x1f'),'width':0x1,'field':_0x43aecc('0x82'),'titleProp':_0x43aecc('0x6d'),'displayProp':'sourceShort','classNameProp':_0x43aecc('0x7c'),'rowClassName':_0x43aecc('0x75')}],'rows':this['_content']['map']((_0x546a53,_0x1d0f81)=>{const _0x276fc8=_0x43aecc;return this[_0x276fc8('0x36')][_0x276fc8('0x66')](_0x546a53),_0x546a53[_0x276fc8('0x1d')]=_0x546a53[_0x276fc8('0x4e')]?Renderer['getAbilityData'](_0x546a53[_0x276fc8('0x4e')])[_0x276fc8('0x69')]:_0x276fc8('0x58'),_0x546a53[_0x276fc8('0x7e')]=Parser[_0x276fc8('0x8')](_0x546a53[_0x276fc8('0x15')]||SZ_VARIES),{'name':_0x546a53[_0x276fc8('0x85')],'ability':_0x546a53['_vAbility'],'size':_0x546a53[_0x276fc8('0x7e')],'source':_0x546a53[_0x276fc8('0x82')],'sourceShort':Parser[_0x276fc8('0x7')](_0x546a53[_0x276fc8('0x82')]),'sourceLong':Parser[_0x276fc8('0xd')](_0x546a53[_0x276fc8('0x82')]),'sourceClassName':Parser[_0x276fc8('0x49')](_0x546a53['source']),'ix':_0x1d0f81};})};}[_0x198245('0x6c')](){const _0x4773e3=_0x198245;this[_0x4773e3('0x43')][_0x4773e3('0x51')](this[_0x4773e3('0x3b')],{'fnGetName':_0x55c758=>_0x55c758['name'],'fnGetValues':_0x22f136=>({'source':_0x22f136['source'],'ability':_0x22f136[_0x4773e3('0x1d')],'size':_0x22f136[_0x4773e3('0x7e')],'hash':UrlUtil[_0x4773e3('0x31')][this['_page']](_0x22f136)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x1c16d6=>this[_0x4773e3('0x3')]?UtilList2['absorbFnBindListenersRadio'](this[_0x4773e3('0x43')],_0x1c16d6):UtilList2[_0x4773e3('0x5')](this[_0x4773e3('0x43')],_0x1c16d6)});}async['pImportEntry'](_0xd0d36b,_0x4cd6ab){const _0x24b218=_0x198245;_0x4cd6ab=_0x4cd6ab||{},console[_0x24b218('0x68')](...LGT,'Importing\x20race\x20\x22'+_0xd0d36b['name']+_0x24b218('0xb')+Parser[_0x24b218('0x7')](_0xd0d36b['source'])+'\x22)');if(_0x4cd6ab[_0x24b218('0x6e')])return this[_0x24b218('0x7b')](_0xd0d36b,_0x4cd6ab);else{if(this[_0x24b218('0x11')])return this[_0x24b218('0x12')](_0xd0d36b,_0x4cd6ab);else return this['_pImportEntry_pImportToDirectoryGeneric'](_0xd0d36b,_0x4cd6ab);}}async['_pImportEntry_pImportToActor'](_0x5b73d8,_0xe6aa42){const _0x49f767=_0x198245,_0x1549c3={'data':{'details':{'race':_0x5b73d8[_0x49f767('0x85')]}},'token':{}},_0x19ca7=MiscUtil[_0x49f767('0x24')](this[_0x49f767('0x11')],_0x49f767('0x13'),_0x49f767('0x13'),_0x49f767('0x32'),_0x49f767('0x79'),_0x49f767('0x20'))||0x1,_0x3f8ea0={'pb':Math[_0x49f767('0x1a')]((_0x19ca7-0x1)/0x4)+0x2,'isCancelled':![]};this[_0x49f767('0x55')](_0x5b73d8,_0x1549c3,_0x3f8ea0),await this[_0x49f767('0x30')](_0x5b73d8,_0x1549c3[_0x49f767('0x13')],_0x3f8ea0);if(_0x3f8ea0[_0x49f767('0x5a')])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};this[_0x49f767('0x29')](_0x5b73d8,_0x1549c3[_0x49f767('0x13')],_0x3f8ea0),await this[_0x49f767('0x18')](_0x5b73d8,_0x1549c3['data'],_0x3f8ea0);if(_0x3f8ea0['isCancelled'])return{'status':UtilApplications[_0x49f767('0x3c')]};await this[_0x49f767('0x64')](_0x5b73d8,_0x1549c3[_0x49f767('0x13')],_0x3f8ea0);if(_0x3f8ea0[_0x49f767('0x5a')])return{'status':UtilApplications[_0x49f767('0x3c')]};await this[_0x49f767('0x40')](_0x5b73d8,_0x1549c3[_0x49f767('0xe')],_0x3f8ea0);if(_0x3f8ea0[_0x49f767('0x5a')])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};await this[_0x49f767('0x48')](_0x5b73d8,_0x1549c3,_0x3f8ea0);if(_0x3f8ea0[_0x49f767('0x5a')])return{'status':UtilApplications[_0x49f767('0x3c')]};this['_actor'][_0x49f767('0xa')](_0x1549c3);if(this[_0x49f767('0x11')][_0x49f767('0x7f')])this[_0x49f767('0x11')]['sheet']['render']();return{'imported':{'name':_0x5b73d8[_0x49f767('0x85')],'actor':this[_0x49f767('0x11')]},'status':UtilApplications[_0x49f767('0x84')]};}[_0x198245('0x39')](_0x57d6a7,_0x2ea293){const _0x4ff07c=_0x198245;return DataConverterRace[_0x4ff07c('0x62')](_0x57d6a7,_0x2ea293);}[_0x198245('0x55')](_0xf01c41,_0x3a8552,_0x5f38a9){const _0x5d75fb=_0x198245,_0x4dc40e={},_0x6445a5={},_0x2860e1=_0xf01c41[_0x5d75fb('0x42')]&&_0xf01c41['traitTags']['includes'](_0x5d75fb('0x6f'))||_0xf01c41[_0x5d75fb('0x56')][_0x5d75fb('0x5d')](_0x34ce00=>_0x34ce00[_0x5d75fb('0x85')]==='Powerful\x20Build');if(_0x2860e1)_0x6445a5[_0x5d75fb('0x4f')]=!![];if(_0xf01c41[_0x5d75fb('0x56')][_0x5d75fb('0x5d')](_0x2bf606=>_0x2bf606[_0x5d75fb('0x85')]===_0x5d75fb('0x54')))_0x6445a5[_0x5d75fb('0x2b')]=!![];if(_0xf01c41[_0x5d75fb('0x56')][_0x5d75fb('0x5d')](_0x1c13a3=>_0x1c13a3[_0x5d75fb('0x85')]===_0x5d75fb('0x46'))&&_0xf01c41[_0x5d75fb('0x4b')]===_0x5d75fb('0x63'))_0x6445a5['halflingLucky']=!![];if(Object[_0x5d75fb('0x17')](_0x6445a5)[_0x5d75fb('0x60')])_0x4dc40e[_0x5d75fb('0x1e')]=_0x6445a5;if(Object[_0x5d75fb('0x17')](_0x4dc40e)[_0x5d75fb('0x60')])_0x3a8552[_0x5d75fb('0x57')]=_0x4dc40e;}async[_0x198245('0x30')](_0x3b4b11,_0x553d56,_0x32765c){const _0x16118d=_0x198245;await DataConverter['pFillActorAbilityData'](this[_0x16118d('0x11')],_0x3b4b11[_0x16118d('0x4e')],_0x553d56,_0x32765c);}[_0x198245('0x29')](_0x4e34d5,_0x124283,_0x4a89ee){const _0x2f80cd=_0x198245,_0x126155={};if(_0x4e34d5[_0x2f80cd('0x73')]){const _0x2fc3e7=Parser[_0x2f80cd('0x2e')](_0x4e34d5),[_0x524466,..._0x177fc1]=_0x2fc3e7['split'](',\x20');_0x126155[_0x2f80cd('0x73')]={'value':_0x524466,'special':_0x177fc1[_0x2f80cd('0x37')](',\x20')},_0x126155[_0x2f80cd('0x59')]={'burrow':DataConverter[_0x2f80cd('0x19')](_0x4e34d5[_0x2f80cd('0x73')],_0x2f80cd('0x5e')),'climb':DataConverter['getSpeedValue'](_0x4e34d5[_0x2f80cd('0x73')],_0x2f80cd('0x33')),'fly':DataConverter[_0x2f80cd('0x19')](_0x4e34d5['speed'],'fly'),'swim':DataConverter['getSpeedValue'](_0x4e34d5[_0x2f80cd('0x73')],_0x2f80cd('0x3e')),'walk':DataConverter[_0x2f80cd('0x19')](_0x4e34d5['speed'],_0x2f80cd('0x3f')),'units':'ft','hover':DataConverter[_0x2f80cd('0x16')](_0x4e34d5[_0x2f80cd('0x73')])};}_0x124283[_0x2f80cd('0x45')]=_0x126155;}async['_pImportEntry_pFillSkills'](_0x1da837,_0x4aab5d,_0x3c8800){const _0xdb919d=_0x198245;await DataConverter['pFillActorSkillData'](MiscUtil[_0xdb919d('0x24')](this[_0xdb919d('0x11')],_0xdb919d('0x13'),_0xdb919d('0x13'),'skills'),_0x1da837[_0xdb919d('0x77')],_0x4aab5d,_0x3c8800);}async[_0x198245('0x64')](_0x40db46,_0x28a4e9,_0xc1881){const _0x1cbaf6=_0x198245,_0x4d1107={};_0x4d1107[_0x1cbaf6('0x15')]=UtilActors['VET_SIZE_TO_ABV'][_0x40db46[_0x1cbaf6('0x15')]]||'med';if(_0x40db46[_0x1cbaf6('0x27')])_0x4d1107[_0x1cbaf6('0x2c')]=_0x1cbaf6('0x21')+_0x40db46[_0x1cbaf6('0x27')]+_0x1cbaf6('0x1b');_0x28a4e9[_0x1cbaf6('0x28')]=_0x4d1107,await DataConverter['pFillActorLanguageData'](MiscUtil[_0x1cbaf6('0x24')](this[_0x1cbaf6('0x11')],_0x1cbaf6('0x13'),_0x1cbaf6('0x13'),_0x1cbaf6('0x28'),_0x1cbaf6('0x65')),_0x40db46['languageProficiencies'],_0x28a4e9,_0xc1881);if(_0xc1881[_0x1cbaf6('0x5a')])return;await DataConverter['pFillActorToolData'](MiscUtil[_0x1cbaf6('0x24')](this[_0x1cbaf6('0x11')],_0x1cbaf6('0x13'),'data',_0x1cbaf6('0x28'),_0x1cbaf6('0x34')),_0x40db46[_0x1cbaf6('0x3a')],_0x28a4e9,_0xc1881);if(_0xc1881[_0x1cbaf6('0x5a')])return;await DataConverter['pFillActorImmunityData'](MiscUtil['get'](this[_0x1cbaf6('0x11')],_0x1cbaf6('0x13'),_0x1cbaf6('0x13'),'traits','di'),_0x40db46['immune'],_0x28a4e9,_0xc1881);if(_0xc1881[_0x1cbaf6('0x5a')])return;await DataConverter['pFillActorResistanceData'](MiscUtil[_0x1cbaf6('0x24')](this[_0x1cbaf6('0x11')],_0x1cbaf6('0x13'),_0x1cbaf6('0x13'),_0x1cbaf6('0x28'),'dr'),_0x40db46['resist'],_0x28a4e9,_0xc1881);if(_0xc1881[_0x1cbaf6('0x5a')])return;await DataConverter[_0x1cbaf6('0x6a')](MiscUtil[_0x1cbaf6('0x24')](this[_0x1cbaf6('0x11')],_0x1cbaf6('0x13'),'data','traits','dv'),_0x40db46[_0x1cbaf6('0x4a')],_0x28a4e9,_0xc1881);if(_0xc1881[_0x1cbaf6('0x5a')])return;await DataConverter[_0x1cbaf6('0x38')](MiscUtil[_0x1cbaf6('0x24')](this[_0x1cbaf6('0x11')],'data',_0x1cbaf6('0x13'),'traits','ci'),_0x40db46[_0x1cbaf6('0xf')],_0x28a4e9,_0xc1881);}['_pImportEntry_fillToken'](_0x4135aa,_0x4de360,_0x1f0813){const _0x3a8217=_0x198245;if(_0x4135aa[_0x3a8217('0x27')]){const {dimSight:_0x5d93d8}=this[_0x3a8217('0x11')][_0x3a8217('0x13')][_0x3a8217('0xe')]||{};(!_0x5d93d8||!isNaN(_0x5d93d8)&&Number(_0x5d93d8)<_0x4135aa[_0x3a8217('0x27')])&&(_0x4de360[_0x3a8217('0x71')]=_0x4135aa[_0x3a8217('0x27')],_0x4de360[_0x3a8217('0x53')]=!![]);}}async[_0x198245('0x48')](_0x34b4a8,_0x50aeaf,_0x4f4f1d){const _0x547143=_0x198245;_0x4f4f1d['items']=_0x4f4f1d[_0x547143('0x3d')]||[];const _0x7b5f4b={},_0x4f516a=await UtilActors[_0x547143('0x6b')](this[_0x547143('0x11')],_0x34b4a8['additionalSpells'],{'sourceHintText':_0x34b4a8[_0x547143('0x85')],'hashToIdMap':_0x7b5f4b});_0x4f4f1d['isCancelled']=_0x4f4f1d['isCancelled']||_0x4f516a;const _0x2342a7=DataConverterSpell[_0x547143('0x5c')]['bind'](null,this['_actor']['id'],_0x7b5f4b);Renderer['get']()['addHook'](_0x547143('0x67'),_0x547143('0x22'),_0x2342a7);for(const _0x224638 of _0x34b4a8[_0x547143('0x56')]){if(typeof _0x224638===_0x547143('0x5b'))continue;if(_0x224638['name']==='Size')continue;const _0x193eeb=MiscUtil[_0x547143('0x14')](_0x224638);if(_0x34b4a8[_0x547143('0x50')]||_0x34b4a8['_baseSrd'])_0x193eeb[_0x547143('0x50')]=!![];_0x4f4f1d[_0x547143('0x3d')][_0x547143('0x72')](await DataConverterRace[_0x547143('0x83')](_0x34b4a8,_0x193eeb,{'actor':this[_0x547143('0x11')]}));}Renderer[_0x547143('0x24')]()[_0x547143('0x10')](_0x547143('0x67'),_0x547143('0x22'),_0x2342a7);if(_0x4f4f1d[_0x547143('0x3d')][_0x547143('0x60')])await UtilActors[_0x547143('0x44')](this[_0x547143('0x11')],_0x4f4f1d[_0x547143('0x3d')]);}}export{ImportListRace};