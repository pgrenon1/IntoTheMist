const _0x1b69=['homebrew','HOMEBREW_INDEX','foundryOptionalfeature','DATA_URL_CONDITIONSDISEASES','.json','dice','error','CACHED_REQUESTS','pRollEntry','isNonstandardSource','data/','_pGetHomebrewIndex','slice','get','import','join','book','getJsonSources','link','BASE_SITE_URL','forEach','pGetChangelog','monster','$getHoverContent_generic','init','pGetAllSpells','has','info','baseSiteUrl','item','MIN_Z_INDEX','hasToken','HOMEBREW_COLLECTION_INDEX','getImageUrlFromFluff','hover','loadJSON','content','getBookUrl','sourceJsonToStyle','baseUrl','img','ascSortLower','entries','plutonium.configUpdate','_STORABLE','__prop','full','sourceJsonToAbv','importAdventure','_pGetAdventureBookIndex','flat','data/spells/','data/bestiary/fluff-index.json','pGetOptionalFeatureAdditionalData','pLoadPropIndex','s.json','dirToProp','pGetPackageIndex','data/feats.json','DATA_URL_VARIANTRULES','foundryClassFeature','hasSourceJson','log','includes','bind','addToHomebrewSourceLookup','DATA_URL_OPTIONALFEATURES','data/backgrounds.json','filter','vehicle','href','parse','pGetCreatureIndex','https://5e.tools/','pGetIconLookup','path','spell','getRollableEntryDice','url','adventure','sources','setBaseMediaUrl','legacyDiceToString','rollerClick','setBaseUrl','DATA_URL_BACKGROUNDS','STR_SEE_CONSOLE','getAdventureUrl','doToast','homebrewMeta','getTokenUrl','notifications','Z_INDEX_MAX_FOUNDRY','pGetSpellIndex','data/bestiary/','then','data/optionalfeatures.json','json','copy','withUnpatchedDiceRendering','pGetItems','pGetRaces','images','every','SOURCE_JSON_TO_ABV','_PATCHED_GET_ROLLABLE_ENTRY_DICE','trim','data','icon-','data/conditionsdiseases.json','warning','pAddToHomebrew','abbreviation','isNoLocalData','isUseLocalImages','brew','table','pGetBookIndex','pSet','BESTIARY_FLUFF_INDEX','last','HOMEBREW_META_SOURCES','CACHE_REQUESTS_IN_FLIGHT','all','_PAGE','danger','data/psionics.json','internal','_getTokenUrl','data/changelog.json','tokenUrl','/data/','foundrySpell','length','getCreatureUrl','pGetSpellAdditionalData','special','getSpellUrl','pGet','hasTokenUrl','Failed\x20to\x20load\x20homebrew\x20index!\x20','color','[[/r\x20','toMessage','source','_CACHED_GET_ROLLABLE_ENTRY_DICE','Unhandled\x20entity\x20type\x20\x22','published','keys','DATA_URL_PSIONICS','data/fluff-items.json','pGetAllCreatures','toLowerCase','startsWith','string','name','replace','baseMediaUrls','getContent','map','MODULE_NAME','toRoll','getInternalImageUrl','pGetAdventureIndex','min','warn','split','%27','_getAdventureBookUrl','DATA_URL_VEHICLES','pGetCreatureFluffIndex','loadRawJSON','sort','pLoadAll','cacheKey','BESTIARY_TOKEN_LOOKUP','books.json','pDoHandleBrewJson','sourceJsonToSource','img/blank.png','HOMEBREW_CUSTOM_REPO_URL','RUN_TIME','type','modules/','pGetRollableTables','?t=','_meta','class','pBuildList','_BASE_SITE_URL','options','pGetWithCache','$getHoverContent_stats','prompt','doMonkeyPatch'];(function(_0x3bc7e3,_0x1b69a1){const _0x5d99dc=function(_0xb15e05){while(--_0xb15e05){_0x3bc7e3['push'](_0x3bc7e3['shift']());}};_0x5d99dc(++_0x1b69a1);}(_0x1b69,0x152));const _0x5d99=function(_0x3bc7e3,_0x1b69a1){_0x3bc7e3=_0x3bc7e3-0x0;let _0x5d99dc=_0x1b69[_0x3bc7e3];return _0x5d99dc;};const _0x2cde37=_0x5d99;'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{JqueryExtension}from'./JqueryExtension.js';import{Config}from'./Config.js';import{GameStorage}from'./GameStorage.js';import{LGT}from'./Util.js';class NotAxios{static async[_0x2cde37('0x41')](_0xb15e05){const _0x2a5e37=_0x2cde37;return{'data':await(await fetch(_0xb15e05))[_0x2a5e37('0x95')]()};}}class Vetools{static async['pDoPreload'](){const _0xb090df=_0x2cde37;await Promise[_0xb090df('0xaf')]([Vetools['BESTIARY_FLUFF_INDEX']=await Vetools['pGetCreatureFluffIndex'](),DataUtil[_0xb090df('0x4a')]['pPreloadMeta']()]),Vetools[_0xb090df('0x3f')]()[_0xb090df('0x93')](_0x1247f2=>{const _0x52551e=_0xb090df;Vetools[_0x52551e('0x35')]=_0x1247f2,console[_0x52551e('0x72')](...LGT,'Loaded\x20homebrew\x20index.');})['catch'](_0xeee102=>{const _0x13410d=_0xb090df;Vetools[_0x13410d('0x35')]={},ui[_0x13410d('0x8f')][_0x13410d('0x3a')]('Failed\x20to\x20load\x20homebrew\x20index!\x20'+VeCt[_0x13410d('0x8a')]),setTimeout(()=>{throw _0xeee102;});});}static[_0x2cde37('0x97')](_0x26507c){const _0x57d5cb=_0x2cde37;Renderer[_0x57d5cb('0x81')]=Vetools[_0x57d5cb('0x2')];const _0x5d45e0=_0x26507c();return Renderer[_0x57d5cb('0x81')]=Vetools[_0x57d5cb('0x9d')],_0x5d45e0;}static[_0x2cde37('0x33')](){const _0xe34a10=_0x2cde37;JqueryExtension[_0xe34a10('0x4c')](),StorageUtil[_0xe34a10('0xaa')]=GameStorage['pSetClient']['bind'](GameStorage),StorageUtil[_0xe34a10('0xbe')]=GameStorage['pGetClient'][_0xe34a10('0x74')](GameStorage),Renderer[_0xe34a10('0x41')]()[_0xe34a10('0x88')](Vetools['BASE_SITE_URL']);if(Config[_0xe34a10('0x41')](_0xe34a10('0x42'),_0xe34a10('0xa6')))Renderer[_0xe34a10('0x41')]()[_0xe34a10('0x85')]('img',_0xe34a10('0x28')+SharedConsts[_0xe34a10('0x11')]+'/');Hooks['on'](_0xe34a10('0x5f'),()=>Renderer[_0xe34a10('0x41')]()['setBaseUrl'](Vetools[_0xe34a10('0x47')])),Renderer['hover'][_0xe34a10('0x52')]=Consts[_0xe34a10('0x90')]+0x1,Renderer[_0xe34a10('0x56')]['_MAX_Z_INDEX']=Renderer[_0xe34a10('0x56')][_0xe34a10('0x52')]+0xa,BrewUtil[_0xe34a10('0x34')]={},BrewUtil[_0xe34a10('0x8d')]={'sources':[]},Vetools[_0xe34a10('0x2')]=Renderer[_0xe34a10('0x81')],Vetools['_PATCHED_GET_ROLLABLE_ENTRY_DICE']=(_0x5c77d8,_0x3fd01f,_0x4576cd=!![],_0x50ab87)=>{const _0x4fe57f=_0xe34a10,_0xf46d07=MiscUtil['copy'](_0x5c77d8);typeof _0xf46d07['toRoll']!==_0x4fe57f('0xb')&&(_0xf46d07[_0x4fe57f('0x12')]=Renderer[_0x4fe57f('0x86')](_0xf46d07[_0x4fe57f('0x12')]));if(_0xf46d07[_0x4fe57f('0x32')]){const _0x43c546=Math[_0x4fe57f('0x15')](...Object[_0x4fe57f('0x5')](_0xf46d07['prompt'][_0x4fe57f('0x2f')])[_0x4fe57f('0x10')](_0x13e8d3=>Number(_0x13e8d3))[_0x4fe57f('0x78')](_0xa59981=>_0xf46d07[_0x4fe57f('0x32')]['options'][_0xa59981]));_0xf46d07[_0x4fe57f('0x12')]=_0xf46d07[_0x4fe57f('0x32')][_0x4fe57f('0x2f')][_0x43c546];}const _0x39e283=_0xf46d07[_0x4fe57f('0x12')][_0x4fe57f('0xd')](/#\$.*?\$#/g,'0');return _0x4fe57f('0xc2')+_0x39e283+']]'+(_0x39e283[_0x4fe57f('0x9')]()['trim']()!==_0x50ab87[_0x4fe57f('0x9')]()['trim']()?'\x20('+_0x50ab87+')':'');},Renderer['getRollableEntryDice']=Vetools['_PATCHED_GET_ROLLABLE_ENTRY_DICE'];const _0x3d6a90={},_0x18dd6c=[_0xe34a10('0x31'),'$getHoverContent_fluff','$getHoverContent_statsCode','$getHoverContent_miscCode',_0xe34a10('0x4b')];_0x18dd6c['forEach'](_0x49e4dc=>{const _0x3c19fe=_0xe34a10;_0x3d6a90[_0x49e4dc]=Renderer[_0x3c19fe('0x56')][_0x49e4dc],Renderer['hover'][_0x49e4dc]=(..._0x15e126)=>{const _0x2b6d6e=_0x3c19fe;Renderer[_0x2b6d6e('0x81')]=Vetools[_0x2b6d6e('0x2')];const _0x3770a1=_0x3d6a90[_0x49e4dc](..._0x15e126);return Renderer['getRollableEntryDice']=Vetools[_0x2b6d6e('0x9d')],_0x3770a1;};}),Renderer['dice'][_0xe34a10('0x87')]=(_0xd2d5a0,_0x3796ba,_0xd20c03,_0x3a3967)=>{const _0x2c2b2c=_0xe34a10,_0x2ed81f=JSON[_0x2c2b2c('0x7b')](_0xd20c03);if(_0x2ed81f[_0x2c2b2c('0x12')])new Roll(_0x2ed81f[_0x2c2b2c('0x12')])[_0x2c2b2c('0x0')]();},Renderer[_0xe34a10('0x39')][_0xe34a10('0x3c')]=(_0x13df2d,_0x168c4f,_0x490427)=>{const _0x3f6a51=_0xe34a10;if(_0x13df2d[_0x3f6a51('0x12')])new Roll(_0x13df2d[_0x3f6a51('0x12')])[_0x3f6a51('0x0')]();},JqueryUtil[_0xe34a10('0x8c')]=_0x579aee=>{const _0x359028=_0xe34a10;typeof _0x579aee==='string'&&(_0x579aee={'content':_0x579aee,'type':_0x359028('0x4f')});_0x579aee[_0x359028('0x27')]=_0x579aee[_0x359028('0x27')]||_0x359028('0x4f');switch(_0x579aee[_0x359028('0x27')]){case _0x359028('0xa2'):return ui['notifications'][_0x359028('0x16')](_0x579aee[_0x359028('0x58')]);case _0x359028('0xb1'):return ui[_0x359028('0x8f')][_0x359028('0x3a')](_0x579aee[_0x359028('0x58')]);default:return ui['notifications'][_0x359028('0x4f')](_0x579aee[_0x359028('0x58')]);}},DataUtil[_0xe34a10('0x57')]=async _0x5891c0=>Vetools[_0xe34a10('0x30')](_0x5891c0),BrewUtil[_0xe34a10('0x71')]=_0x2525b7=>!!Vetools[_0xe34a10('0xad')][(_0x2525b7||'')['toLowerCase']()],BrewUtil[_0xe34a10('0x63')]=_0x3c586a=>(Vetools[_0xe34a10('0xad')][(_0x3c586a||'')['toLowerCase']()]||{})[_0xe34a10('0xa4')]||_0x3c586a,BrewUtil['sourceJsonToFull']=_0x1708a5=>(Vetools[_0xe34a10('0xad')][(_0x1708a5||'')[_0xe34a10('0x9')]()]||{})[_0xe34a10('0x62')]||_0x1708a5,BrewUtil[_0xe34a10('0x23')]=_0x442aa8=>Vetools[_0xe34a10('0xad')][(_0x442aa8||'')['toLowerCase']()],BrewUtil[_0xe34a10('0x5a')]=_0x455ca9=>{const _0x2e3bc7=_0xe34a10,_0x1e70f0=(_0x455ca9||'')[_0x2e3bc7('0x9')]();if(Vetools[_0x2e3bc7('0xad')][_0x1e70f0]&&Vetools['HOMEBREW_META_SOURCES'][_0x1e70f0][_0x2e3bc7('0xc1')]){const _0x36129d=BrewUtil['getValidColor'](Vetools[_0x2e3bc7('0xad')][_0x1e70f0]['color']);if(_0x36129d[_0x2e3bc7('0xb9')])return'style=\x22color:\x20#'+_0x36129d+';\x22';return'';}else return'';},BrewUtil[_0xe34a10('0x45')]=()=>Object['values'](Vetools[_0xe34a10('0xad')]),BrewUtil[_0xe34a10('0x60')]=[...BrewUtil[_0xe34a10('0x60')],_0xe34a10('0xb8'),_0xe34a10('0x70'),'foundrySubclassFeature',_0xe34a10('0x36')],BrewUtil[_0xe34a10('0xb0')]=UrlUtil['PG_MANAGE_BREW'],BrewUtil['_pCleanSaveBrew']=()=>{};}static[_0x2cde37('0x75')](_0x4baefe){const _0x6b2dc6=_0x2cde37;_0x4baefe[_0x6b2dc6('0x2b')]&&_0x4baefe['_meta'][_0x6b2dc6('0x84')]&&_0x4baefe['_meta'][_0x6b2dc6('0x84')][_0x6b2dc6('0x48')](_0x118d64=>Vetools[_0x6b2dc6('0xad')][(_0x118d64[_0x6b2dc6('0x95')]||'')['toLowerCase']()]=MiscUtil['copy'](_0x118d64));}static async[_0x2cde37('0xa3')](_0x6feae9){const _0x21e28f=_0x2cde37,_0x4b0138=MiscUtil[_0x21e28f('0x41')](_0x6feae9,'_meta','sources');if(!_0x4b0138||!(_0x4b0138 instanceof Array)||!_0x4b0138[_0x21e28f('0x9b')](_0x5ed9dc=>!Parser[_0x21e28f('0x9c')][_0x5ed9dc[_0x21e28f('0x95')]]))return;await BrewUtil[_0x21e28f('0x22')](_0x6feae9,'NO_PAGE');}static async[_0x2cde37('0x30')](_0x19eb32){const _0x1e1a19=_0x2cde37;if(!_0x19eb32[_0x1e1a19('0x73')]('?'))_0x19eb32=_0x19eb32+_0x1e1a19('0x2a')+Consts[_0x1e1a19('0x26')];const _0x5f2db5=_0x19eb32[_0x1e1a19('0x17')](/(^https?:\/\/)/)[_0x1e1a19('0x78')](Boolean);_0x5f2db5[_0x5f2db5[_0x1e1a19('0xb9')]-0x1]=_0x5f2db5[_0x1e1a19('0xac')]()[_0x1e1a19('0xd')](/\/+/g,'/'),_0x19eb32=_0x5f2db5[_0x1e1a19('0x43')]('');const _0x1bf153=_0x19eb32[_0x1e1a19('0x17')]('?')[0x0];if(Vetools[_0x1e1a19('0xae')][_0x1bf153])return await Vetools[_0x1e1a19('0xae')][_0x1bf153],Vetools[_0x1e1a19('0x3b')][_0x1bf153];return Vetools[_0x1e1a19('0xae')][_0x1bf153]=(async()=>{const _0x4860ca=_0x1e1a19;let _0x253660;if(!Config[_0x4860ca('0x41')]('import',_0x4860ca('0xa5'))&&_0x19eb32[_0x4860ca('0xa')](Vetools[_0x4860ca('0x47')]+_0x4860ca('0x3e'))){const _0x17f2eb=_0x19eb32['split'](Vetools[_0x4860ca('0x47')])[_0x4860ca('0x40')](0x1)[_0x4860ca('0x43')](Vetools[_0x4860ca('0x47')]),_0x63fea8=_0x4860ca('0x28')+SharedConsts['MODULE_NAME']+'/'+_0x17f2eb;_0x253660=(await NotAxios[_0x4860ca('0x41')](_0x63fea8))['data'];}else _0x253660=(await NotAxios[_0x4860ca('0x41')](_0x19eb32))[_0x4860ca('0x9f')];return Vetools[_0x4860ca('0x75')](_0x253660),await Vetools[_0x4860ca('0xa3')](_0x253660),await DataUtil['pDoMetaMerge'](_0x1bf153,_0x253660),Vetools[_0x4860ca('0x3b')][_0x1bf153]=_0x253660;})(),await Vetools['CACHE_REQUESTS_IN_FLIGHT'][_0x1bf153],Vetools['CACHED_REQUESTS'][_0x1bf153];}static async['pLoadImporterSourceSpecial'](_0x372c00){const _0x334126=_0x2cde37;let _0x35a407;if(_0x372c00[_0x334126('0xbc')]['cacheKey'])_0x35a407=Vetools[_0x334126('0x3b')][_0x372c00[_0x334126('0xbc')]['cacheKey']]||(Vetools['CACHED_REQUESTS'][_0x372c00['special'][_0x334126('0x1f')]]=await _0x372c00[_0x334126('0xbc')][_0x334126('0xbe')]());else _0x35a407=await _0x372c00[_0x334126('0xbc')][_0x334126('0xbe')]();return _0x35a407;}static async[_0x2cde37('0x49')](){const _0x5bac1a=_0x2cde37;return Vetools[_0x5bac1a('0x30')](Vetools[_0x5bac1a('0x47')]+_0x5bac1a('0xb5'));}static async[_0x2cde37('0x6d')](){const _0x250a3a=_0x2cde37;return Vetools['pGetWithCache'](Config[_0x250a3a('0x41')](_0x250a3a('0x64'),'indexUrl'));}static async[_0x2cde37('0x91')](){const _0x18598a=_0x2cde37;return Vetools[_0x18598a('0x30')](Vetools[_0x18598a('0x47')]+'data/spells/index.json');}static[_0x2cde37('0xbd')](_0x4d4750){const _0x25a760=_0x2cde37;return Vetools[_0x25a760('0x47')]+_0x25a760('0x67')+_0x4d4750;}static async[_0x2cde37('0x7c')](){return Vetools['pGetWithCache'](Vetools['BASE_SITE_URL']+'data/bestiary/index.json');}static['getCreatureUrl'](_0x1c7dde){const _0x3b30d6=_0x2cde37;return Vetools[_0x3b30d6('0x47')]+_0x3b30d6('0x92')+_0x1c7dde;}static async[_0x2cde37('0x1b')](){const _0x625646=_0x2cde37;return Vetools['pGetWithCache'](Vetools[_0x625646('0x47')]+_0x625646('0x68'));}static async[_0x2cde37('0x98')](_0x46d9d9){const _0x56c06f=_0x2cde37;return{'item':await Renderer[_0x56c06f('0x51')][_0x56c06f('0x2d')]({'isAddGroups':!!_0x46d9d9})};}static async['pGetItemFluff'](){const _0x26d552=_0x2cde37,_0x4e72f6=Vetools[_0x26d552('0x47')]+_0x26d552('0x7');return Vetools[_0x26d552('0x30')](_0x4e72f6);}static async[_0x2cde37('0x99')](_0x5623a9){const _0x53d4b5=_0x2cde37;_0x5623a9=_0x5623a9||{};const _0x55e627=Vetools[_0x53d4b5('0x47')]+'data/races.json',_0x53a3bf=await Vetools[_0x53d4b5('0x30')](_0x55e627),_0x103185=Renderer['race']['mergeSubraces'](_0x53a3bf['race'],_0x5623a9);return{'race':_0x103185};}static async['pGetClasses'](){const _0xefeec1=_0x2cde37;return DataUtil[_0xefeec1('0x2c')][_0xefeec1('0x1c')]();}static async[_0x2cde37('0x29')](){const _0x43e770=_0x2cde37;return DataUtil[_0x43e770('0xa8')][_0x43e770('0x1e')]();}static async[_0x2cde37('0x65')](_0x374de0,_0x596498){const _0x58c48a=_0x2cde37,_0x4ea733=Vetools[_0x58c48a('0x47')]+'data/'+_0x374de0,_0x4b7b44=await Vetools[_0x58c48a('0x30')](_0x4ea733);return _0x4b7b44[_0x596498][_0x58c48a('0x48')](_0x2e8077=>_0x2e8077['_pubDate']=new Date(_0x2e8077[_0x58c48a('0x4')]||'1970-01-01')),_0x4b7b44;}static async[_0x2cde37('0x14')](){const _0x4a3de3=_0x2cde37;return this[_0x4a3de3('0x65')]('adventures.json',_0x4a3de3('0x83'));}static async[_0x2cde37('0xa9')](){const _0x319a7a=_0x2cde37;return this[_0x319a7a('0x65')](_0x319a7a('0x21'),_0x319a7a('0x44'));}static['_getAdventureBookUrl'](_0x20f533,_0x3fd538){const _0x42066b=_0x2cde37;return Vetools['BASE_SITE_URL']+_0x42066b('0x3e')+_0x20f533+'/'+_0x20f533+'-'+_0x3fd538[_0x42066b('0x9')]()+_0x42066b('0x38');}static[_0x2cde37('0x8b')](_0x11a6a8){const _0x4e62ee=_0x2cde37;return this[_0x4e62ee('0x19')](_0x4e62ee('0x83'),_0x11a6a8);}static[_0x2cde37('0x59')](_0x5a2fc1){const _0xfd73d5=_0x2cde37;return this['_getAdventureBookUrl'](_0xfd73d5('0x44'),_0x5a2fc1);}static[_0x2cde37('0x55')](_0x4f1cc4){const _0x4e5241=_0x2cde37;if(_0x4f1cc4&&_0x4f1cc4[_0x4e5241('0x9a')]&&_0x4f1cc4[_0x4e5241('0x9a')][0x0]){const _0x10d8fb=_0x4f1cc4[_0x4e5241('0x9a')][0x0];if(_0x10d8fb['href']){if(_0x10d8fb[_0x4e5241('0x7a')][_0x4e5241('0x27')]===_0x4e5241('0xb3'))return _0x10d8fb['href']['path']?''+Vetools[_0x4e5241('0x13')](_0x10d8fb[_0x4e5241('0x7a')][_0x4e5241('0x7f')]):'';else{if(_0x10d8fb[_0x4e5241('0x7a')][_0x4e5241('0x27')]==='external')return _0x10d8fb['href'][_0x4e5241('0x82')]||'';}}}}static[_0x2cde37('0xbf')](_0x3ee38e,_0x1f412e){const _0x1ee435=_0x2cde37;return Vetools[_0x1ee435('0xb4')](_0x3ee38e,_0x1f412e)[_0x1ee435('0x53')];}static[_0x2cde37('0x8e')](_0x4bcbb4,_0x20d704){const _0x4f945f=_0x2cde37;return Vetools[_0x4f945f('0xb4')](_0x4bcbb4,_0x20d704)[_0x4f945f('0x82')];}static['_getTokenUrl'](_0x1d1b5c,_0x1bdba3){const _0x16ab04=_0x2cde37;if(_0x1bdba3[_0x16ab04('0xb6')])return{'url':_0x1bdba3[_0x16ab04('0xb6')],'hasToken':!![]};const _0x19eb64={'url':UrlUtil[_0x16ab04('0x46')]((Renderer['get']()[_0x16ab04('0xe')][_0x16ab04('0x5c')]||Renderer[_0x16ab04('0x41')]()['baseUrl'])+_0x16ab04('0x24')),'hasToken':![]};switch(_0x1d1b5c){case _0x16ab04('0x4a'):{if(_0x1bdba3['hasToken'])return{'url':Renderer[_0x16ab04('0x4a')]['getTokenUrl'](_0x1bdba3),'hasToken':!![]};return _0x19eb64;}case _0x16ab04('0x79'):{if(_0x1bdba3[_0x16ab04('0x53')])return{'url':Renderer['vehicle'][_0x16ab04('0x8e')](_0x1bdba3),'hasToken':!![]};return _0x19eb64;}default:throw new Error(_0x16ab04('0x3')+_0x1d1b5c+'\x22');}}static['getInternalImageUrl'](_0x1b307a){const _0x1663e0=_0x2cde37;return((Renderer[_0x1663e0('0x41')]()['baseMediaUrls'][_0x1663e0('0x5c')]||Renderer[_0x1663e0('0x41')]()[_0x1663e0('0x5b')])+'img/'+encodeURIComponent(_0x1b307a))[_0x1663e0('0xd')](/'/g,_0x1663e0('0x18'));}static async[_0x2cde37('0x4d')](_0x55cb5d=![]){const _0x205608=_0x2cde37,_0x47d45e=await Vetools[_0x205608('0x91')](),_0x41cbbb=await Promise[_0x205608('0xaf')](Object[_0x205608('0x5e')](_0x47d45e)[_0x205608('0x78')](([_0x428828])=>!_0x55cb5d||!SourceUtil[_0x205608('0x3d')](_0x428828))[_0x205608('0x10')](([_0x275710,_0x184977])=>Vetools[_0x205608('0x30')](Vetools[_0x205608('0xbd')](_0x184977))));return{'spell':_0x41cbbb[_0x205608('0x10')](_0x42c57e=>MiscUtil[_0x205608('0x96')](_0x42c57e[_0x205608('0x80')]))['flat']()};}static async[_0x2cde37('0x8')](_0x357f5e=![]){const _0x515192=_0x2cde37,_0x5ce918=await Vetools[_0x515192('0x7c')](),_0x5db70b=await Promise[_0x515192('0xaf')](Object['entries'](_0x5ce918)['filter'](([_0x3a6d40])=>!_0x357f5e||!SourceUtil[_0x515192('0x3d')](_0x3a6d40))[_0x515192('0x10')](async([_0x16fd76,_0xcc4b63])=>({'source':_0x16fd76,'json':await Vetools['pGetWithCache'](Vetools[_0x515192('0xba')](_0xcc4b63))})));return{'monster':_0x5db70b[_0x515192('0x10')](_0x1698bd=>MiscUtil['copy'](_0x1698bd[_0x515192('0x95')]['monster'][_0x515192('0x78')](_0x2e1d37=>_0x2e1d37[_0x515192('0x1')]===_0x1698bd[_0x515192('0x1')])))[_0x515192('0x66')]()};}static async[_0x2cde37('0x3f')](){const _0x483f04=_0x2cde37;let _0x4a3f00={};try{_0x4a3f00=await DataUtil[_0x483f04('0xa7')][_0x483f04('0x6a')]();}catch(_0x2a76bc){ui[_0x483f04('0x8f')]['error'](_0x483f04('0xc0')+VeCt[_0x483f04('0x8a')]),setTimeout(()=>{throw _0x2a76bc;});}return _0x4a3f00;}static async['pGetHomebrewSources'](..._0xd02cda){const _0x69bc6c=_0x2cde37,_0xd5aade=await StorageUtil[_0x69bc6c('0xbe')](_0x69bc6c('0x25')),_0x242c32=new Set();return _0xd02cda[_0x69bc6c('0x10')](_0x28228b=>{const _0x18846f=_0x69bc6c;return Object[_0x18846f('0x5')](Vetools[_0x18846f('0x35')][BrewUtil[_0x18846f('0x6c')](_0x28228b)]||{})[_0x18846f('0x10')](_0x55c87a=>{const _0x4054eb=_0x18846f;if(_0x242c32[_0x4054eb('0x4e')](_0x55c87a))return null;return _0x242c32['add'](_0x55c87a),{'url':DataUtil[_0x4054eb('0xa7')]['getFileUrl'](_0x55c87a,_0xd5aade),'name':_0x55c87a['split']('/')[_0x4054eb('0x40')](0x1)[_0x4054eb('0x43')]('/')[_0x4054eb('0xd')](/\.json$/i,'')};});})[_0x69bc6c('0x66')]()[_0x69bc6c('0x78')](Boolean)[_0x69bc6c('0x1d')]((_0x4b3eb2,_0x191c5b)=>SortUtil[_0x69bc6c('0x5d')](_0x4b3eb2[_0x69bc6c('0xc')],_0x191c5b[_0x69bc6c('0xc')]));}static[_0x2cde37('0xf')](_0x11e73b,_0x216c59){const _0x4cc718=_0x2cde37;if(!_0x216c59)return _0x11e73b;return _0x216c59['map'](_0x5b5223=>{const _0x3f3e36=_0x5d99;return _0x11e73b[_0x5b5223]=_0x11e73b[_0x5b5223]||[],_0x11e73b[_0x5b5223][_0x3f3e36('0x48')](_0x2a2f4d=>_0x2a2f4d[_0x3f3e36('0x61')]=_0x5b5223),_0x11e73b[_0x5b5223];})[_0x4cc718('0x66')]();}static async[_0x2cde37('0xbb')](){const _0x176b7b=_0x2cde37,_0x458596=Vetools[_0x176b7b('0x47')]+'data/spells/foundry.json';return Vetools['pGetWithCache'](_0x458596);}static async[_0x2cde37('0x69')](){const _0xc3ab2a=_0x2cde37,_0x32499a=Vetools[_0xc3ab2a('0x47')]+'data/foundry-optionalfeatures.json';return Vetools[_0xc3ab2a('0x30')](_0x32499a);}static async['pGetClassSubclassFeatureAdditionalData'](){const _0x3e8c96=Vetools['BASE_SITE_URL']+'data/class/foundry.json';return Vetools['pGetWithCache'](_0x3e8c96);}static async[_0x2cde37('0x7e')](_0x154049){const _0x4870c9=_0x2cde37,_0x225fa9=_0x4870c9('0xa0')+_0x154049+_0x4870c9('0x6b'),_0x383a38='modules/'+SharedConsts[_0x4870c9('0x11')]+_0x4870c9('0xb7')+_0x225fa9;return Vetools[_0x4870c9('0x30')](_0x383a38);}static get[_0x2cde37('0x47')](){const _0x240b70=_0x2cde37;let _0x16d744=Config[_0x240b70('0x41')](_0x240b70('0x42'),_0x240b70('0x50'));if(_0x16d744&&_0x16d744[_0x240b70('0x9e')]())return _0x16d744=_0x16d744[_0x240b70('0xd')](/^(.*?)([\\/]+)$/,'$1/'),_0x16d744;return Vetools[_0x240b70('0x2e')];}static get['DATA_URL_FEATS'](){const _0x44c503=_0x2cde37;return Vetools[_0x44c503('0x47')]+_0x44c503('0x6e');}static get[_0x2cde37('0x89')](){const _0x16b131=_0x2cde37;return Vetools[_0x16b131('0x47')]+_0x16b131('0x77');}static get[_0x2cde37('0x6f')](){const _0x9b3af6=_0x2cde37;return Vetools[_0x9b3af6('0x47')]+'data/variantrules.json';}static get[_0x2cde37('0x6')](){const _0x546a3b=_0x2cde37;return Vetools[_0x546a3b('0x47')]+_0x546a3b('0xb2');}static get[_0x2cde37('0x76')](){const _0x245d5f=_0x2cde37;return Vetools[_0x245d5f('0x47')]+_0x245d5f('0x94');}static get[_0x2cde37('0x37')](){const _0x4c269b=_0x2cde37;return Vetools[_0x4c269b('0x47')]+_0x4c269b('0xa1');}static get[_0x2cde37('0x1a')](){const _0x488efb=_0x2cde37;return Vetools[_0x488efb('0x47')]+'data/vehicles.json';}}Vetools[_0x2cde37('0x3b')]={},Vetools[_0x2cde37('0xae')]={},Vetools['_BASE_SITE_URL']=_0x2cde37('0x7d'),Vetools[_0x2cde37('0xab')]=null,Vetools[_0x2cde37('0x20')]=null,Vetools[_0x2cde37('0x54')]={},Vetools[_0x2cde37('0xad')]={},Vetools['_CACHED_GET_ROLLABLE_ENTRY_DICE']=null,Vetools[_0x2cde37('0x9d')]=null;export{Vetools};