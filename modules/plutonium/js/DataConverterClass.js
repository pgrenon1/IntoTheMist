const _0x2090=['permission','Unhandled\x20type\x20\x22','has','pGetClassSubclassFeatureAdditionalData','withUnpatchedDiceRendering','Cleric','_getCntSkills','push','PG_CLASSES','pPreloadSideData','foundryClassFeature','subclass','classSource','subclassFeatures','pGetClassItem','pGetDereferencedClassData','SYM_UI_SKIP','timeless\x20body','filterValues','join','getSourceWithPagePart','assign','/media/icon/mighty-force.svg','section','_pIsInSrd','getCleanOriginalData','_pGetClassSubclassFeatureItem_fromSrd','render','startingProficiencies','name','getCleanEntityName','getEntryDescription','permissions','<p>','/media/icon/laurels.svg','entries','count','channel\x20divinity:','pGetSideData','classFeature','trim','pMutActorUpdateClassSubclassFeatureItem','pMutActorUpdate','mystic\x20arcanum','expertise','source','getMappedCasterType','unarmored\x20defense','subclassShortName','_SIDE_DATA','modules/','_pGetAdditionalFeatureData','<div>','channel\x20divinity','class','subclassSource','{@note\x20Note:\x20importing\x20a\x20class\x20as\x20an\x20item\x20is\x20provided\x20for\x20display\x20purposes\x20only.\x20If\x20you\x20wish\x20to\x20import\x20a\x20class\x20to\x20a\x20character\x20sheet,\x20please\x20use\x20the\x20importer\x20on\x20the\x20sheet\x20instead.}','_FEATURE_SRD_ASLIAS_WITH_CLASSNAME','map','startsWith','</p>','get','isAddPermission','pGetCompendiumImage','choose','getNameWithSourcePart','_getDoNotUseNote','replace','chooseData','faces','type','_pGetClassSubclassFeatureItem_pGetImagePath','actor','find','getDataHitDice','\x20Level\x20','land\x27s\x20stride','isCancelled','foundrySubclassFeature','entity','pGetDereferencedSubclassData','skills','flat','_getFeatureSrdAliases','setFirstSection','data','_pGetClassSubclassFeatureItem_other','copy','homebrew','casterProgression','className','level','pGetSubclassItem','</div>','feat','toLowerCase','importClass','MODULE_NAME'];(function(_0x2d1f4c,_0x2090e6){const _0x53879b=function(_0x3484ae){while(--_0x3484ae){_0x2d1f4c['push'](_0x2d1f4c['shift']());}};_0x53879b(++_0x2090e6);}(_0x2090,0x1d6));const _0x5387=function(_0x2d1f4c,_0x2090e6){_0x2d1f4c=_0x2d1f4c-0x0;let _0x53879b=_0x2090[_0x2d1f4c];return _0x53879b;};const _0xd0cb4a=_0x5387;'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';class DataConverterClass{static[_0xd0cb4a('0x56')](){const _0x43c3fc=_0xd0cb4a;return _0x43c3fc('0x35')+Renderer['get']()[_0x43c3fc('0x2f')](_0x43c3fc('0x4c'))+_0x43c3fc('0x50');}static[_0xd0cb4a('0x1a')](_0x3484ae){const _0x1392d3=_0xd0cb4a;return(MiscUtil['get'](_0x3484ae,_0x1392d3('0x30'),_0x1392d3('0x3'))||[])[_0x1392d3('0x4e')](_0x179782=>MiscUtil[_0x1392d3('0x51')](_0x179782[_0x1392d3('0x54')],_0x1392d3('0x38'))||0x0)['reduce']((_0x419bdd,_0x5c6693)=>_0x419bdd+_0x5c6693,0x0);}static[_0xd0cb4a('0x5e')](_0x4c2bc4){const _0x4c9c1b=_0xd0cb4a;return'd'+((_0x4c2bc4['hd']||{})[_0x4c9c1b('0x59')]||0x6);}static async[_0xd0cb4a('0x22')](_0x530668,_0x2aac09){const _0x1a4d9c=_0xd0cb4a;_0x2aac09=_0x2aac09||{};const _0x2618aa=DataConverter[_0x1a4d9c('0x2d')](_0x530668);_0x530668=MiscUtil[_0x1a4d9c('0x9')](_0x530668),_0x530668=await DataUtil[_0x1a4d9c('0x4a')][_0x1a4d9c('0x23')](_0x530668);const _0x297494=Renderer['get']()[_0x1a4d9c('0x6')](!![])[_0x1a4d9c('0x2f')]({'type':_0x1a4d9c('0x2b'),'entries':_0x530668['classFeatures'][_0x1a4d9c('0x4')]()}),_0x17dfb4=await DataConverter[_0x1a4d9c('0x53')](_0x1a4d9c('0x4a'),_0x530668)||_0x1a4d9c('0x46')+SharedConsts[_0x1a4d9c('0x13')]+_0x1a4d9c('0x36'),_0x2d1a3c={'name':UtilApplications['getCleanEntityName'](DataConverter[_0x1a4d9c('0x55')](_0x530668)),'type':_0x1a4d9c('0x4a'),'data':{'description':{'value':Config[_0x1a4d9c('0x51')](_0x1a4d9c('0x12'),'isImportDescription')?'<div>'+this[_0x1a4d9c('0x56')]()+_0x297494+_0x1a4d9c('0xf'):'','chat':'','unidentified':''},'source':DataConverter[_0x1a4d9c('0x28')](_0x530668),'levels':0x14,'subclass':'','damage':{'parts':[]},'hitDice':DataConverterClass[_0x1a4d9c('0x5e')](_0x530668),'hitDiceUsed':0x0,'skills':{'number':this['_getCntSkills'](_0x530668)},'spellcasting':UtilActors[_0x1a4d9c('0x42')](_0x530668['casterProgression'])},'flags':{[SharedConsts[_0x1a4d9c('0x13')]]:{'page':UrlUtil[_0x1a4d9c('0x1c')],'source':_0x530668[_0x1a4d9c('0x41')],'hash':UrlUtil['URL_TO_HASH_BUILDER'][UrlUtil[_0x1a4d9c('0x1c')]](_0x530668),'data':{'class':_0x2618aa},'filterValues':_0x2aac09[_0x1a4d9c('0x26')]}},'effects':[],'img':_0x17dfb4};if(_0x2aac09['isAddPermission'])_0x2d1a3c[_0x1a4d9c('0x14')]={'default':Config[_0x1a4d9c('0x51')](_0x1a4d9c('0x12'),_0x1a4d9c('0x34'))};return _0x2d1a3c;}static async[_0xd0cb4a('0xe')](_0x4287f2,_0x567bb2,_0x5e3329){const _0xc11c1f=_0xd0cb4a;_0x5e3329=_0x5e3329||{};const _0x5a5499=DataConverter[_0xc11c1f('0x2d')](_0x4287f2),_0x36ea95=DataConverter[_0xc11c1f('0x2d')](_0x567bb2);_0x567bb2=MiscUtil[_0xc11c1f('0x9')](_0x567bb2),_0x567bb2=await DataUtil[_0xc11c1f('0x4a')][_0xc11c1f('0x2')](_0x567bb2);const _0x31bab0=Renderer[_0xc11c1f('0x51')]()[_0xc11c1f('0x6')](!![])[_0xc11c1f('0x2f')]({'type':_0xc11c1f('0x2b'),'entries':_0x567bb2[_0xc11c1f('0x21')][_0xc11c1f('0x4')]()}),_0x13ee0b=await DataConverter[_0xc11c1f('0x53')]('class',_0x4287f2)||_0xc11c1f('0x46')+SharedConsts['MODULE_NAME']+_0xc11c1f('0x36');_0x567bb2[_0xc11c1f('0x41')]=_0x567bb2[_0xc11c1f('0x41')]||_0x4287f2[_0xc11c1f('0x41')];const _0x31e1fe={'name':UtilApplications[_0xc11c1f('0x32')](DataConverter['getNameWithSourcePart'](_0x4287f2,_0x567bb2['name']+'\x20'+_0x4287f2[_0xc11c1f('0x31')])),'type':_0xc11c1f('0x4a'),'data':{'description':{'value':Config[_0xc11c1f('0x51')](_0xc11c1f('0x12'),'isImportDescription')?'<div>'+this[_0xc11c1f('0x56')]()+_0x31bab0+_0xc11c1f('0xf'):'','chat':'','unidentified':''},'source':DataConverter[_0xc11c1f('0x28')](_0x567bb2),'levels':0x14,'subclass':_0x567bb2[_0xc11c1f('0x31')],'damage':{'parts':[]},'hitDice':DataConverterClass[_0xc11c1f('0x5e')](_0x4287f2),'hitDiceUsed':0x0,'skills':{'number':this[_0xc11c1f('0x1a')](_0x4287f2)},'spellcasting':UtilActors['getMappedCasterType'](_0x4287f2[_0xc11c1f('0xb')])},'flags':{[SharedConsts[_0xc11c1f('0x13')]]:{'page':_0xc11c1f('0x1f'),'source':_0x567bb2[_0xc11c1f('0x41')],'hash':UrlUtil['URL_TO_HASH_BUILDER'][_0xc11c1f('0x1f')](_0x567bb2),'data':{'class':_0x5a5499,'subclass':_0x36ea95},'filterValues':_0x5e3329[_0xc11c1f('0x26')]}},'effects':[],'img':_0x13ee0b};if(_0x5e3329[_0xc11c1f('0x52')])_0x31e1fe['permission']={'default':Config[_0xc11c1f('0x51')](_0xc11c1f('0x12'),'permissions')};return _0x31e1fe;}static async['pGetClassSubclassFeatureItem'](_0x2eb6b9,_0x1b7bdc){const _0x319b56=_0xd0cb4a,{entity:_0x39383b,type:_0x47dce0}=_0x2eb6b9;let _0x41cbfd;return await this[_0x319b56('0x2c')](_0x39383b,_0x47dce0)?_0x41cbfd=this[_0x319b56('0x2e')](_0x39383b,_0x47dce0,_0x1b7bdc):_0x41cbfd=this[_0x319b56('0x8')](_0x39383b,_0x47dce0,_0x1b7bdc),_0x41cbfd;}static async[_0xd0cb4a('0x2c')](_0x5450ea,_0x331c0f){const _0x30b83b=await DataConverter['getSrdCompendiumEntity'](_0x331c0f,_0x5450ea,{'fnGetAliases':this['_getFeatureSrdAliases']});return!!_0x30b83b;}static async[_0xd0cb4a('0x2e')](_0x152118,_0x949681,_0x105323){const _0x5aee4d=_0xd0cb4a,_0x599691=await DataConverter['getSrdCompendiumEntity'](_0x949681,_0x152118,{'fnGetAliases':this[_0x5aee4d('0x5')]}),_0x28452=await this[_0x5aee4d('0x47')](_0x152118,_0x949681,_0x105323);return{'name':UtilApplications[_0x5aee4d('0x32')](DataConverter[_0x5aee4d('0x55')](_0x152118)),'type':_0x599691[_0x5aee4d('0x5a')],'data':{..._0x599691['data'],'source':DataConverter['getSourceWithPagePart'](_0x152118),'description':{'value':DataConverter[_0x5aee4d('0x33')](_0x152118),'chat':'','unidentified':''},..._0x28452||{}},'img':await this[_0x5aee4d('0x5b')](_0x152118,_0x949681)};}static async['_pGetClassSubclassFeatureItem_other'](_0x364ffb,_0x592bf0,_0x54231c){const _0x2715dd=_0xd0cb4a;let _0x26dd7d=await this[_0x2715dd('0x47')](_0x364ffb,_0x592bf0,_0x54231c);return DataConverter['getItemActorPassive'](_0x364ffb,{'mode':'player','modeOptions':{'isChannelDivinity':_0x364ffb[_0x2715dd('0xc')]===_0x2715dd('0x19')&&_0x364ffb['name'][_0x2715dd('0x11')]()[_0x2715dd('0x4f')](_0x2715dd('0x39'))},'renderDepth':0x0,'fvttType':_0x2715dd('0x10'),'img':await this[_0x2715dd('0x5b')](_0x364ffb,_0x592bf0),'source':DataConverter[_0x2715dd('0x28')](_0x364ffb),'requirements':_0x364ffb[_0x2715dd('0xc')]+'\x20'+_0x364ffb[_0x2715dd('0xd')]+(_0x364ffb[_0x2715dd('0x44')]?'\x20('+_0x364ffb[_0x2715dd('0x44')]+')':''),'additionalData':_0x26dd7d,'actor':_0x54231c[_0x2715dd('0x5c')]});}static async[_0xd0cb4a('0x3d')](_0x425e08,_0x33ffac,_0x1737f3,_0x514936){const _0x220bd2=_0xd0cb4a,{entity:_0x55a4f7,type:_0x51d59d}=_0x1737f3,_0x5b25d4=await this[_0x220bd2('0x3a')](_0x55a4f7,_0x51d59d),_0x57be44={'sideData':_0x5b25d4,'isCancelled':![]};await DataConverter[_0x220bd2('0x3e')](_0x425e08,_0x33ffac,_0x1737f3[_0x220bd2('0x1')],_0x57be44);if(_0x57be44[_0x220bd2('0x61')])_0x514936['isCancelled']=!![];}static async[_0xd0cb4a('0x1d')](){const _0x399fb7=_0xd0cb4a;DataConverterClass[_0x399fb7('0x45')]=await Vetools[_0x399fb7('0x17')]();}static async[_0xd0cb4a('0x3a')](_0x139aa4,_0x5cd67c){const _0x3859b2=_0xd0cb4a;switch(_0x5cd67c){case _0x3859b2('0x3b'):{let _0x32abc3=(MiscUtil[_0x3859b2('0x51')](BrewUtil,'homebrew',_0x3859b2('0x1e'))||[])['find'](_0x586505=>_0x586505['name']===_0x139aa4[_0x3859b2('0x31')]&&_0x586505['source']===_0x139aa4[_0x3859b2('0x41')]&&_0x586505[_0x3859b2('0xc')]===_0x139aa4['className']&&_0x586505['classSource']===_0x139aa4[_0x3859b2('0x20')]&&_0x586505['level']===_0x139aa4[_0x3859b2('0xd')]);if(!_0x32abc3){const _0x4add0e=DataConverterClass[_0x3859b2('0x45')]||await Vetools[_0x3859b2('0x17')]();_0x32abc3=_0x4add0e['classFeature'][_0x3859b2('0x5d')](_0x5ee7e6=>_0x5ee7e6[_0x3859b2('0x31')]===_0x139aa4[_0x3859b2('0x31')]&&_0x5ee7e6['source']===_0x139aa4[_0x3859b2('0x41')]&&_0x5ee7e6[_0x3859b2('0xc')]===_0x139aa4[_0x3859b2('0xc')]&&_0x5ee7e6[_0x3859b2('0x20')]===_0x139aa4[_0x3859b2('0x20')]&&_0x5ee7e6['level']===_0x139aa4[_0x3859b2('0xd')]);}if(!_0x32abc3)return null;return _0x32abc3;}case'subclassFeature':{let _0x47ac5f=(MiscUtil[_0x3859b2('0x51')](BrewUtil,_0x3859b2('0xa'),_0x3859b2('0x0'))||[])[_0x3859b2('0x5d')](_0x291d1d=>_0x291d1d[_0x3859b2('0x31')]===_0x139aa4[_0x3859b2('0x31')]&&_0x291d1d[_0x3859b2('0x41')]===_0x139aa4['source']&&_0x291d1d[_0x3859b2('0xc')]===_0x139aa4[_0x3859b2('0xc')]&&_0x291d1d[_0x3859b2('0x20')]===_0x139aa4[_0x3859b2('0x20')]&&_0x291d1d[_0x3859b2('0x44')]===_0x139aa4[_0x3859b2('0x44')]&&_0x291d1d['subclassSource']===_0x139aa4[_0x3859b2('0x4b')]&&_0x291d1d[_0x3859b2('0xd')]===_0x139aa4[_0x3859b2('0xd')]);if(!_0x47ac5f){const _0x1e6ebb=DataConverterClass[_0x3859b2('0x45')]||await Vetools[_0x3859b2('0x17')]();_0x47ac5f=_0x1e6ebb['subclassFeature'][_0x3859b2('0x5d')](_0x502687=>_0x502687[_0x3859b2('0x31')]===_0x139aa4[_0x3859b2('0x31')]&&_0x502687[_0x3859b2('0x41')]===_0x139aa4[_0x3859b2('0x41')]&&_0x502687[_0x3859b2('0xc')]===_0x139aa4[_0x3859b2('0xc')]&&_0x502687[_0x3859b2('0x20')]===_0x139aa4[_0x3859b2('0x20')]&&_0x502687['subclassShortName']===_0x139aa4['subclassShortName']&&_0x502687[_0x3859b2('0x4b')]===_0x139aa4[_0x3859b2('0x4b')]&&_0x502687[_0x3859b2('0xd')]===_0x139aa4[_0x3859b2('0xd')]);}if(!_0x47ac5f)return null;return _0x47ac5f;}default:throw new Error(_0x3859b2('0x15')+_0x5cd67c+'\x22');}}static async[_0xd0cb4a('0x47')](_0x56b446,_0x427b95,_0x4cc623){const _0x421afc=_0xd0cb4a,_0x5168d6=await this[_0x421afc('0x3a')](_0x56b446,_0x427b95);if(!_0x5168d6)return null;const _0x8ed1e5={};if(_0x5168d6[_0x421afc('0x7')])Object[_0x421afc('0x29')](_0x8ed1e5,MiscUtil[_0x421afc('0x9')](_0x5168d6[_0x421afc('0x7')]));if(_0x5168d6[_0x421afc('0x58')]){const _0xe583df=_0x5168d6['isChooseDataRenderEntries']?Vetools[_0x421afc('0x18')](()=>(_0x56b446[_0x421afc('0x37')]||[])['map'](_0x446861=>_0x421afc('0x48')+Renderer['get']()[_0x421afc('0x2f')](_0x446861)+'</div>')[_0x421afc('0x27')]('')+'<hr\x20class=\x22hr-1\x20mt-2\x22>'):null,_0x2a4aa0=await InputUiUtil['pGetUserMultipleChoice']({'title':''+_0x56b446[_0x421afc('0xc')]+(_0x56b446[_0x421afc('0x44')]?'\x20('+_0x56b446[_0x421afc('0x44')]+')':'')+_0x421afc('0x5f')+_0x56b446[_0x421afc('0xd')]+'â€”'+_0x56b446[_0x421afc('0x31')],'htmlDescription':_0xe583df,'count':0x1,'isResolveItems':!![],'fnDisplay':_0x398cd7=>_0x398cd7[_0x421afc('0x31')],'values':_0x5168d6[_0x421afc('0x58')],'modalOpts':{'isMaxWidth640p':!![]},'isSkippable':!![]});if(_0x2a4aa0==null)return _0x4cc623[_0x421afc('0x61')]=!![],null;if(_0x2a4aa0===VeCt[_0x421afc('0x24')])return _0x8ed1e5;Object[_0x421afc('0x29')](_0x8ed1e5,MiscUtil['copy'](_0x2a4aa0[0x0]['data']));}return _0x8ed1e5;}static[_0xd0cb4a('0x5')](_0x4cf75b){const _0x130d45=_0xd0cb4a;if(!_0x4cf75b[_0x130d45('0x31')])return[];const _0x1aa4db=[],_0x37f4aa=_0x4cf75b[_0x130d45('0x31')][_0x130d45('0x57')](/\([^)]+\)/g,'')[_0x130d45('0x57')](/\s+/g,'\x20')[_0x130d45('0x3c')]();if(_0x37f4aa!==_0x4cf75b[_0x130d45('0x31')])_0x1aa4db[_0x130d45('0x1b')](_0x37f4aa);const _0x260cd1=_0x4cf75b[_0x130d45('0x31')][_0x130d45('0x11')]()[_0x130d45('0x3c')]();return DataConverterClass[_0x130d45('0x4d')][_0x130d45('0x16')](_0x260cd1)&&_0x1aa4db[_0x130d45('0x1b')](_0x4cf75b[_0x130d45('0x31')]+'\x20('+_0x4cf75b[_0x130d45('0xc')]+')'),_0x260cd1['startsWith'](_0x130d45('0x3f'))&&_0x1aa4db[_0x130d45('0x1b')](_0x37f4aa+'\x20('+((_0x4cf75b[_0x130d45('0xd')]-0x9)/0x2+0x5)+'th-Level\x20Spell)'),_0x1aa4db;}static async[_0xd0cb4a('0x5b')](_0x3d2387,_0x301d62){const _0x3817f3=_0xd0cb4a,_0x4c6fbc=await DataConverter['pGetCompendiumImage'](_0x301d62,_0x3d2387,{'fnGetAliases':this['_getFeatureSrdAliases']});if(_0x4c6fbc)return _0x4c6fbc;return _0x3817f3('0x46')+SharedConsts['MODULE_NAME']+_0x3817f3('0x2a');}}DataConverterClass[_0xd0cb4a('0x45')]=null,DataConverterClass[_0xd0cb4a('0x4d')]=new Set([_0xd0cb4a('0x43'),_0xd0cb4a('0x49'),_0xd0cb4a('0x40'),_0xd0cb4a('0x60'),_0xd0cb4a('0x25')]);export{DataConverterClass};