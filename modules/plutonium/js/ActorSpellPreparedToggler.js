const _0x5e70=['getData','_list','type','_activateListeners_pInitListAndFilters','pHandleButtonClick','preparation','Level','update','ele','_activateListeners_initBtnReset','pCommitState','prepared','render','_fMisc','map','doAbsorbItems','pInitFilterBox','toDisplay','init','forEach','val','then','.veapp__list','ritual','activateListeners','Material','Ritual','Spell\x20Prepared\x20Toggler','Concentration','_pPopulateBoxOptions','get','addToFilters','components','concentration','spell','resetNextState','.act-sp-prep__disp-modified','teardown','Somatic','getMaxWindowHeight','sortSpells','[name=\x22btn-run\x22]','getValues','_handleFilterChange','_$btnReset','.fltr__mini-view','_rows','somatic','[name=btn-filter]','cbSel','_pageFilter','_$iptSearch','.search','_actorItems','[name=btn-toggle-summary]','checked','EVNT_VALCHANGE','getFltrSpellLevelStr','setNextState','data','[name=\x22cb-select-all\x22]','Unknown','toggleClass','_miscFilter','name','AppFilter','filter','push','filters','close','find','input','click','change','_levelFilter','filterBox','items','mode','level','_activateListeners_initBtnRun','addItem'];(function(_0x401555,_0x5e704c){const _0x5dc55d=function(_0x78e62a){while(--_0x78e62a){_0x401555['push'](_0x401555['shift']());}};_0x5dc55d(++_0x5e704c);}(_0x5e70,0x16e));const _0x5dc5=function(_0x401555,_0x5e704c){_0x401555=_0x401555-0x0;let _0x5dc55d=_0x5e70[_0x401555];return _0x5dc55d;};const _0x1d4a5c=_0x5dc5;'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilter}from'./FilterApplications.js';class ActorSpellPreparedToggler extends Application{static[_0x1d4a5c('0x2b')](_0x78e62a,_0x530a14,_0x44505a,_0x5b4c6f){const _0x153a60=_0x1d4a5c,_0x4787a4=new ActorSpellPreparedToggler(_0x530a14['actor']);_0x4787a4[_0x153a60('0x33')](!![]);}constructor(_0x2fe324){const _0x513d03=_0x1d4a5c;super({'title':_0x513d03('0x42'),'template':SharedConsts['MODULE_LOCATION']+'/template/ActorSpellPreparedToggler.handlebars','width':0x1e0,'height':Util[_0x513d03('0x4e')](),'resizable':!![]}),this['_actor']=_0x2fe324,this[_0x513d03('0xb')]=this['_actor']['items'][_0x513d03('0x18')](_0xb5178c=>_0xb5178c[_0x513d03('0x29')]===_0x513d03('0x49')&&_0xb5178c[_0x513d03('0x11')][_0x513d03('0x11')]['level']!==0x0&&_0xb5178c[_0x513d03('0x11')]['data'][_0x513d03('0x2c')]&&_0xb5178c[_0x513d03('0x11')]['data']['preparation'][_0x513d03('0x23')]===_0x513d03('0x32')),this[_0x513d03('0x8')]=new ActorSpellPreparedToggler[(_0x513d03('0x17'))](),this[_0x513d03('0x28')]=null,this['_$btnReset']=null,this[_0x513d03('0x9')]=null;}[_0x1d4a5c('0x1')](){const _0x44a1f0=_0x1d4a5c,_0x1acddc=this[_0x44a1f0('0x8')]['filterBox'][_0x44a1f0('0x0')]();this[_0x44a1f0('0x28')][_0x44a1f0('0x18')](_0x1af60a=>this[_0x44a1f0('0x8')]['toDisplay'](_0x1acddc,this[_0x44a1f0('0x4')][_0x1af60a['ix']]));}[_0x1d4a5c('0x3f')](_0x11129f){const _0x32ef3f=_0x1d4a5c;super[_0x32ef3f('0x3f')](_0x11129f),this[_0x32ef3f('0x25')](_0x11129f),this['_activateListeners_initBtnReset'](_0x11129f),this[_0x32ef3f('0x2a')](_0x11129f);}[_0x1d4a5c('0x25')](_0x10f708){const _0x4919a2=_0x1d4a5c;_0x10f708[_0x4919a2('0x1c')](_0x4919a2('0x50'))[_0x4919a2('0x1e')](async()=>{const _0x3df3d3=_0x4919a2;for(const _0x59b4aa of this[_0x3df3d3('0x28')][_0x3df3d3('0x22')]){await _0x59b4aa[_0x3df3d3('0x11')][_0x3df3d3('0x31')]();}});}[_0x1d4a5c('0x30')](_0x508efe){const _0x223feb=_0x1d4a5c;this[_0x223feb('0x2')]=_0x508efe[_0x223feb('0x1c')]('[name=\x22btn-reset\x22]')[_0x223feb('0x1e')](()=>{const _0x5c52bc=_0x223feb;_0x508efe[_0x5c52bc('0x1c')](_0x5c52bc('0xa'))[_0x5c52bc('0x3b')]('');if(!this[_0x5c52bc('0x28')])return;this['_list']['reset'](),this[_0x5c52bc('0x28')][_0x5c52bc('0x22')][_0x5c52bc('0x3a')](_0x55a4dc=>_0x55a4dc['data'][_0x5c52bc('0x4a')]());});}[_0x1d4a5c('0x2a')](_0x32428e){const _0x4b0936=_0x1d4a5c;this[_0x4b0936('0x9')]=_0x32428e['find']('.search'),this[_0x4b0936('0x28')]=new List({'$iptSearch':this[_0x4b0936('0x9')],'$wrpList':_0x32428e[_0x4b0936('0x1c')](_0x4b0936('0x3d')),'isUseJquery':!![],'fnSort':PageFilterSpells[_0x4b0936('0x4f')]}),SortUtil['initBtnSortHandlers'](_0x32428e['find']('[data-name=\x22wrp-btns-sort\x22]'),this['_list']);const _0xe6e4e6=_0x32428e['find'](_0x4b0936('0x12'))[_0x4b0936('0x1f')](()=>{const _0x3cf63f=_0x4b0936,_0x2b16af=_0xe6e4e6['prop'](_0x3cf63f('0xd'));this[_0x3cf63f('0x28')]['visibleItems'][_0x3cf63f('0x3a')](_0x3dd227=>_0x3dd227[_0x3cf63f('0x11')][_0x3cf63f('0x10')](_0x2b16af));});return this[_0x4b0936('0x8')][_0x4b0936('0x37')]({'$iptSearch':this[_0x4b0936('0x9')],'$btnReset':this[_0x4b0936('0x2')],'$btnOpen':_0x32428e[_0x4b0936('0x1c')](_0x4b0936('0x6')),'$btnToggleSummaryHidden':_0x32428e[_0x4b0936('0x1c')](_0x4b0936('0xc')),'$wrpMiniPills':_0x32428e['find'](_0x4b0936('0x3')),'namespace':'tool-actor-spell-prepared-toggler'})[_0x4b0936('0x3c')](()=>{const _0x153420=_0x4b0936;this[_0x153420('0x4')][_0x153420('0x3a')](_0x5680b4=>this[_0x153420('0x8')][_0x153420('0x46')](_0x5680b4)),this[_0x153420('0x28')][_0x153420('0x36')](this[_0x153420('0xb')],{'fnGetName':_0x15e566=>_0x15e566['name'],'fnGetValues':_0x58e2c5=>({'level':MiscUtil['get'](_0x58e2c5,'data','data',_0x153420('0x24'))||-0x1}),'fnGetData':_0x39b42f=>{const _0x373c31=_0x153420,_0xdcbc9c=$(_0x39b42f[_0x373c31('0x2f')]);return{'cbSel':_0xdcbc9c['find'](_0x373c31('0x1d'))[0x0],'$dispModified':_0xdcbc9c[_0x373c31('0x1c')](_0x373c31('0x4b'))};},'fnBindListeners':(_0x301276,_0x3d9978)=>{const _0x6f1226=_0x153420,_0x4fe1f6={'prepared':_0x3d9978[_0x6f1226('0x11')][_0x6f1226('0x11')]['preparation']['prepared']},_0x5b93b4=()=>{const _0x1ad33f=_0x6f1226;_0x301276[_0x1ad33f('0x11')][_0x1ad33f('0x7')][_0x1ad33f('0xd')]=_0x4fe1f6['prepared'],_0x301276[_0x1ad33f('0x11')]['$dispModified'][_0x1ad33f('0x14')]('ve-hidden',_0x3d9978[_0x1ad33f('0x11')]['data'][_0x1ad33f('0x2c')][_0x1ad33f('0x32')]===_0x4fe1f6['prepared']);},_0x4a5fcf=_0x2ab9b0=>{_0x4fe1f6['prepared']=_0x2ab9b0,_0x5b93b4();},_0x638a0a=()=>{const _0x389c66=_0x6f1226;_0x4fe1f6[_0x389c66('0x32')]=_0x3d9978[_0x389c66('0x11')][_0x389c66('0x11')][_0x389c66('0x2c')]['prepared'],_0x5b93b4();},_0x216b07=async()=>{const _0x7273ec=_0x6f1226;await _0x3d9978[_0x7273ec('0x2e')]({'data':{'preparation':{'prepared':_0x4fe1f6[_0x7273ec('0x32')]}}}),_0x5b93b4();};_0x301276[_0x6f1226('0x11')]['setNextState']=_0x4a5fcf,_0x301276[_0x6f1226('0x11')]['resetNextState']=_0x638a0a,_0x301276['data'][_0x6f1226('0x31')]=_0x216b07,_0x301276[_0x6f1226('0x2f')]['addEventListener'](_0x6f1226('0x1e'),_0x28c776=>{const _0x2a1c80=_0x6f1226;ListUiUtil['handleSelectClick'](this[_0x2a1c80('0x28')],_0x301276,_0x28c776,{'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x210676,_0x15c605)=>_0x210676['data'][_0x2a1c80('0x10')](_0x15c605)});});}}),this[_0x153420('0x28')][_0x153420('0x39')](),this['_pageFilter'][_0x153420('0x21')][_0x153420('0x33')](),this[_0x153420('0x8')][_0x153420('0x21')]['on'](FilterBox[_0x153420('0xe')],this[_0x153420('0x1')]['bind'](this)),this[_0x153420('0x1')]();});}[_0x1d4a5c('0x27')](){const _0x4cd9de=_0x1d4a5c;return this[_0x4cd9de('0x4')]=this['_actorItems'][_0x4cd9de('0x35')]((_0x3fdad8,_0x415aca)=>({'name':_0x3fdad8[_0x4cd9de('0x16')],'isPrepared':_0x3fdad8[_0x4cd9de('0x11')][_0x4cd9de('0x11')]['preparation'][_0x4cd9de('0x32')],'level':MiscUtil[_0x4cd9de('0x45')](_0x3fdad8,_0x4cd9de('0x11'),_0x4cd9de('0x11'),'level')||-0x1,'concentration':!!MiscUtil[_0x4cd9de('0x45')](_0x3fdad8,_0x4cd9de('0x11'),_0x4cd9de('0x11'),'components','concentration'),'v':!!MiscUtil[_0x4cd9de('0x45')](_0x3fdad8,_0x4cd9de('0x11'),_0x4cd9de('0x11'),_0x4cd9de('0x47'),'vocal'),'s':!!MiscUtil[_0x4cd9de('0x45')](_0x3fdad8,_0x4cd9de('0x11'),_0x4cd9de('0x11'),_0x4cd9de('0x47'),_0x4cd9de('0x5')),'m':!!MiscUtil['get'](_0x3fdad8,_0x4cd9de('0x11'),_0x4cd9de('0x11'),'components','material'),'ritual':!!MiscUtil[_0x4cd9de('0x45')](_0x3fdad8,_0x4cd9de('0x11'),'data',_0x4cd9de('0x47'),_0x4cd9de('0x3e')),'ix':_0x415aca})),{...super['getData'](),'rows':this['_rows']};}['close'](..._0x433d12){const _0x1ff55a=_0x1d4a5c;return this['_pageFilter'][_0x1ff55a('0x4c')](),super[_0x1ff55a('0x1b')](..._0x433d12);}}ActorSpellPreparedToggler[_0x1d4a5c('0x17')]=class extends AppFilter{constructor(){const _0x48158f=_0x1d4a5c;super(),this[_0x48158f('0x20')]=new Filter({'header':_0x48158f('0x2d'),'items':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9],'displayFn':_0x1e2588=>~_0x1e2588?PageFilterSpells[_0x48158f('0xf')](_0x1e2588):_0x48158f('0x13')}),this[_0x48158f('0x15')]=new Filter({'header':'Components\x20&\x20Miscellaneous','items':['Concentration','Verbal',_0x48158f('0x4d'),'Material',_0x48158f('0x41')],'itemSortFn':PageFilterSpells['sortMetaFilter']});}[_0x1d4a5c('0x46')](_0x3998e0,_0x29990a){const _0x19e22c=_0x1d4a5c;if(_0x29990a)return;this['_levelFilter'][_0x19e22c('0x26')](_0x3998e0[_0x19e22c('0x24')]),_0x3998e0[_0x19e22c('0x34')]=[];if(_0x3998e0[_0x19e22c('0x48')])_0x3998e0[_0x19e22c('0x34')][_0x19e22c('0x19')](_0x19e22c('0x43'));if(_0x3998e0['v'])_0x3998e0['_fMisc'][_0x19e22c('0x19')]('Verbal');if(_0x3998e0['s'])_0x3998e0[_0x19e22c('0x34')][_0x19e22c('0x19')](_0x19e22c('0x4d'));if(_0x3998e0['m'])_0x3998e0[_0x19e22c('0x34')][_0x19e22c('0x19')](_0x19e22c('0x40'));if(_0x3998e0[_0x19e22c('0x3e')])_0x3998e0[_0x19e22c('0x34')][_0x19e22c('0x19')](_0x19e22c('0x41'));}async[_0x1d4a5c('0x44')](_0x2ba075){const _0x22d374=_0x1d4a5c;_0x2ba075[_0x22d374('0x1a')]=[this['_levelFilter'],this[_0x22d374('0x15')]];}[_0x1d4a5c('0x38')](_0x54a1ad,_0x165e54){const _0x487773=_0x1d4a5c;return this['_filterBox'][_0x487773('0x38')](_0x54a1ad,_0x165e54[_0x487773('0x24')],_0x165e54[_0x487773('0x34')]);}};export{ActorSpellPreparedToggler};