const _0x4aa7=['forEach','.editor','content','/mod-template/journal/sheet.handlebars','getElementsByTagName','MODULE_NAME','_DID_PATCH','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)','cacheMethod','isGM','<iframe','OBSERVER','placeables','Set\x20Embed\x20URL','MODULE_LOCATION','<div\x20class=\x22w-100\x20flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>','get','_doEnableToggleButtons','Collapse','_handleExpandCollapse','TextEditor','fill','journal','closest','URL/iframe\x20\x22','jemb__btn-toggle','addChild','doRemovePatch','_handleConfigUpdate_displayDamageDealt_doUpdateDisplay','_handleConfigUpdate_displayDamageDealt_doRefreshTokens','sheetMode','tokens','FLAG_IFRAME_URL','</a>','info','_onUpdateBaseActor','classList','img','<button\x20class=\x22btn\x20btn-xxs\x20btn-5et\x20btn-default\x20flex-vh-center\x20mx-1\x20jemb__btn-toggle\x22\x20data-plut-is-expanded=\x22','_handleConfigUpdate_displayDamageDealt','_LAST_IS_ENABLED','test','object','entities','OWNER','fontSize','Expand','_MAX_RECURSION_DEPTH','findIndex','ENTITY_PERMISSIONS','_sheetMode','init','_CACHED_CLASS','set','ve-hidden','button[data-plut-is-expanded]','each','options','attributes','targetActorId','Failed\x20to\x20refresh\x20token\x20\x22','attr','warn','<i\x20class=\x22fas\x20fa-link\x22></i>','<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','values','</div>\x0a\x09\x09\x09\x09','contains','style','\x0a\x09\x09\x09\x09<div\x20class=\x22w-100\x20jemb__wrp-content\x20','element','shiftKey','isDisplayDamageDealt','maximize','removeAttribute','prototype','_CACHED_MOUSE_INTERACTION_MANAGER_OPTIONS','max','enrichHTML','data','JournalSheet','_onUpdateTokenActor','_getEntityPermissions','getCoreVersion','getFlag','_doPatchActorContextMenuOptions','_doPatchJournalContextMenuOptions','_HAS_PATCHED','parent','clone','actors','permission','anchor','preventDefault','Drawing','defaultOptions','pGetUserString','render','<i\x20class=\x22fas\x20fa-hammer\x22></i>','name','Token','_disableFields','notifications','data-plut-is-expanded','forceClose','Set\x20as\x20Rivet\x20Target','splice','<i\x20class=\x22fa\x20fa-caret-square-down\x22></i>','\x22.\x20This\x20can\x20be\x20changed\x20in\x20the\x20Config.','refresh','removeChild','default','visible','close','disabled','collection','user','canvasTextStyle','bringToFront','min','_plutonium_xDispDamageDealt','restoreCachedMethod','html','isEnableContentEmbeds','\x22\x20class=\x22jemb__img\x22></a></div>\x0a\x09\x09\x09</div>','_handleConfigUpdate','Rivet\x20content\x20will\x20now\x20be\x20imported\x20to\x20Actor\x20\x22','isEnableUrlEmbeds','length','next','JournalEntry','apps','bind','PERMISSION.Configure','template','rivet','toggleClass','_getEntryContextOptions','mouseInteractionManager','find','_id','windows','journalEntries','_getBtnHtmlToggle','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)\x22\x20onclick=\x22window.PlutPatcher.TextEditor.handleToggleClick(event)\x22\x20type=\x22button\x22>','showVe','_onUpdate','</div>\x0a\x09\x09\x09\x09<div\x20class=\x22flex-vh-center\x20jemb__wrp-content\x20','<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>','entityId','\x20<i>(you\x20do\x20not\x20have\x20sufficient\x20permissions\x20to\x20view\x20this\x20journal\x20entry)</i></a>','isZeroSix','floor','src','sheetClass','currentTarget','\x22\x20title=\x22','actor','image','setFlag','handleConfigUpdate'];(function(_0x3e0a66,_0x4aa788){const _0x1535bf=function(_0x259a41){while(--_0x259a41){_0x3e0a66['push'](_0x3e0a66['shift']());}};_0x1535bf(++_0x4aa788);}(_0x4aa7,0x77));const _0x1535=function(_0x3e0a66,_0x4aa788){_0x3e0a66=_0x3e0a66-0x0;let _0x1535bf=_0x4aa7[_0x3e0a66];return _0x1535bf;};const _0x54df6e=_0x1535;import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{UtilApplications}from'./UtilApplications.js';import{Config}from'./Config.js';import{UtilPatch}from'./UtilPatch.js';import{LGT}from'./Util.js';class Patcher{static[_0x54df6e('0x5d')](){const _0x23ef90=_0x54df6e;this[_0x23ef90('0x7f')](),this['_doPatchJournalContextMenuOptions'](),Hooks['on']('plutonium.configUpdate',()=>this[_0x23ef90('0x6')]()),this[_0x23ef90('0x6')](),Hooks['on']('canvasReady',()=>{const _0xc5181a=_0x23ef90;Patcher[_0xc5181a('0x88')][_0xc5181a('0x29')]();});}static['_handleConfigUpdate'](){const _0x59d58d=_0x54df6e;Patcher[_0x59d58d('0x8e')][_0x59d58d('0x29')](),Patcher['Drawing'][_0x59d58d('0x29')](),Patcher[_0x59d58d('0x3e')][_0x59d58d('0x29')](),JournalSheet_Plutonium[_0x59d58d('0x29')]();}static[_0x54df6e('0x7f')](){const _0x2d6a64=_0x54df6e,_0x259a41=ui[_0x2d6a64('0x84')][_0x2d6a64('0x12')][_0x2d6a64('0xd')](ui[_0x2d6a64('0x84')]);ui[_0x2d6a64('0x84')][_0x2d6a64('0x12')]=()=>{const _0x4855bb=_0x2d6a64,_0x1bd888=_0x259a41();return _0x1bd888['push']({'name':_0x4855bb('0x93'),'icon':_0x4855bb('0x8c'),'condition':_0x479ebd=>{const _0xae97f8=_0x4855bb,_0x2d7556=ActorDirectory['collection'][_0xae97f8('0x3a')](_0x479ebd[_0xae97f8('0x79')](_0xae97f8('0x1e')));return _0x2d7556['owner'];},'callback':_0x5c2d33=>{const _0x508678=_0x4855bb,_0x19ad8e=ActorDirectory[_0x508678('0x9d')][_0x508678('0x3a')](_0x5c2d33[_0x508678('0x79')]('entityId'));Config[_0x508678('0x5f')](_0x508678('0x10'),_0x508678('0x65'),_0x19ad8e['id']),ui[_0x508678('0x90')][_0x508678('0x4c')](_0x508678('0x7')+_0x19ad8e['id']+_0x508678('0x96'));}}),_0x1bd888;};}static[_0x54df6e('0x80')](){const _0x470fe8=_0x54df6e,_0x4b4003=ui[_0x470fe8('0x40')]['_getEntryContextOptions'][_0x470fe8('0xd')](ui[_0x470fe8('0x40')]);ui[_0x470fe8('0x40')][_0x470fe8('0x12')]=()=>{const _0x3c49a2=_0x470fe8,_0xc614c2=_0x4b4003(),_0x46a6a4=Config[_0x3c49a2('0x7d')]()[_0x3c49a2('0x20')]?'SIDEBAR.Permissions':_0x3c49a2('0xe'),_0x1eb4e6=_0xc614c2[_0x3c49a2('0x5a')](_0x1ebf5a=>_0x1ebf5a[_0x3c49a2('0x8d')]===_0x46a6a4);if(!~_0x1eb4e6)return _0xc614c2;return _0xc614c2[_0x3c49a2('0x94')](_0x1eb4e6+0x1,0x0,{'name':_0x3c49a2('0x37'),'icon':_0x3c49a2('0x69'),'condition':_0x26d1e6=>{const _0x9fc4d5=_0x3c49a2;if(!Config[_0x9fc4d5('0x3a')](_0x9fc4d5('0x17'),_0x9fc4d5('0x8')))return![];const _0x2d1364=JournalDirectory[_0x9fc4d5('0x9d')][_0x9fc4d5('0x3a')](_0x26d1e6[_0x9fc4d5('0x79')](_0x9fc4d5('0x1e')));return _0x2d1364['owner'];},'callback':async _0x2b83b5=>{const _0x1fd7ab=_0x3c49a2,_0x280117=JournalDirectory[_0x1fd7ab('0x9d')][_0x1fd7ab('0x3a')](_0x2b83b5[_0x1fd7ab('0x79')](_0x1fd7ab('0x1e'))),_0xf56625=await _0x280117[_0x1fd7ab('0x7e')](SharedConsts[_0x1fd7ab('0x2f')],Consts[_0x1fd7ab('0x4a')]);let _0x4e74d7=await InputUiUtil[_0x1fd7ab('0x8a')]({'title':'Enter\x20iframe\x20or\x20URL','default':_0xf56625||''});if(_0x4e74d7==null)return;Object['values'](_0x280117[_0x1fd7ab('0xc')])[_0x1fd7ab('0x2a')](_0x415bec=>{const _0x42ecd7=_0x1fd7ab;_0x415bec[_0x42ecd7('0x92')]?_0x415bec[_0x42ecd7('0x92')]():_0x415bec[_0x42ecd7('0x9b')]();});if(!_0x4e74d7)await _0x280117[_0x1fd7ab('0x28')](SharedConsts[_0x1fd7ab('0x2f')],Consts[_0x1fd7ab('0x4a')],'');else{_0x4e74d7=_0x4e74d7['trim']();if(_0x4e74d7['startsWith'](_0x1fd7ab('0x34')))_0x4e74d7=$(_0x4e74d7)[_0x1fd7ab('0x67')](_0x1fd7ab('0x22'));!_0x4e74d7&&(ui[_0x1fd7ab('0x90')][_0x1fd7ab('0x68')](_0x1fd7ab('0x42')+_0x4e74d7+'\x22\x20was\x20not\x20valid!'),await _0x280117['setFlag'](SharedConsts[_0x1fd7ab('0x2f')],Consts[_0x1fd7ab('0x4a')],'')),await _0x280117['setFlag'](SharedConsts['MODULE_NAME'],Consts[_0x1fd7ab('0x4a')],_0x4e74d7);}}}),_0xc614c2;};}}Patcher[_0x54df6e('0x8e')]=class{static[_0x54df6e('0x29')](){this['_handleConfigUpdate_displayDamageDealt']();}static[_0x54df6e('0x51')](){const _0x447c4d=_0x54df6e,_0x518f23=UtilPatch[_0x447c4d('0x32')](Token[_0x447c4d('0x75')],'refresh'),_0x331dec=UtilPatch[_0x447c4d('0x32')](Token[_0x447c4d('0x75')],_0x447c4d('0x1b')),_0x3a76f8=UtilPatch[_0x447c4d('0x32')](Token[_0x447c4d('0x75')],_0x447c4d('0x7b')),_0x5f04a1=UtilPatch['cacheMethod'](Token[_0x447c4d('0x75')],_0x447c4d('0x4d'));if(!Config[_0x447c4d('0x3a')]('tokens',_0x447c4d('0x72'))){UtilPatch[_0x447c4d('0x2')](Token[_0x447c4d('0x75')],_0x447c4d('0x97')),UtilPatch[_0x447c4d('0x2')](Token[_0x447c4d('0x75')],_0x447c4d('0x1b')),UtilPatch[_0x447c4d('0x2')](Token[_0x447c4d('0x75')],_0x447c4d('0x7b')),UtilPatch['restoreCachedMethod'](Token[_0x447c4d('0x75')],_0x447c4d('0x4d')),this[_0x447c4d('0x47')]({'isRemoveDisplays':!![]});return;}Token[_0x447c4d('0x75')][_0x447c4d('0x97')]=function(..._0x5e203a){const _0x2efe15=_0x447c4d;Patcher[_0x2efe15('0x8e')]['_handleConfigUpdate_displayDamageDealt_doUpdateDisplay'](this),_0x518f23[_0x2efe15('0xd')](this)(..._0x5e203a);},Token[_0x447c4d('0x75')][_0x447c4d('0x1b')]=function(..._0x6dbf48){const _0x36662f=_0x447c4d;Patcher[_0x36662f('0x8e')][_0x36662f('0x46')](this),_0x331dec[_0x36662f('0xd')](this)(..._0x6dbf48);},Token[_0x447c4d('0x75')]['_onUpdateTokenActor']=function(..._0x2bc488){const _0xece363=_0x447c4d;Patcher[_0xece363('0x8e')][_0xece363('0x46')](this),_0x3a76f8[_0xece363('0xd')](this)(..._0x2bc488);},Token[_0x447c4d('0x75')][_0x447c4d('0x4d')]=function(..._0x288f43){const _0x43c451=_0x447c4d;Patcher[_0x43c451('0x8e')][_0x43c451('0x46')](this),_0x5f04a1[_0x43c451('0xd')](this)(..._0x288f43);},this[_0x447c4d('0x47')]();}static[_0x54df6e('0x47')](_0x5e179f){const _0x40c14b=_0x54df6e;_0x5e179f=_0x5e179f||{};const _0x6aebed=MiscUtil[_0x40c14b('0x3a')](canvas,_0x40c14b('0x49'),_0x40c14b('0x36'))||[];for(const _0xe7349e of _0x6aebed){try{_0x5e179f['isRemoveDisplays']&&_0xe7349e[_0x40c14b('0x1')]&&(_0xe7349e[_0x40c14b('0x98')](_0xe7349e['_plutonium_xDispDamageDealt']),_0xe7349e[_0x40c14b('0x1')]=null),_0xe7349e[_0x40c14b('0x97')]();}catch(_0x2a3186){console[_0x40c14b('0x68')](...LGT,_0x40c14b('0x66')+_0xe7349e[_0x40c14b('0x15')]+'\x22!',_0x2a3186);}}}static['_handleConfigUpdate_displayDamageDealt_doUpdateDisplay'](_0x150aea){const _0x3e8a11=_0x54df6e;this['_handleConfigUpdate_displayDamageDealt_doAddDisplay'](_0x150aea);const _0x3fa1e4=MiscUtil[_0x3e8a11('0x3a')](_0x150aea['actor'],'data',_0x3e8a11('0x79'),_0x3e8a11('0x64'),'hp','max')||0x0,_0x9ee70e=MiscUtil[_0x3e8a11('0x3a')](_0x150aea[_0x3e8a11('0x26')],_0x3e8a11('0x79'),_0x3e8a11('0x79'),_0x3e8a11('0x64'),'hp','value')||0x0,_0xc0fb1f=Math[_0x3e8a11('0x0')](_0x3fa1e4,Math['max'](0x0,_0x3fa1e4-_0x9ee70e));_0x150aea['_plutonium_xDispDamageDealt']['text']=''+_0xc0fb1f,_0x150aea[_0x3e8a11('0x1')][_0x3e8a11('0x9a')]=!!_0xc0fb1f;if(_0x9ee70e<=Math[_0x3e8a11('0x21')](_0x3fa1e4/0x2))_0x150aea['_plutonium_xDispDamageDealt'][_0x3e8a11('0x6e')][_0x3e8a11('0x3f')]=0xff0000;else _0x150aea['_plutonium_xDispDamageDealt']['style']['fill']=0xffffff;}static['_handleConfigUpdate_displayDamageDealt_doAddDisplay'](_0x5980a2){const _0x41f63d=_0x54df6e;if(_0x5980a2[_0x41f63d('0x1')]&&_0x5980a2[_0x41f63d('0x1')][_0x41f63d('0x82')])return;_0x5980a2[_0x41f63d('0x1')]&&!_0x5980a2[_0x41f63d('0x1')]['parent']&&(_0x5980a2[_0x41f63d('0x98')](_0x5980a2['_plutonium_xDispDamageDealt']),_0x5980a2[_0x41f63d('0x1')]=null),_0x5980a2['_plutonium_xDispDamageDealt']=new PIXI['Text']('',CONFIG[_0x41f63d('0x9f')][_0x41f63d('0x83')]()),_0x5980a2[_0x41f63d('0x1')]['style'][_0x41f63d('0x57')]=0x18,_0x5980a2['_plutonium_xDispDamageDealt'][_0x41f63d('0x86')][_0x41f63d('0x5f')](0x1,0x1),_0x5980a2['_plutonium_xDispDamageDealt']['position'][_0x41f63d('0x5f')](_0x5980a2['w']-0x3,_0x5980a2['h']-0x1),_0x5980a2[_0x41f63d('0x44')](_0x5980a2['_plutonium_xDispDamageDealt']);}},Patcher['Drawing']=class{static[_0x54df6e('0x29')](){const _0x13b517=_0x54df6e;if(!MiscUtil['get'](canvas,_0x13b517('0x13'),_0x13b517('0x63')))return;if(Config['get']('ui','isFixDrawingFreehandMinDistance')){if(Patcher[_0x13b517('0x88')][_0x13b517('0x76')]==null)Patcher[_0x13b517('0x88')]['_CACHED_MOUSE_INTERACTION_MANAGER_OPTIONS']=canvas[_0x13b517('0x13')][_0x13b517('0x63')];canvas[_0x13b517('0x13')][_0x13b517('0x63')]['dragResistance']=0x1;}else{if(Patcher[_0x13b517('0x88')][_0x13b517('0x76')]!=null)canvas['mouseInteractionManager']['options']=Patcher[_0x13b517('0x88')][_0x13b517('0x76')];}}},Patcher[_0x54df6e('0x88')][_0x54df6e('0x76')]=null,Patcher[_0x54df6e('0x3e')]=class{static[_0x54df6e('0x29')](){const _0x19c992=_0x54df6e,_0x4c12bb=UtilPatch[_0x19c992('0x32')](TextEditor,_0x19c992('0x78'),{'isBind':!![]}),_0x2ba753=UtilPatch['cacheMethod'](JournalSheet['prototype'],_0x19c992('0x8f'));if(!Config[_0x19c992('0x3a')](_0x19c992('0x17'),_0x19c992('0x4'))){UtilPatch[_0x19c992('0x2')](TextEditor,_0x19c992('0x78')),UtilPatch[_0x19c992('0x2')](JournalSheet[_0x19c992('0x75')],_0x19c992('0x8f'));return;}TextEditor[_0x19c992('0x78')]=Patcher[_0x19c992('0x3e')][_0x19c992('0x78')][_0x19c992('0xd')](this,_0x4c12bb),JournalSheet['prototype'][_0x19c992('0x8f')]=function(..._0x45ba6b){const _0xd3d4df=_0x19c992;_0x2ba753[_0xd3d4df('0xd')](this)(..._0x45ba6b),Patcher[_0xd3d4df('0x3e')][_0xd3d4df('0x3b')](..._0x45ba6b);};}static[_0x54df6e('0x78')](_0x2519f1,_0xb4587f,{secrets:secrets=![],entities:entities=!![],links:links=!![],rolls:rolls=!![],rollData:rollData=null}={},_0x5eaedc=0x0){const _0x4817cd={'secrets':secrets,'entities':entities,'links':links,'rolls':rolls,'rollData':rollData};_0xb4587f=_0x2519f1(_0xb4587f,_0x4817cd);if(!entities)return _0xb4587f;return _0xb4587f=_0xb4587f['replace'](/@Embed(JournalEntry)\[([^\]]+)](?:{([^}]+)})?/g,(..._0x1c3dd4)=>this['_getEntityEmbed'](_0x4817cd,_0x5eaedc,..._0x1c3dd4)),_0xb4587f;}static['_getEntityEmbed'](_0x33705e,_0x395c56,_0x313c7e,_0x247c99,_0x1a3cdd,_0x5d39ae){const _0x440079=_0x54df6e,_0x127393=CONFIG[_0x247c99],_0x1ea2e4=_0x127393['entityClass'][_0x440079('0x9d')],_0x5d4b60=this['_getEntity'](_0x1ea2e4,_0x1a3cdd);if(!_0x5d4b60)return _0x440079('0x6a')+(_0x5d39ae||_0x1a3cdd)+_0x440079('0x4b');if(this['_getEntityPermissions'](_0x5d4b60)<CONST['ENTITY_PERMISSIONS'][_0x440079('0x35')])return _0x440079('0x6a')+(_0x5d39ae||_0x1a3cdd)+_0x440079('0x1f');const _0x5db083=TextEditor['_replaceEntityLink'](_0x313c7e,_0x247c99,_0x1a3cdd,_0x5d39ae),_0xbc939e=Config[_0x440079('0x3a')](_0x440079('0x17'),'isAutoExpandContentEmbeds');if(_0x5d4b60['sheet'][_0x440079('0x5c')]===_0x440079('0x27')){const _0xaac118=_0x5d4b60['data'][_0x440079('0x4f')];return _0x440079('0x39')+_0x5db083+this['_getBtnHtmlToggle'](_0xbc939e)+_0x440079('0x1c')+(_0xbc939e?'':_0x440079('0x60'))+'\x22><a\x20target=\x22_blank\x20w-100\x22\x20href=\x22'+_0xaac118+'\x22><img\x20src=\x22'+_0xaac118+_0x440079('0x5');}else{const _0x40a25e=_0x395c56===Patcher[_0x440079('0x3e')][_0x440079('0x59')],_0xdb47e6=_0x40a25e?_0x5d4b60[_0x440079('0x79')]['content']:TextEditor['enrichHTML'](_0x5d4b60[_0x440079('0x79')][_0x440079('0x2c')],_0x33705e,_0x395c56+0x1);return _0x440079('0x39')+_0x5db083+this['_getBtnHtmlToggle'](_0xbc939e)+_0x440079('0x6c')+(_0x40a25e?'<div\x20class=\x22mb-1\x20bold\x20veapp__msg-error\x22>Warning:\x20too\x20many\x20recursive\x20embeds!\x20Have\x20you\x20made\x20an\x20infinite\x20loop?</div>':'')+_0x440079('0x6f')+(_0xbc939e?'':_0x440079('0x60'))+'\x22>'+_0xdb47e6+'</div>\x0a\x09\x09\x09</div>';}}static[_0x54df6e('0x7c')](_0x3be87b){const _0x47aacf=_0x54df6e;if(game[_0x47aacf('0x9e')][_0x47aacf('0x33')])return CONST[_0x47aacf('0x5b')][_0x47aacf('0x56')];return Math[_0x47aacf('0x77')](_0x3be87b[_0x47aacf('0x79')]['permission'][game[_0x47aacf('0x9e')]['_id']],_0x3be87b['data'][_0x47aacf('0x85')][_0x47aacf('0x99')]);}static['_getEntity'](_0x1103eb,_0x5e4191){const _0x3623d8=_0x54df6e;let _0x3c318c=null;if(/^[a-zA-Z0-9]{16}$/[_0x3623d8('0x53')](_0x5e4191))_0x3c318c=_0x1103eb[_0x3623d8('0x3a')](_0x5e4191);if(!_0x3c318c)_0x3c318c=_0x1103eb[_0x3623d8('0x55')][_0x3623d8('0x14')](_0x120301=>_0x120301[_0x3623d8('0x79')][_0x3623d8('0x8d')]===_0x5e4191);return _0x3c318c;}static['handleToggleClick'](_0xebf088){const _0x29764b=_0x54df6e,_0x222c7c=$(_0xebf088[_0x29764b('0x24')]),_0xc477e2=_0x222c7c[_0x29764b('0x67')](_0x29764b('0x91'))==='1';if(_0xebf088[_0x29764b('0x71')]){_0xebf088[_0x29764b('0x87')]();const _0x56ef98=_0x222c7c[_0x29764b('0x41')](_0x29764b('0x2b'));_0x56ef98['find'](_0x29764b('0x61'))[_0x29764b('0x62')]((_0x130c17,_0x75f38d)=>this[_0x29764b('0x3d')]($(_0x75f38d),_0xc477e2));return;}this[_0x29764b('0x3d')](_0x222c7c,_0xc477e2);}static[_0x54df6e('0x3d')](_0xddc00c,_0xffe1ba){const _0x44ac3b=_0x54df6e,_0x1e0d8a=_0xddc00c['parent']()[_0x44ac3b('0xa')]();_0x1e0d8a[_0x44ac3b('0x11')](_0x44ac3b('0x60'),_0xffe1ba),_0xddc00c[_0x44ac3b('0x67')]('data-plut-is-expanded',_0xffe1ba?'0':'1')[_0x44ac3b('0x3')](_0xffe1ba?_0x44ac3b('0x1d'):_0x44ac3b('0x95'))['title']((_0xffe1ba?'Expand':_0x44ac3b('0x3c'))+_0x44ac3b('0x31'));}static[_0x54df6e('0x18')](_0xaf90ac){const _0x26ac02=_0x54df6e;return _0x26ac02('0x50')+(_0xaf90ac?0x1:0x0)+_0x26ac02('0x25')+(_0xaf90ac?_0x26ac02('0x3c'):_0x26ac02('0x58'))+_0x26ac02('0x19')+(_0xaf90ac?_0x26ac02('0x95'):'<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>')+'</button>';}static[_0x54df6e('0x3b')](_0x1ddf2e){const _0x935323=_0x54df6e;for(let _0xe45f85 of _0x1ddf2e[_0x935323('0x2e')]('BUTTON')){if(_0xe45f85[_0x935323('0x4e')][_0x935323('0x6d')](_0x935323('0x43')))_0xe45f85[_0x935323('0x74')](_0x935323('0x9c'));}}},Patcher['TextEditor'][_0x54df6e('0x59')]=0x45;class JournalSheet_Plutonium extends JournalSheet{static['handleConfigUpdate'](){const _0x4eb195=_0x54df6e,_0x266fd4=Config[_0x4eb195('0x3a')](_0x4eb195('0x17'),_0x4eb195('0x8'));if(JournalSheet_Plutonium[_0x4eb195('0x52')]===_0x266fd4)return;JournalSheet_Plutonium['_LAST_IS_ENABLED']=_0x266fd4;if(_0x266fd4)JournalSheet_Plutonium['doApplyPatch']();else JournalSheet_Plutonium[_0x4eb195('0x45')]();}static['doApplyPatch'](){const _0x79bf1c=_0x54df6e;JournalSheet_Plutonium['_HAS_PATCHED']=!![],JournalSheet=JournalSheet_Plutonium,CONFIG[_0x79bf1c('0xb')][_0x79bf1c('0x23')]=JournalSheet_Plutonium;}static[_0x54df6e('0x45')](){const _0x1a69f3=_0x54df6e;if(!JournalSheet_Plutonium[_0x1a69f3('0x81')])return;JournalSheet=JournalSheet_Plutonium[_0x1a69f3('0x5e')],CONFIG[_0x1a69f3('0xb')][_0x1a69f3('0x23')]=JournalSheet_Plutonium[_0x1a69f3('0x5e')],Object[_0x1a69f3('0x6b')](ui[_0x1a69f3('0x16')])[_0x1a69f3('0x2a')](_0x475b64=>{const _0xe0160b=_0x1a69f3;_0x475b64['constructor']===JournalSheet_Plutonium&&_0x475b64['object'][_0xe0160b('0x7e')](SharedConsts['MODULE_NAME'],Consts[_0xe0160b('0x4a')])&&_0x475b64[_0xe0160b('0x92')]();});}static get['name'](){const _0x3e6677=_0x54df6e;return _0x3e6677('0x7a');}static get['defaultOptions'](){const _0x3b2a4b=_0x54df6e;return{...super[_0x3b2a4b('0x89')],'template':SharedConsts[_0x3b2a4b('0x38')]+_0x3b2a4b('0x2d')};}get[_0x54df6e('0xf')](){const _0x3f9171=_0x54df6e;if(this[_0x3f9171('0x5c')]===_0x3f9171('0x27'))return ImagePopout['defaultOptions'][_0x3f9171('0xf')];return SharedConsts['MODULE_LOCATION']+_0x3f9171('0x2d');}[_0x54df6e('0x9b')](..._0x1c2a50){const _0x19b3b6=_0x54df6e;if(this['object']&&this[_0x19b3b6('0x54')][_0x19b3b6('0x7e')](SharedConsts[_0x19b3b6('0x2f')],Consts[_0x19b3b6('0x4a')])){this[_0x19b3b6('0x70')]['hideVe']();return;}return super['close'](..._0x1c2a50);}['forceClose'](){const _0x4c1f0c=_0x54df6e;return super[_0x4c1f0c('0x9b')]();}[_0x54df6e('0x8b')](..._0x50549f){const _0x26e7fc=_0x54df6e;if(_0x50549f[0x1]&&_0x50549f[0x1][_0x26e7fc('0x48')]!==this[_0x26e7fc('0x5c')])return super[_0x26e7fc('0x8b')](..._0x50549f);if(this['element']&&this[_0x26e7fc('0x70')][_0x26e7fc('0x9')]){this['element'][_0x26e7fc('0x1a')](),this[_0x26e7fc('0x73')](),UtilApplications[_0x26e7fc('0xa0')](this);return;}return super['render'](..._0x50549f);}}JournalSheet_Plutonium[_0x54df6e('0x30')]=![],JournalSheet_Plutonium['_CACHED_CLASS']=JournalSheet,JournalSheet_Plutonium['_LAST_IS_ENABLED']=null,window['PlutPatcher']=Patcher;export{Patcher};