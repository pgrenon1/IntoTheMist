const _0x2e22=['actor','_isCancelled','position','Failed\x20to\x20import\x20\x22','\x22\x20to\x20actor\x20\x22','error','options','titleInitial','Import\x20of\x20','.window-header\x20.window-title','fnGetRowOverwriteDuplicateText','TASK_EXIT_COMPLETE_DATA_ONLY','TASK_EXIT_FAILED','name','element','$setBarProgress','render','TaskRunner','length','taskExitComplete','</div>','_element','\x20was\x20cancelled.','entities','yes','getFolderList','_fnGetRowSuccessText','fnGetRowCancelText','parent','content','_getHeaderButtons','activateListeners','\x22\x20failed','status',',\x20overwriting\x20existing\x20(duplicate\x20found).','addClass','round','TASK_EXIT_COMPLETE','[data-name=\x22disp-progress\x22]','taskExitCancelled','imported','text','doShowImportedNotification','keys','sort','\x20was\x20skipped\x20(duplicate\x20found).','_$wrpConsole','_fnGetRowSkippedDuplicateText','faIcon','prependTo','type','_$dispProgress','join','confirmText','appendTo','close','Importing...','Importing\x20','reverse','TASK_EXIT_SKIPPED_DUPLICATE','depth','STR_SEE_CONSOLE','entity','/template/TaskRunner.handlebars','find','windows','TASK_EXIT_CANCELLED','setApplicationTitle','findIndex','_fnGetRowOverwriteDuplicateText','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','focus','titleComplete','Import\x20Complete','_fnGetRowErrorText','min','pRun','<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>','isAddTrailingSlash','_fnGetRowCancelText','taskExitCompleteOverwrite','taskExitCompleteDataOnly','<div\x20class=\x22italic\x22>','bringToFront','pDelay','taskExitCompleteFailed','pGetConfirmation','<i\x20class=\x22fas\x20','_tasks','Could\x20not\x20display\x20import\x20notificationsâ€”import\x20status\x20was\x20not\x20defined.\x20This\x20is\x20a\x20bug!','Import\x20of\x20\x22','fnGetRowErrorText','undefined','[data-name=\x22wrp-console\x22]','warn','data','folder','off','notifications','relative','collection','\x22\x20cancelled.','_fnGetRowRunningText','removeClass','getCleanEntityName','fnGetPromise','\x22!\x20','[name=\x22btn-cancel\x22]','Cancel','_$btnCancel','dismissText','fnGetRowSuccessText','_maxZ','isForceClose','info','italic','title','fnGetRowRunningText','_titleCompelte','css','getFolderPath','veapp__msg-error\x20bold','filter','Imported\x20','ascSort','Task\x20\x22','push'];(function(_0x4b9e60,_0x2e2213){const _0x40373d=function(_0x467fe9){while(--_0x467fe9){_0x4b9e60['push'](_0x4b9e60['shift']());}};_0x40373d(++_0x2e2213);}(_0x2e22,0x70));const _0x4037=function(_0x4b9e60,_0x2e2213){_0x4b9e60=_0x4b9e60-0x0;let _0x40373d=_0x2e22[_0x4b9e60];return _0x40373d;};const _0x12b048=_0x4037;'use strict';import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';class UtilApplications{static async['$pGetAddAppLoadingOverlay'](_0x467fe9){const _0x341d95=_0x4037;_0x467fe9['css'](_0x341d95('0x11'),_0x341d95('0x72'));const _0x40b507=$(_0x341d95('0x5c'))[_0x341d95('0x56')]()[_0x341d95('0x45')](_0x467fe9);return await MiscUtil[_0x341d95('0x63')](0x5),_0x40b507;}static[_0x12b048('0x65')](_0x4bbc5c){return _0x4bbc5c=_0x4bbc5c||{},new Promise(_0x5fa20b=>{const _0x30e76f=_0x4037;new Dialog({'title':_0x4bbc5c[_0x30e76f('0x4')],'content':_0x4bbc5c[_0x30e76f('0x2c')],'buttons':{'yes':{'icon':_0x30e76f('0x66')+_0x4bbc5c[_0x30e76f('0x3f')]+'\x22></i>','label':_0x4bbc5c[_0x30e76f('0x44')],'callback':()=>_0x5fa20b(!![])},'no':{'icon':'<i\x20class=\x22fas\x20fa-times\x22></i>','label':_0x4bbc5c[_0x30e76f('0x7d')]||_0x30e76f('0x7b'),'callback':()=>_0x5fa20b(![])}},'default':_0x30e76f('0x27')})[_0x30e76f('0x1f')](!![]);});}static[_0x12b048('0x77')](_0x21ea21){return _0x21ea21||'\x20';}static[_0x12b048('0x8')](_0x598aba,_0x4cac56){const _0x5a4d47=_0x12b048;_0x4cac56=_0x4cac56||{};if(!_0x598aba)return null;const _0x5089c5=[];if(_0x598aba[_0x5a4d47('0x6f')]){_0x5089c5[_0x5a4d47('0xe')](_0x598aba['folder'][_0x5a4d47('0x6e')][_0x5a4d47('0x1c')]);let _0x333873=_0x598aba[_0x5a4d47('0x6f')][_0x5a4d47('0x2b')];while(_0x333873&&_0x333873['id']){_0x5089c5[_0x5a4d47('0xe')](_0x333873[_0x5a4d47('0x6e')][_0x5a4d47('0x1c')]),_0x333873=_0x333873['parent'];}}const _0x464f92=_0x5089c5[_0x5a4d47('0x49')]()[_0x5a4d47('0x43')]('/');if(_0x464f92)return _0x4cac56[_0x5a4d47('0x5d')]?_0x464f92+'/':_0x464f92;return null;}static['$setBarProgress'](_0x84e72a,_0x4f9ab3){const _0x266d42=_0x12b048;_0x4f9ab3=Math['max'](0x0,Math[_0x266d42('0x5a')](_0x4f9ab3,0x1)),_0x84e72a['css']({'width':Math[_0x266d42('0x33')](_0x4f9ab3*0x64)+'%'});}static async['pRunTasks'](_0x2c67e8,_0x5c5469){const _0xff93a6=_0x12b048;_0x5c5469=_0x5c5469||[];const _0xa36269=new UtilApplications[(_0xff93a6('0x20'))](_0x2c67e8,_0x5c5469);_0xa36269[_0xff93a6('0x1f')](!![]),await _0xa36269['pRun']();}static[_0x12b048('0x28')](_0x443c76){const _0xa9812=_0x12b048,_0x2d5c80=(_0x2cfa51,_0x44a00a)=>SortUtil[_0xa9812('0xc')](_0x2cfa51[_0xa9812('0x6e')]['sort'],_0x44a00a[_0xa9812('0x6e')]['sort']),_0x5d0520=Folder[_0xa9812('0x73')][_0xa9812('0x26')][_0xa9812('0xa')](_0x58d8ac=>_0x58d8ac[_0xa9812('0x6e')][_0xa9812('0x41')]===_0x443c76)['sort'](_0x2d5c80);if(!_0x5d0520['length'])return _0x5d0520;const _0x1487f4=Math['max'](..._0x5d0520['map'](_0x47e083=>_0x47e083[_0xa9812('0x4b')])),_0x2fd978=_0x5d0520[_0xa9812('0xa')](_0x4ae087=>_0x4ae087[_0xa9812('0x4b')]===0x1);if(_0x2fd978[_0xa9812('0x21')]===_0x5d0520['length'])return _0x2fd978;for(let _0x35978e=0x2;_0x35978e<_0x1487f4+0x1;++_0x35978e){const _0x4fcb70=_0x5d0520[_0xa9812('0xa')](_0x4c2bab=>_0x4c2bab[_0xa9812('0x4b')]===_0x35978e)[_0xa9812('0x3b')](_0x2d5c80)['reverse']();_0x4fcb70['forEach'](_0xb3f233=>{const _0x3e3ab7=_0xa9812,_0x2d7bbc=_0x2fd978[_0x3e3ab7('0x53')](_0x545869=>_0x545869['id']===_0xb3f233[_0x3e3ab7('0x2b')]['id']);if(~_0x2d7bbc)_0x2fd978['splice'](_0x2d7bbc+0x1,0x0,_0xb3f233);});}return _0x2fd978;}static[_0x12b048('0x62')](_0x322e33){const _0x549150=_0x12b048;if(!_0x322e33['_element'])return;if(typeof _maxZ===_0x549150('0x6b'))window[_0x549150('0x0')]=0x64;if(Object[_0x549150('0x3a')](ui[_0x549150('0x50')])[_0x549150('0x21')]===0x0)_maxZ=0x64;_0x322e33[_0x549150('0x24')][_0x549150('0x7')]({'zIndex':Math[_0x549150('0x5a')](++_maxZ,Consts['Z_INDEX_MAX_FOUNDRY'])});}static[_0x12b048('0x39')](_0x4f5187){const _0xea2b36=_0x12b048;if(!_0x4f5187)return;if(!_0x4f5187[_0xea2b36('0x30')]){_0x4f5187[_0xea2b36('0x30')]=UtilApplications[_0xea2b36('0x34')];const _0x215db7=_0xea2b36('0x68');ui[_0xea2b36('0x71')][_0xea2b36('0x14')](_0x215db7),console[_0xea2b36('0x14')](new Error(_0x215db7));}const _0x5cf009=_0x4f5187[_0xea2b36('0x1c')]||_0x4f5187[_0xea2b36('0x4d')]?.[_0xea2b36('0x1c')]||_0x4f5187[_0xea2b36('0x37')]?.[_0xea2b36('0x1c')]||_0x4f5187[_0xea2b36('0x37')]?.[_0xea2b36('0x6e')]?.['name']||'(Unnamed\x20Entity)';if(_0x4f5187['status']===UtilApplications[_0xea2b36('0x51')])return ui[_0xea2b36('0x71')][_0xea2b36('0x6d')](_0xea2b36('0x69')+_0x5cf009+_0xea2b36('0x74'));else{if(_0x4f5187[_0xea2b36('0x30')]===UtilApplications[_0xea2b36('0x4a')])return ui['notifications'][_0xea2b36('0x6d')](_0xea2b36('0x69')+_0x5cf009+'\x22\x20was\x20skipped\x20(duplicate\x20found).');else{if(_0x4f5187['status']===UtilApplications[_0xea2b36('0x1b')])return ui[_0xea2b36('0x71')][_0xea2b36('0x14')](_0xea2b36('0x12')+_0x5cf009+_0xea2b36('0x79')+VeCt[_0xea2b36('0x4c')]);}}if(_0x4f5187[_0xea2b36('0x37')][_0xea2b36('0xf')])ui['notifications'][_0xea2b36('0x2')]('Imported\x20\x22'+_0x5cf009+_0xea2b36('0x13')+_0x4f5187[_0xea2b36('0x37')][_0xea2b36('0xf')]['name']+'\x22.');else{const _0x296d77=_0x4f5187?.[_0xea2b36('0x37')]?.['folder']?_0x4f5187['imported'][_0xea2b36('0x6f')][_0xea2b36('0x6e')][_0xea2b36('0x41')]:null,_0x4fa613=UtilApplications['getFolderPath'](_0x4f5187[_0xea2b36('0x37')]);ui[_0xea2b36('0x71')][_0xea2b36('0x2')]('Imported\x20\x22'+_0x5cf009+'\x22'+(_0x296d77&&_0x4fa613?'\x20to\x20'+_0x296d77+'\x20folder\x20\x22'+_0x4fa613+'\x22.':''));}}static[_0x12b048('0x52')](_0x44e91b,_0x4a056f){const _0x118f83=_0x12b048;_0x44e91b[_0x118f83('0x15')]['title']=_0x4a056f,_0x44e91b[_0x118f83('0x1d')][_0x118f83('0x4f')]('.window-title')[_0x118f83('0x38')](_0x44e91b[_0x118f83('0x4')]);}}UtilApplications[_0x12b048('0x34')]=Symbol(_0x12b048('0x22')),UtilApplications['TASK_EXIT_CANCELLED']=Symbol(_0x12b048('0x36')),UtilApplications[_0x12b048('0x4a')]=Symbol('taskExitSkippedDuplicate'),UtilApplications[_0x12b048('0x55')]=Symbol(_0x12b048('0x5f')),UtilApplications[_0x12b048('0x1b')]=Symbol(_0x12b048('0x64')),UtilApplications[_0x12b048('0x1a')]=Symbol(_0x12b048('0x60')),UtilApplications[_0x12b048('0x20')]=class extends Application{constructor(_0x2f3485,_0x48d81e){const _0x453831=_0x12b048;_0x48d81e=_0x48d81e||{},super({'title':_0x48d81e[_0x453831('0x16')]||_0x453831('0x47'),'width':0x1e0,'template':SharedConsts['MODULE_LOCATION']+_0x453831('0x4e'),'height':0x140,'resizable':!![]}),this['_tasks']=_0x2f3485,this[_0x453831('0x6')]=_0x48d81e[_0x453831('0x57')]||_0x453831('0x58'),this[_0x453831('0x75')]=_0x48d81e[_0x453831('0x5')]||(_0x2fadb4=>_0x453831('0x48')+_0x2fadb4+'...'),this[_0x453831('0x29')]=_0x48d81e[_0x453831('0x7e')]||(_0x50a190=>_0x453831('0xb')+_0x50a190+'.'),this['_fnGetRowErrorText']=_0x48d81e[_0x453831('0x6a')]||(_0x31da3b=>'Failed\x20to\x20import\x20'+_0x31da3b+'!\x20'+VeCt['STR_SEE_CONSOLE']),this[_0x453831('0x5e')]=_0x48d81e[_0x453831('0x2a')]||(_0x19b82a=>_0x453831('0x17')+_0x19b82a+_0x453831('0x25')),this[_0x453831('0x3e')]=_0x48d81e['fnGetRowSkippedDuplicateText']||(_0x156f5f=>_0x453831('0x17')+_0x156f5f+_0x453831('0x3c')),this[_0x453831('0x54')]=_0x48d81e[_0x453831('0x19')]||(_0x12c48b=>_0x453831('0xb')+_0x12c48b+_0x453831('0x31')),this['_isForceClose']=!!_0x48d81e[_0x453831('0x1')],this[_0x453831('0x10')]=![],this[_0x453831('0x42')]=null,this[_0x453831('0x3d')]=null,this[_0x453831('0x7c')]=null;}[_0x12b048('0x2e')](_0x374130){const _0x3424ed=_0x12b048;super[_0x3424ed('0x2e')](_0x374130),this[_0x3424ed('0x42')]=_0x374130['find'](_0x3424ed('0x35')),this[_0x3424ed('0x3d')]=_0x374130['find'](_0x3424ed('0x6c')),this['_$btnCancel']=_0x374130['find'](_0x3424ed('0x7a'))['click'](()=>this[_0x3424ed('0x10')]=!![]);}async[_0x12b048('0x5b')](){const _0x5c5925=_0x12b048;while(this['_$btnCancel']==null)await MiscUtil[_0x5c5925('0x63')](0x19);try{const _0x19de42=this[_0x5c5925('0x67')]['length'];for(let _0x1e35c5=0x0;_0x1e35c5<_0x19de42;++_0x1e35c5){const _0x2174a8=this[_0x5c5925('0x67')][_0x1e35c5];if(this[_0x5c5925('0x10')])break;const _0x2a5dd1=$(_0x5c5925('0x61')+this[_0x5c5925('0x75')](_0x2174a8[_0x5c5925('0x1c')])+_0x5c5925('0x23'));$$`<div class="mx-1 row split imp__task-row flex-v-center">${_0x2a5dd1}<div>(${_0x1e35c5+0x1}/${_0x19de42})</div></div>`[_0x5c5925('0x40')](this['_$wrpConsole']);try{const _0x2a2286=await _0x2174a8[_0x5c5925('0x78')]();switch(_0x2a2286?.[_0x5c5925('0x30')]||UtilApplications[_0x5c5925('0x34')]){case UtilApplications[_0x5c5925('0x51')]:_0x2a5dd1[_0x5c5925('0x38')](this[_0x5c5925('0x5e')](_0x2174a8[_0x5c5925('0x1c')]));break;case UtilApplications[_0x5c5925('0x4a')]:_0x2a5dd1[_0x5c5925('0x38')](this[_0x5c5925('0x3e')](_0x2174a8[_0x5c5925('0x1c')]));break;case UtilApplications[_0x5c5925('0x55')]:_0x2a5dd1[_0x5c5925('0x38')](this['_fnGetRowOverwriteDuplicateText'](_0x2174a8[_0x5c5925('0x1c')]));break;case UtilApplications[_0x5c5925('0x1b')]:_0x2a5dd1['addClass'](_0x5c5925('0x9'))['removeClass'](_0x5c5925('0x3'))['text'](this[_0x5c5925('0x59')](_0x2174a8[_0x5c5925('0x1c')]));break;case UtilApplications[_0x5c5925('0x34')]:default:_0x2a5dd1[_0x5c5925('0x38')](this[_0x5c5925('0x29')](_0x2174a8[_0x5c5925('0x1c')]));break;}}catch(_0x568a97){_0x2a5dd1[_0x5c5925('0x32')](_0x5c5925('0x9'))[_0x5c5925('0x76')](_0x5c5925('0x3'))[_0x5c5925('0x38')](this[_0x5c5925('0x59')](_0x2174a8[_0x5c5925('0x1c')])),console['error'](...LGT,_0x5c5925('0xd')+_0x2174a8[_0x5c5925('0x1c')]+_0x5c5925('0x2f'),_0x568a97);}UtilApplications[_0x5c5925('0x1e')](this[_0x5c5925('0x42')],(_0x1e35c5+0x1)/_0x19de42);}UtilApplications['$setBarProgress'](this[_0x5c5925('0x42')],0x1);if(this['_isForceClose'])this['close']();else this[_0x5c5925('0x1d')]['find'](_0x5c5925('0x18'))[_0x5c5925('0x38')](this[_0x5c5925('0x6')]);}catch(_0x27bffe){console[_0x5c5925('0x14')](...LGT,'TaskRunner\x20died!',_0x27bffe),ui[_0x5c5925('0x71')][_0x5c5925('0x14')]('Critical\x20failure!\x20'+VeCt[_0x5c5925('0x4c')]);}this[_0x5c5925('0x7c')][_0x5c5925('0x70')]('click')[_0x5c5925('0x38')]('Close')['click'](()=>this[_0x5c5925('0x46')]());}[_0x12b048('0x2d')](){return[];}};export{UtilApplications};