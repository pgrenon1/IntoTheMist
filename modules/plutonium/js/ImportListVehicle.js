const _0x27b0=['sourceJsonToFull','SRD','actions','_activateListeners_absorbListItems','getShipActionItems','_pImportEntry_fillData_Cargo','action','CREATURE','absorbFnBindListenersRadio','_titleSearch','URL_TO_HASH_BUILDER','isImportBio','trait','actors','Import\x20Vehicles','hull','DataSourceUrl','source','med','_titleButtonRun','pGetSources','_pImportEntry_pGetImportMetadata','_pImportEntry_pFillItems_ship','Unhandled\x20vehicle\x20type\x20\x22','reaction','/media/icon/gears.svg','ImportEntryOpts','size','doAbsorbItems','folder','_pImportEntry_pGetFolderId','sourceClassName','getSourceWithPagePart','_addInfWarReaction','sort','isUseTokenImageAsPortrait','get','pGetHomebrewSources','_pImportEntry_fillData_Attributes','map','_isPreviewable','spelldc','5etools','bonuses','_pImportEntry_pFillItems_infWar','copy','control','_addShipOther','forEach','_addInfWarActionStation','cargo','vehicles','_addInfWarTrait','_pImportEntry_fillData_Details','dimensions','push','_content','Upload\x20File','vehicle','_isRadio','permission','INFWAR','sourceLong','_pack','speed','PG_VEHICLES','getShipEquipmentItem','MODULE_NAME','Source','other','SOURCE_TYP_CUSTOM','getShipCreatureCapacity','biography','actionThresholds','_list','getAbilityModNumber','_addShipAction','_addShipEquipment','slice','SHIP','text-center','permissions','_getBiographyValue','attributes','actor','\x20miles\x20per\x20hour\x20(','capCargo','vehicleType','pAddActorItems','entries','tokenUrl','\x20by\x20','isTemp','pGetFluff','weapon','DataSourceFile','pace','DATA_URL_VEHICLES','getShipOtherItem','fluff','SOURCE_TYP_OFFICIAL_ALL','ascSort','items','name','getData','\x20miles\x20per\x20day)','sourceJsonToColor','isStreamerMode','movement','actionStation','length','absorbFnBindListeners','getShipWeaponItem','_pImportEntry_pFillItems','data','_pImportEntry_fillData_Currency','mutateForFilters','_pImportEntry_pFillToken','string','importVehicle','Vehicles','pImportEntry','\x20ft.','feat','VET_SIZE_TO_ABV'];(function(_0x25fd6a,_0x27b0d2){const _0x4f87c6=function(_0x485efe){while(--_0x485efe){_0x25fd6a['push'](_0x25fd6a['shift']());}};_0x4f87c6(++_0x27b0d2);}(_0x27b0,0xeb));const _0x4f87=function(_0x25fd6a,_0x27b0d2){_0x25fd6a=_0x25fd6a-0x0;let _0x4f87c6=_0x27b0[_0x25fd6a];return _0x4f87c6;};const _0x474d00=_0x4f87;'use strict';import{ImportList}from'./ImportList.js';import{ImportListActor}from'./ImportListActor.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';import{ImportListCreature}from'./ImportListCreature.js';import{DataConverterVehicle}from'./DataConverterVehicle.js';import{SharedConsts}from'../shared/SharedConsts.js';class ImportListVehicle extends ImportListActor{constructor(_0x485efe){const _0x5a831b=_0x4f87;_0x485efe=_0x485efe||{},super({'title':_0x5a831b('0x1d')},_0x485efe,{'props':['vehicle'],'titleSearch':_0x5a831b('0x42'),'sidebarTab':_0x5a831b('0x1c'),'gameProp':_0x5a831b('0x1c'),'defaultFolderPath':[_0x5a831b('0xa')],'folderType':'Actor','pageFilter':new PageFilterVehicles(),'page':UrlUtil[_0x5a831b('0x50')],'isDedupable':!![]},{'actorType':_0x5a831b('0x49')});}async[_0x474d00('0x23')](){const _0x13781f=_0x474d00;return[new ImportList['DataSourceUrl'](Config[_0x13781f('0x33')]('ui',_0x13781f('0x7a'))?_0x13781f('0x10'):_0x13781f('0x39'),Vetools[_0x13781f('0x70')],{'filterTypes':[ImportList[_0x13781f('0x73')]],'isDefault':!![]}),new ImportList[(_0x13781f('0x1f'))]('Custom\x20URL','',{'filterTypes':[ImportList[_0x13781f('0x55')]]}),new ImportList[(_0x13781f('0x6e'))](_0x13781f('0x48'),{'filterTypes':[ImportList[_0x13781f('0x55')]]}),...(await Vetools[_0x13781f('0x34')](_0x13781f('0x49')))[_0x13781f('0x36')](({name:_0x247c96,url:_0x40f30a})=>new ImportList['DataSourceUrl'](_0x247c96,_0x40f30a,{'filterTypes':[ImportList['SOURCE_TYP_BREW']]}))];}[_0x474d00('0x77')](){const _0xc7146b=_0x474d00;return{'isRadio':this[_0xc7146b('0x4a')],'isPreviewable':this[_0xc7146b('0x37')],'titleButtonRun':this[_0xc7146b('0x22')],'titleSearch':this[_0xc7146b('0x18')],'cols':[{'name':'Name','width':0x9,'field':_0xc7146b('0x76')},{'name':_0xc7146b('0x53'),'width':0x2,'field':_0xc7146b('0x20'),'titleProp':_0xc7146b('0x4d'),'displayProp':'sourceShort','classNameProp':_0xc7146b('0x2e'),'rowClassName':_0xc7146b('0x5f')}],'rows':this[_0xc7146b('0x47')][_0xc7146b('0x36')]((_0x43f7d9,_0xcaf66e)=>{const _0xeea6e4=_0xc7146b;return this['_pageFilter'][_0xeea6e4('0x6')](_0x43f7d9),{'name':_0x43f7d9[_0xeea6e4('0x76')],'source':_0x43f7d9[_0xeea6e4('0x20')],'sourceShort':Parser['sourceJsonToAbv'](_0x43f7d9[_0xeea6e4('0x20')]),'sourceLong':Parser[_0xeea6e4('0xf')](_0x43f7d9[_0xeea6e4('0x20')]),'sourceClassName':Parser[_0xeea6e4('0x79')](_0x43f7d9['source']),'ix':_0xcaf66e};})};}[_0x474d00('0x12')](){const _0x1ab703=_0x474d00;this[_0x1ab703('0x59')][_0x1ab703('0x2b')](this[_0x1ab703('0x47')],{'fnGetName':_0x3b53f3=>_0x3b53f3['name'],'fnGetValues':_0x33abc2=>({'source':_0x33abc2[_0x1ab703('0x20')],'hash':UrlUtil[_0x1ab703('0x19')][this['_page']](_0x33abc2)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x11a876=>this[_0x1ab703('0x4a')]?UtilList2[_0x1ab703('0x17')](this[_0x1ab703('0x59')],_0x11a876):UtilList2[_0x1ab703('0x1')](this[_0x1ab703('0x59')],_0x11a876)});}async[_0x474d00('0x24')](_0x1e9d95,_0x24dce8,_0x1fb5aa){const _0x323fe0=_0x474d00,_0x4488ad={},_0x5eaf46=await Renderer[_0x323fe0('0x49')][_0x323fe0('0x6c')](_0x24dce8),_0x128cdb=new ImportListVehicle[(_0x323fe0('0x29'))](_0x1e9d95,_0x5eaf46);await this['_pImportEntry_pFillBase'](_0x24dce8,_0x4488ad,_0x128cdb[_0x323fe0('0x72')],{'isUseTokenImageAsPortrait':Config[_0x323fe0('0x33')]('importVehicle',_0x323fe0('0x32'))}),_0x4488ad[_0x323fe0('0x4')]={};if(!_0x1fb5aa[_0x323fe0('0x6b')]&&!this[_0x323fe0('0x4e')]){const _0x37c5df=await this[_0x323fe0('0x2d')](_0x24dce8);if(_0x37c5df)_0x4488ad[_0x323fe0('0x2c')]=_0x37c5df;}return _0x4488ad[_0x323fe0('0x4b')]={'default':Config[_0x323fe0('0x33')](_0x323fe0('0x9'),_0x323fe0('0x60'))},this['_pImportEntry_fillData_Abilities'](_0x24dce8,_0x4488ad[_0x323fe0('0x4')],_0x128cdb),this[_0x323fe0('0x35')](_0x24dce8,_0x4488ad[_0x323fe0('0x4')],_0x128cdb),this[_0x323fe0('0x44')](_0x24dce8,_0x4488ad[_0x323fe0('0x4')],_0x128cdb),this['_pImportEntry_fillData_Traits'](_0x24dce8,_0x4488ad[_0x323fe0('0x4')],_0x128cdb),this[_0x323fe0('0x5')](_0x24dce8,_0x4488ad[_0x323fe0('0x4')],_0x128cdb),this['_pImportEntry_fillData_Cargo'](_0x24dce8,_0x4488ad[_0x323fe0('0x4')],_0x128cdb),_0x4488ad[_0x323fe0('0x4')][_0x323fe0('0x3a')]={},await this[_0x323fe0('0x7')](_0x24dce8,_0x4488ad,_0x323fe0('0x9')),{'dataBuilderOpts':_0x128cdb,'actorData':_0x4488ad};}async[_0x474d00('0xb')](_0x5002f5,_0x548bbf){const _0x44a58f=_0x474d00;_0x548bbf=_0x548bbf||{};if(_0x5002f5['vehicleType']===_0x44a58f('0x16')){const _0x14bbda=new ImportListCreature({});return await _0x14bbda['pInit'](),await _0x14bbda['pSyncStateFrom'](this),_0x5002f5=MiscUtil[_0x44a58f('0x3c')](_0x5002f5),_0x5002f5[_0x44a58f('0x69')]=Vetools['getTokenUrl']('vehicle',_0x5002f5),_0x14bbda[_0x44a58f('0xb')](_0x5002f5,_0x548bbf);}return super['pImportEntry'](_0x5002f5,_0x548bbf);}['_pImportEntry_fillData_Attributes'](_0x2c5310,_0x377713){const _0x3a8787=_0x474d00,_0x192409={};_0x192409['init']={'value':0x0,'bonus':0x0,'mod':0x0,'prof':0x0,'total':0x0},_0x192409[_0x3a8787('0x38')]=null;switch(_0x2c5310[_0x3a8787('0x66')]){case _0x3a8787('0x4c'):{const _0x26436b=Parser[_0x3a8787('0x5a')](_0x2c5310['dex']);_0x192409['ac']={'value':0x13+_0x26436b,'motionless':'19'},_0x192409['hp']={'value':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hp','hp')||0x0,'min':0x0,'max':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hp','hp')||0x0,'temp':0x0,'tempmax':0x0,'dt':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hp','dt')||0x0,'mt':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hp','mt')||0x0},_0x192409[_0x3a8787('0x11')]={'stations':!![],'value':0x0,'thresholds':{0x0:0x0,0x1:0x0,0x2:0x0}},_0x192409['capacity']={'creature':Renderer[_0x3a8787('0x49')]['getInfwarCreatureCapacity'](_0x2c5310),'cargo':typeof _0x2c5310[_0x3a8787('0x65')]===_0x3a8787('0x8')?0x0:_0x2c5310[_0x3a8787('0x65')]},_0x192409[_0x3a8787('0x4f')]=_0x2c5310[_0x3a8787('0x4f')]+_0x3a8787('0xc');break;}case _0x3a8787('0x5e'):{_0x192409['ac']={'value':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hull','ac')||0x0,'motionless':''},_0x192409['hp']={'value':MiscUtil[_0x3a8787('0x33')](_0x2c5310,_0x3a8787('0x1e'),'hp')||0x0,'min':0x0,'max':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hull','hp')||0x0,'temp':0x0,'tempmax':0x0,'dt':MiscUtil[_0x3a8787('0x33')](_0x2c5310,'hull','dt')||0x0,'mt':0x0};let _0x45add8=0x0;const _0x21e575={0x0:0x0,0x1:0x0,0x2:0x0};_0x2c5310['actionThresholds']&&Object[_0x3a8787('0x68')](_0x2c5310[_0x3a8787('0x58')])[_0x3a8787('0x31')](([_0x568600],[_0x59036e])=>SortUtil[_0x3a8787('0x74')](Number(_0x59036e),Number(_0x568600)))[_0x3a8787('0x5d')](0x0,0x3)[_0x3a8787('0x3f')](([_0x20cb87,_0x2c4b94],_0x4ec2f4)=>{_0x21e575[_0x4ec2f4]=_0x2c4b94;});_0x192409['actions']={'stations':![],'value':_0x45add8,'thresholds':_0x21e575},_0x192409['capacity']={'creature':Renderer[_0x3a8787('0x49')][_0x3a8787('0x56')](_0x2c5310),'cargo':typeof _0x2c5310['capCargo']==='string'?0x0:_0x2c5310[_0x3a8787('0x65')]},_0x192409[_0x3a8787('0x4f')]=_0x2c5310[_0x3a8787('0x6f')]+_0x3a8787('0x64')+_0x2c5310['pace']*0x18+_0x3a8787('0x78');break;}default:throw new Error(_0x3a8787('0x26')+_0x2c5310[_0x3a8787('0x66')]+'\x22');}_0x377713[_0x3a8787('0x62')]=_0x192409;}[_0x474d00('0x44')](_0x18dffd,_0x5dc402,_0x16636b){const _0x8fa604=_0x474d00,_0x197e81={};_0x197e81[_0x8fa604('0x57')]={'value':Config[_0x8fa604('0x33')]('importVehicle',_0x8fa604('0x1a'))?this[_0x8fa604('0x61')](_0x16636b['fluff']):''},_0x197e81[_0x8fa604('0x20')]=DataConverter[_0x8fa604('0x2f')](_0x18dffd),_0x5dc402['details']=_0x197e81;}['_pImportEntry_fillData_Traits'](_0x24943f,_0x47c3bd){const _0x3d8307=_0x474d00,_0xb5e5ed={};_0xb5e5ed[_0x3d8307('0x2a')]=UtilActors[_0x3d8307('0xe')][_0x24943f[_0x3d8307('0x2a')]]||_0x3d8307('0x21');switch(_0x24943f['vehicleType']){case _0x3d8307('0x4c'):{_0xb5e5ed[_0x3d8307('0x45')]=_0x24943f['weight']['toLocaleString']()+'\x20lb.';break;}case _0x3d8307('0x5e'):{_0xb5e5ed[_0x3d8307('0x45')]=_0x24943f[_0x3d8307('0x45')]?_0x24943f['dimensions']['join'](_0x3d8307('0x6a')):'';break;}default:throw new Error(_0x3d8307('0x26')+_0x24943f['vehicleType']+'\x22');}this['_pImportEntry_fillConditionsDamage'](_0x24943f,_0xb5e5ed),_0x47c3bd['traits']=_0xb5e5ed;}[_0x474d00('0x5')](_0x397806,_0x32ecd5){_0x32ecd5['currency']={'pp':0x0,'gp':0x0,'ep':0x0,'sp':0x0,'cp':0x0};}async[_0x474d00('0x3')](_0x30b73f,_0x2bb5d1,_0x2dc019,_0x5e5383){const _0x21db6b=_0x474d00;await this[_0x21db6b('0x25')](_0x30b73f,_0x2bb5d1,_0x2dc019,_0x5e5383),await this[_0x21db6b('0x3b')](_0x30b73f,_0x2bb5d1,_0x2dc019,_0x5e5383);const _0x3c5f2b=_0x5e5383['isTemp']||this['_pack']!=null;await UtilActors[_0x21db6b('0x67')](_0x2dc019[_0x21db6b('0x63')],_0x2dc019[_0x21db6b('0x75')],_0x3c5f2b);}['_pImportEntry_pFillItems_ship'](_0x3cc483,_0x2f4330,_0x58d642,_0x48209f){const _0x19ebf4=_0x474d00;_0x3cc483['control']&&_0x3cc483[_0x19ebf4('0x3d')][_0x19ebf4('0x3f')](_0x34d9f2=>this[_0x19ebf4('0x5c')](_0x3cc483,_0x2f4330,_0x58d642,_0x48209f,_0x34d9f2,_0x19ebf4('0x3d'))),_0x3cc483[_0x19ebf4('0x7b')]&&_0x3cc483['movement'][_0x19ebf4('0x3f')](_0xd35cff=>this[_0x19ebf4('0x5c')](_0x3cc483,_0x2f4330,_0x58d642,_0x48209f,_0xd35cff,'movement')),_0x3cc483['weapon']&&_0x3cc483[_0x19ebf4('0x6d')][_0x19ebf4('0x3f')](_0x351b6a=>this['_addShipWeapon'](_0x3cc483,_0x2f4330,_0x58d642,_0x48209f,_0x351b6a)),_0x3cc483[_0x19ebf4('0x54')]&&_0x3cc483['other'][_0x19ebf4('0x3f')](_0x8f460d=>this[_0x19ebf4('0x3e')](_0x3cc483,_0x2f4330,_0x58d642,_0x48209f,_0x8f460d)),_0x3cc483[_0x19ebf4('0x15')]&&this[_0x19ebf4('0x5b')](_0x3cc483,_0x2f4330,_0x58d642,_0x48209f,_0x3cc483[_0x19ebf4('0x15')]);}[_0x474d00('0x5c')](_0x515a72,_0x2856c9,_0x46a041,_0x1f7f39,_0x493891,_0x4d91a1){const _0x1bcea4=_0x474d00,_0x36d2a7=DataConverterVehicle[_0x1bcea4('0x51')](_0x515a72,_0x493891,_0x4d91a1);if(!_0x36d2a7)return;_0x46a041[_0x1bcea4('0x75')][_0x1bcea4('0x46')](_0x36d2a7);}['_addShipWeapon'](_0xa330e9,_0x4f15e1,_0x4bf75c,_0x2050d3,_0x3f8c98){const _0xb87b60=_0x474d00,_0x441994=DataConverterVehicle[_0xb87b60('0x2')](_0xa330e9,_0x3f8c98);if(!_0x441994)return;_0x4bf75c[_0xb87b60('0x75')][_0xb87b60('0x46')](_0x441994);}[_0x474d00('0x3e')](_0xc97ddd,_0x5da243,_0x3f985f,_0x5bfce1,_0x3a2d5f){const _0x2fbf99=_0x474d00,_0x5bab75=DataConverterVehicle[_0x2fbf99('0x71')](_0xc97ddd,_0x3a2d5f);if(!_0x5bab75)return;_0x3f985f[_0x2fbf99('0x75')][_0x2fbf99('0x46')](_0x5bab75);}[_0x474d00('0x5b')](_0x37bcea,_0x51680e,_0x3c85e3,_0x38833c,_0x3716be){const _0x94055=_0x474d00,_0x215b5e=DataConverterVehicle[_0x94055('0x13')](_0x37bcea,_0x3716be);if(!_0x215b5e||!_0x215b5e[_0x94055('0x0')])return;_0x3c85e3[_0x94055('0x75')][_0x94055('0x46')](..._0x215b5e);}[_0x474d00('0x3b')](_0x50e2d8,_0x1720ba,_0x2c168a,_0x585a26){const _0x596639=_0x474d00;_0x50e2d8[_0x596639('0x1b')]&&_0x50e2d8['trait'][_0x596639('0x3f')](_0x222f35=>this[_0x596639('0x43')](_0x50e2d8,_0x1720ba,_0x2c168a,_0x585a26,_0x222f35)),_0x50e2d8[_0x596639('0x7c')]&&_0x50e2d8['actionStation'][_0x596639('0x3f')](_0x5eb0c8=>this[_0x596639('0x40')](_0x50e2d8,_0x1720ba,_0x2c168a,_0x585a26,_0x5eb0c8)),_0x50e2d8['reaction']&&_0x50e2d8[_0x596639('0x27')][_0x596639('0x3f')](_0x4b7c7c=>this[_0x596639('0x30')](_0x50e2d8,_0x1720ba,_0x2c168a,_0x585a26,_0x4b7c7c));}[_0x474d00('0x43')](_0x312955,_0x52f944,_0x50eb6b,_0x17d1a6,_0x2866ff){const _0x3fec8f=_0x474d00,_0x8410a7=DataConverter['getItemActorPassive'](_0x2866ff,{'fvttType':'feat','mode':_0x3fec8f('0x49'),'entity':_0x312955,'source':_0x312955['source'],'actor':{'data':_0x52f944},'img':'modules/'+SharedConsts['MODULE_NAME']+_0x3fec8f('0x28')});_0x50eb6b[_0x3fec8f('0x75')][_0x3fec8f('0x46')](_0x8410a7);}[_0x474d00('0x40')](_0xecec36,_0x12e9b7,_0x452ba2,_0x2f2a74,_0x4c77f6){const _0x170022=_0x474d00,_0x372705=DataConverterVehicle['getInfWarActionItem'](_0xecec36,_0x4c77f6);if(!_0x372705)return;_0x452ba2[_0x170022('0x75')][_0x170022('0x46')](_0x372705);}[_0x474d00('0x30')](_0x19d0fc,_0x55c194,_0x54e468,_0x379ab5,_0x4e3e48){const _0x24f499=_0x474d00,_0x13b16c=DataConverter['getItemActorPassive'](_0x4e3e48,{'activationType':'reaction','activationCost':0x1,'fvttType':_0x24f499('0xd'),'mode':_0x24f499('0x49'),'entity':_0x19d0fc,'source':_0x19d0fc[_0x24f499('0x20')],'actor':{'data':_0x55c194},'img':'modules/'+SharedConsts[_0x24f499('0x52')]+_0x24f499('0x28')});_0x54e468[_0x24f499('0x75')]['push'](_0x13b16c);}[_0x474d00('0x14')](_0x2d7831,_0x4d5c5e){const _0x3b2237=_0x474d00;_0x4d5c5e[_0x3b2237('0x41')]={'crew':[],'passengers':[]};}}ImportListVehicle[_0x474d00('0x29')]=class{constructor(_0x1874bd,_0x274a83){const _0x241a4d=_0x474d00;this[_0x241a4d('0x63')]=_0x1874bd,this[_0x241a4d('0x72')]=_0x274a83,this['items']=[];}};export{ImportListVehicle};